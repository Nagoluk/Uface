{"version":3,"sources":["components/Dialogs/Dialog/Messages/Messages.module.css","components/Profile/MyPosts/post/post.module.css","components/common/gallery/gallery.module.css","components/Profile/ProfileInfo/status/status.module.css","components/common/formControls/FormControls.module.css","components/Profile/profile.module.css","components/Nav/adaptiveNav.module.css","components/Users/Users.module.css","api/api.ts","api/profile-api.ts","api/users-api.ts","redux-state/profileReducer.ts","interfaces/common-interfaces.ts","api/dialogs-api.ts","redux-state/messageReducer.ts","redux-state/usersReducer.ts","api/auth-api.ts","redux-state/loginReducer.ts","redux-state/appReducer.ts","redux-state/notificationReducer.ts","api/chat-api.ts","img/common/preloader.svg","redux-state/chat-reducer.ts","redux-state/stateRedux.ts","components/common/formControls/FormControls.tsx","utils/validators/validators.ts","styles/theme.tsx","redux-state/selectors/login-selectors.ts","components/Login/Login.tsx","components/assets/preloader/Preloader.tsx","redux-state/selectors/notification-selector.ts","img/Profile/avatar.png","components/assets/avatar/avatar.tsx","components/Nav/adaptiveNav.tsx","redux-state/selectors/app-selectors.ts","redux-state/selectors/message-selectors.ts","utils/date-formater.ts","components/common/NetworkError/NetworkError.tsx","hook/Resize.tsx","components/Dialogs/Dialog/Messages/Messages.jsx","img/Preloader/notFound.gif","components/404/notFound.tsx","components/Dialogs/Dialog/Dialog.jsx","components/Dialogs/DialogList/DialogsList.jsx","components/Dialogs/index.tsx","components/Nav/nav.tsx","styles/vertical.align.tsx","components/Header/header.tsx","styles/wrap.styles.tsx","redux-state/selectors/profile-selector.ts","components/Setting/UpdateProfile/update-profile-form.tsx","components/Setting/UpdateProfile/update-contact-form.tsx","components/Setting/setting.tsx","components/Profile/ProfileInfo/status/statusHook.tsx","components/common/gallery/gallery.tsx","components/Profile/ProfileInfo/profileInfo.tsx","components/Profile/MyPosts/post/post.tsx","components/Profile/MyPosts/MyPosts.tsx","redux-state/selectors/users-selectors.ts","components/Profile/profile.tsx","hook/Redirect.tsx","components/Users/User.tsx","img/Profile/avatarBlack.png","components/common/pagitator/Pagitator.tsx","components/common/notFount/NotFound.tsx","components/Users/Users.tsx","localization/index.ts","redux-state/selectors/chat-selector.ts","components/Chat/Chat.tsx","App.tsx","index.tsx","components/Nav/nav.module.css","components/Setting/setting.module.css","components/Header/header.module.css","components/Dialogs/DialogList/DialogsList.module.css","components/Login/Login.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Dialogs/Dialog/DialogWithUser.module.css"],"names":["module","exports","instance","axios","create","withCredentials","baseURL","headers","interceptors","request","use","config","error","Promise","reject","ProfileAPI","id","get","data","put","status","avatar","formData","FormData","append","then","response","qs","require","UsersAPI","currentPage","pageSize","filters","stringify","page","count","text","post","delete","message","duration","ResultsCodes","ResultCodeForCaptcha","initialProfilePage","PostsData","content","likes","rep","comm","dataSend","profile","isFetching","isUploadProfile","isFollowed","setProfileErrors","actionsProfile","type","payload","condition","getProfileThunkCreator","dispatch","fullName","i","items","followed","catch","finally","profileReducer","state","action","currentData","Date","toString","slice","stateCopy","filter","item","DialogsAPI","body","UserId","messageId","initialMessage","dialogs","messages","totalCount","isDialogsFetching","isRedirectedToDialog","isDialogFetching","refresh","getDialogsError","getMessagesError","actionsMessages","getDialogsThunkCreator","getMessagesThunkCreator","sendMessagesThunkCreator","messageReducer","temp","m","getMessagesAC","initialUsers","users","totalUsersCount","currentPagePagitator","followProcess","foundedUsers","UsersActions","userID","isFetchingFollow","setUsersThunkCreator","getState","followThunkCreator","fromProfile","resultCode","unfollowThunkCreator","usersReducer","map","u","AuthAPI","email","password","rememberMe","captcha","initState","login","isLogined","captchaURL","actionsLogin","URL","loginThunkCreator","Success","getCaptchaThunkCreator","url","logout","loginReducer","initialized","blackTheme","actionsApp","appReducer","localStorage","setItem","JSON","initialNotification","newMessageCount","actionsNotifications","notificationReducer","ws","subscribers","notifySubscriberAboutStatus","statusChanged","forEach","s","closeHandler","setTimeout","createChannel","setMessagesHandler","e","parse","openHandler","removeAllEventsAndClose","removeEventListener","close","WebSocket","addEventListener","_rect","_rect2","_rect3","_rect4","_rect5","ChatAPI","eventName","callback","push","send","actionsChat","_newStatusHandler","newStatusHandlerCreator","_newMessageHandler","newMessageHandlerCreator","reducers","combineReducers","ProfilePage","MessagePage","UsersReducer","LoginReducer","form","formReducer","app","chat","v1","index","array","length","notification","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleWare","InputField","input","meta","props","hasError","touched","className","styles","InputContainer","required","value","UniversalThemeComponent","styled","div","theme","mode","HeaderStyle","NavigationStyle","AdaptiveNav","ProfileItemStyled","UserOptionItemStyled","PagitatorItemStyled","UserItemStyled","PostsItemStyled","LoginWrapStyled","SettingStyled","getLoginSelector","getIsLoginedSelector","getMyProfileSelector","getCaptchaSelector","getMyIdSelector","Background","ReduxLoginForm","reduxForm","handleSubmit","submitting","Form","onSubmit","AliwangwangOutlined","Input","Field","placeholder","component","validate","name","RememberMe","Captcha","src","alt","Error","disabled","Login","useEffect","document","title","useSelector","useDispatch","to","Photo","LoginForm","loginData","CaptchaIsRequired","stopSubmit","_error","join","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgPreloader","_ref","svgRef","titleId","xmlns","x","y","stroke","fill","height","width","viewBox","ref","transform","attributeName","attributeType","dur","values","repeatCount","begin","ForwardRef","Preloader","getNewMessagesCountSelector","AvatarStyled","size","link","AvatarImg","Avatar","SwitchButton","button","FullScreenMenu","setIsFullScreen","headermod","fullScreen","fullScreenWrap","photos","small","MenuUnfoldOutlined","closeFullScreen","onClick","fullScreenMenuItems","adaptiveMenu","activeClassName","Navmod","activeLink","IdcardOutlined","UsergroupAddOutlined","MessageOutlined","WechatOutlined","SettingOutlined","SwapOutlined","LogoutOutlined","AdaptiveMenu","useState","isFullScreen","adaptivemenu","menu","getIsBlackSelector","getInitializedSelector","getDialogsSelector","getMessagesSelector","getIsDialogsFetching","getIsMessagesFetching","getIsRedirectToDialog","getDialogInfoSelector","createSelector","_","dialog","String","getCorrectTime","date","timeZone","getTimezoneOffset","getTime","Wrap","NetworkError","SyncOutlined","useWindowWidthSize","innerWidth","windowSize","setWindowSize","handleResize","antIcon","LoadingOutlined","style","fontSize","spin","MessageWrap","black","Dots","EllipsisOutlined","Message","messageMenu","Item","color","deleteMessage","DeleteOutlined","MessagesStyle","messageItem","myId","senderId","isMy","messageItemLogo","mail","addedAt","overlay","trigger","messageActions","Messages","dialogId","messagesData","isBlack","isMessageFetching","deleteMessageThunkCreator","reverse","spinning","indicator","NotFound","textAlign","marginTop","notFound","React","Component","DialogStyled","DialogHeader","MessageEditor","ChooseDialog","NoDialogSelected","DialogMod","noDialog","Dialog","useParams","setMessageText","dialogUserData","dialogWithUser","dialogHeader","large","Dialogavatar","userName","lastUserActivityDate","split","backToDialogList","CloseCircleOutlined","createNewMessage","onKeyPress","event","preventDefault","onChange","createNewMessageAcivities","MyPost","trim","SendOutlined","DialogListStyled","DialogItemStyled","li","DialogItem","path","DialogsStyles","history","dates","lastMessage","lastDialogActivityDate","LastMessage","newMessagesCount","active","DialogsList","useHistory","searchText","setSearchText","dialogsCopied","toLowerCase","includes","dialogsElements","dialogList","searchDialog","SearchOutlined","contactList","DialogWrap","Dialogs","Nav","navigation","VerticalAlign","Header","headerWrap","leftside","logo","rightside","note","hide","BellOutlined","exact","UniversalWrap","maxWidth","getProfileSelector","getIsProfileFetching","getMyPostsSelector","getStatusSelector","getProfileErrorSelector","getIsFollowedSelector","DisplayingErrorMessagesSchema","Yup","shape","aboutMe","min","max","lookingForAJobDescription","top","renderField","Styles","formItem","label","UpdateProfileForm","lookingForAJob","t","useTranslation","initialValues","enableReinitialize","validationSchema","setSubmitting","res","success","isSubmitting","layout","buttons","UpdateContactForm","contacts","validationScheme","nullable","TabPane","Tabs","Setting","windowsWidth","console","log","defaultActiveKey","tabPosition","Set","wrap","tab","ProfileOutlined","PhoneOutlined","StatusHook","edit","setEdit","userStatus","setStatus","currentTarget","autoFocus","onBlur","amI","updateStatusThunkCreator","maxLength","EditMode","onDoubleClick","Gellery","galleryStyle","ContentWrapper","setShowGallery","Content","htmlFor","CloudUploadOutlined","onInput","uploadPhoto","display","img","ProfileInfo","isRedirectToDialog","followProcces","hasContact","userId","showGallery","normalizeLink","match","files","location","reload","Gallery","p","profileWrap","photowrap","information","avatarWrap","changeAvatarContainer","profileAvatar","changeAvatar","AvatarControl","border","info","about","infoItem","SmileOutlined","ExceptionOutlined","FileSearchOutlined","description","Activity","some","UsersStlyes","follower","ActivityButtons","Unfollow","Mail","facebook","href","rel","FacebookOutlined","website","DribbbleOutlined","vk","IeOutlined","twitter","TwitterOutlined","instagram","InstagramOutlined","youtube","YoutubeOutlined","github","GithubOutlined","mainLink","LinkedinOutlined","Post","postHeder","postSetting","activity","LikeOutlined","RetweetOutlined","MyPosts","changeVal","isDisabled","changeDisabled","symbols","setSymbols","PostsElements","currentValue","myposts","newpost","autoComplete","createnewpost","getUsersSelector","getPageSizeSelector","getTotalUsersCountSelector","getCurrentPageSelector","getIsFetchingSelector","getPagePagitator","getFollowProccesSelector","getUsersErrorSelector","Profile","params","useRedirect","setProfile","User","header","user","Pagitator","portion","pagePagitator","setCurrentPagePagitator","onPageChange","pageCount","Math","ceil","pages","left","right","settingPanel","navs","LeftOutlined","RightOutlined","FrownOutlined","Users","setFilters","searchStr","setSearchStr","unfollow","follow","uri","search","ignoreQueryPrefix","term","setAllFilters","prevState","friend","setFollowedFollowedFilters","setUnfollowedFilters","option","undefined","optionSelect","defaultValue","allowClear","enterButton","onSearch","itemWrap","resources","ua","eng","getChatMessagesSelector","getChatStatusSelector","ChatPageWrapper","ChatPage","Chat","MessagesWrapStyled","isAutoScroll","setIsAutoScroll","scrollToLastMessageRef","useRef","current","scrollIntoView","behavior","onScroll","element","abs","scrollHeight","scrollTop","clientHeight","MessagesItemStyled","memo","photo","AddMessageFormStyled","AddMessageForm","i18n","initReactI18next","init","lng","fallbackLng","interpolation","escapeValue","GlobalStyle","createGlobalStyle","App","isBlackTheme","getItem","promise","all","Suspense","fallback","render","ReactDOM","getElementById"],"mappings":"mFACAA,EAAOC,QAAU,CAAC,SAAW,2BAA2B,YAAc,8BAA8B,KAAO,uBAAuB,KAAO,uBAAuB,gBAAkB,kCAAkC,eAAiB,mC,oBCArOD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,UAAY,wBAAwB,YAAc,0BAA0B,KAAO,mBAAmB,QAAU,sBAAsB,SAAW,yB,oBCA7LD,EAAOC,QAAU,CAAC,KAAO,sBAAsB,eAAiB,gCAAgC,QAAU,yBAAyB,OAAS,0B,oBCA5ID,EAAOC,QAAU,CAAC,MAAQ,sBAAsB,SAAW,2B,oBCA3DD,EAAOC,QAAU,CAAC,eAAiB,uC,2rDCAnCD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,YAAc,6BAA6B,WAAa,4BAA4B,sBAAwB,uCAAuC,OAAS,wBAAwB,aAAe,8BAA8B,cAAgB,+BAA+B,MAAQ,uBAAuB,SAAW,0BAA0B,UAAY,2BAA2B,OAAS,wBAAwB,SAAW,0BAA0B,YAAc,6BAA6B,SAAW,0BAA0B,KAAO,sBAAsB,gBAAkB,iCAAiC,SAAW,4B,mBCAjqBD,EAAOC,QAAU,CAAC,OAAS,4BAA4B,aAAe,kCAAkC,WAAa,gCAAgC,eAAiB,oCAAoC,gBAAkB,qCAAqC,oBAAsB,yCAAyC,KAAO,4B,mBCAvUD,EAAOC,QAAU,CAAC,aAAe,4BAA4B,aAAe,4BAA4B,KAAO,oBAAoB,OAAS,sBAAsB,SAAW,wBAAwB,KAAO,oBAAoB,OAAS,sBAAsB,QAAU,uBAAuB,KAAO,oBAAoB,OAAS,wB,qGCIvTC,E,OAAWC,EAAMC,OAAO,CACjCC,iBAAiB,EACjBC,QAAS,gDACTC,QAAS,CACL,UAAW,0CAInBL,EAASM,aAAaC,QAAQC,KAAI,SAACC,GAK/B,OAAOA,KACR,SAACC,GAIA,OAAOC,QAAQC,OAAOF,MCnBnB,IAAIG,EAAa,SACTC,GACP,OAAOd,EAASe,IAAiB,WAAaD,IAF3CD,EAAa,SAKVC,GACN,OAAOd,EAASe,IAAY,kBAAoBD,IAN7CD,EAAa,SASLG,GACX,OAAOhB,EAASiB,IAAmB,UAAWD,IAV3CH,EAAa,SAaPK,GACT,OAAOlB,EAASiB,IAAmB,iBAAkB,CAACC,OAAQA,KAd3DL,EAAa,SAiBPM,GACT,IAAIC,EAAW,IAAIC,SAInB,OAHAD,EAASE,OAAO,QAASH,GAGlBnB,EAASiB,IAAmB,gBAAiBG,EAAU,CAC1Df,QAAS,CACL,eAAgB,yBAErBkB,MAAK,SAAAC,GAAQ,OAAIA,EAASR,SC1B/BS,EAAKC,EAAQ,KAGRC,EAAW,WAE0C,IAAnDC,EAAkD,uDAApC,EAAGC,EAAiC,uDAAtB,EAAGC,EAAmB,uCACnDvB,EAAUkB,EAAGM,UAAH,aAAcC,KAAMJ,EAAaK,MAAOJ,GAAaC,IAEnE,OAAO9B,EAASe,IAAsB,SAASR,GAC1CgB,MAAK,SAAAC,GAAQ,OAAIA,EAASR,SAN5BW,EAAW,SASXO,GACH,OAAOlC,EAASe,IAAT,qBAA6CmB,EAA7C,UAA2D,KAV/DP,EAcI,SAACb,GACR,OAAOd,EAASmC,KAAoB,UAAYrB,EAAI,IAAIS,MAAK,SAAAC,GAAQ,OAAIA,EAASR,SAf/EW,EAkBM,SAACb,GACV,OAAOd,EAASoC,OAAsB,UAAYtB,GAAIS,MAAK,SAAAC,GAAQ,OAAIA,EAASR,S,SCjBxFqB,IAAQ5B,OAAO,CAAC6B,SAAU,MAG1B,ICNYC,EAUAC,EDJRC,EAAqB,CACrBC,UAAW,CACP,CAAC5B,GAAI,EAAG6B,QAAS,eAAgBC,MAAO,EAAGC,IAAK,EAAGC,KAAM,EAAGC,SAAU,6BAG1EC,QAAS,KACT9B,OAAQ,GACR+B,YAAY,EACZC,iBAAiB,EACjBC,YAAY,EACZC,iBAAkB,IA4ETC,EACK,SAACnB,GAAD,MAAmB,CAACoB,KAAM,eAAgBpB,SAD/CmB,EAII,SAACE,GAAD,MAAuB,CAACD,KAAM,aAAcC,YAJhDF,EAKK,SAACG,GAAD,MAAyB,CAACF,KAAM,oBAAqBC,QAASC,IALnEH,EAMG,SAACL,GAAD,MAAsC,CAACM,KAAM,cAAeN,QAASA,IANxEK,EAOE,SAACnC,GAAD,MAA4B,CAACoC,KAAM,aAAcpC,WAPnDmC,EAQS,SAACE,GAAD,MAAsB,CAACD,KAAM,qBAAsBC,YAG5DE,EAAyB,SAAC3C,GACnC,OAAO,SAAC4C,GACJA,EAASL,EAAgC,KACzCK,EAASL,GAA4B,IAErCxC,EAAsBC,GAAIS,MAAK,SAACC,GAC5BG,EAAgBH,EAASR,KAAK2C,UAAUpC,MAAK,SAACqC,GAC1CF,EAASL,EAA2BO,EAAE5C,KAAK6C,MAAM,GAAGC,WACpDJ,EAASL,EAA0B7B,EAASR,OAC5C0C,EAASL,GAA4B,UAE1CU,OAAM,WACLL,EAASL,EAAgC,qBAC1CW,SAAQ,WACPN,EAASL,GAA4B,SA0DlCY,EA5JQ,WAA8E,IAA7EC,EAA4E,uDAApEzB,EAAoB0B,EAAgD,uCAChG,OAAQA,EAAOb,MACX,IAAK,eACD,IAAIc,GAAc,IAAIC,MAAOC,WAAWC,MAAM,EAAG,IAE7CC,EAAS,eACNN,EADM,CAETxB,UAAU,GAAD,mBAAMwB,EAAMxB,WAAZ,CAAuB,CAC5B5B,GAAI,EACJ6B,QAASwB,EAAOjC,KAChBU,MAAO,EACPC,IAAK,EACLC,KAAM,EACNC,SAAUqB,OAIlB,OAAOI,EAEX,IAAK,cACD,OAAO,eACAN,EADP,CAEIlB,QAASmB,EAAOnB,UAGxB,IAAK,aACD,OAAO,eACAkB,EADP,CAEIhD,OAAQiD,EAAOjD,SAGvB,IAAK,oBAED,OAAO,eACAgD,EADP,CAEIjB,WAAYkB,EAAOZ,UAI3B,IAAK,cACD,OAAO,eACAW,EADP,CAEIxB,UAAWwB,EAAMxB,UAAU+B,QAAO,SAAAC,GAAI,OAAIA,EAAK5D,KAAOqD,EAAOrD,QAIrE,IAAK,aACD,OAAO,eACAoD,EADP,CAEIf,WAAYgB,EAAOZ,UAI3B,IAAK,8BACD,OAAO,eACAW,EADP,CAEIhB,gBAAiBiB,EAAOZ,UAIhC,IAAK,qBACD,OAAO,eACAW,EADP,CAEId,iBAAkBe,EAAOZ,UAIjC,QACI,OAAOW,IE3FRS,EAAa,WAEhB,OAAO3E,EAASe,IAAS,YAFtB4D,EAAa,SAKP7D,GACT,OAAOd,EAASiB,IAAT,kBAA6BH,KANjC6D,EAAa,SASR7D,EAAY8D,GACpB,OAAO5E,EAASmC,KAAT,kBAA8BrB,EAA9B,aAA6C,CAAC8D,KAAMA,IAAOrD,MAAK,SAAAC,GAAQ,OAAIA,EAASR,SAVzF2D,EAAa,SAaRE,GACR,OAAO7E,EAASe,IAAT,kBAA6B8D,EAA7B,eAdJF,EAAa,WAkBhB,OAAO3E,EAASe,IAAY,+BAlBzB4D,EAAa,SAqBNG,GACV,OAAO9E,EAASoC,OAAT,2BAAyC0C,KChBlDC,EAAiB,CACnBC,QAAS,KAETC,SAAU,CACNpB,MAAO,GACPqB,WAAY,EACZxE,MAAO,MAEXyE,mBAAmB,EACnBC,sBAAsB,EACtBC,kBAAkB,EAClBC,SAAS,EACTC,gBAAiB,GACjBC,iBAAkB,IAqFTC,EACK,SAACT,GAAD,MAAqC,CAAC1B,KAAM,cAAe0B,YADhES,EAEM,SAACzE,GAAD,MAAwE,CAACsC,KAAM,eAAgBtC,SAFrGyE,EAGY,SAAClC,GAAD,MAAuB,CAACD,KAAM,qBAAsBC,YAHhEkC,EAIK,SAACpD,GAAD,MAAwB,CAACiB,KAAM,cAAejB,YAJnDoD,EAKc,SAAClC,GAAD,MAAuB,CAACD,KAAM,8BAA+BC,YAL3EkC,EAMY,SAAClC,GAAD,MAAuB,CAACD,KAAM,yBAA0BC,YANpEkC,EAOM,SAACX,GAAD,MAAwB,CAACxB,KAAM,iBAAkBwB,cAPvDW,EAQW,SAAC/E,GAAD,MAAoB,CAAC4C,KAAM,wBAAyB5C,UAR/D+E,EASY,SAAC/E,GAAD,MAAoB,CAAC4C,KAAM,yBAA0B5C,UAGjEgF,EAAyB,WAClC,OAAO,SAAChC,GACJA,EAAS+B,GAAoC,IAC7C/B,EAAS+B,EAAmC,KAE5Cd,IAAwBpD,MAAK,SAACP,GACN,MAAhBA,EAAKE,QAAgBwC,EAAS+B,EAA6BzE,EAAKA,UACrE+C,OAAM,WACLL,EAAS+B,EAAmC,qBAC7CzB,SAAQ,WACPN,EAAS+B,GAAoC,SAK5CE,EAA0B,SAAC7E,GACpC,OAAO,SAAC4C,GACJA,EAAS+B,EAAoC,KAC7C/B,EAAS+B,GAAoC,IAC7Cd,EAAuB7D,GAAIS,MAAK,SAACP,GACT,MAAhBA,EAAKE,QAAgBwC,EAAS+B,EAA8BzE,EAAKA,UACtE+C,OAAM,WACLL,EAAS+B,EAAoC,qBAC9CzB,SAAQ,WACPN,EAAS+B,GAAoC,SAK5CG,EAA2B,SAAC9E,EAAY8D,GACjD,OAAO,SAAClB,GACJiB,EAAuB7D,EAAI8D,GAAMrD,MAAK,SAACP,GACnC0C,EAAS+B,EAA6BzE,EAAKA,KAAKqB,aACjD0B,OAAM,WACL1B,IAAQ3B,MAAM,4BA6BXmF,EA5JQ,WAAsE,IAArE3B,EAAoE,uDAA5Da,EAAgBZ,EAA4C,uCACxF,OAAQA,EAAOb,MACX,IAAK,cACD,OAAO,eACAY,EADP,CAEIc,QAASb,EAAOa,UAIxB,IAAK,eACD,OAAO,eACAd,EADP,CAEIe,SAAU,CACNpB,MAAM,YAAKM,EAAOnD,KAAK6C,OACvBqB,WAAYf,EAAOnD,KAAKkE,WACxBxE,MAAOyD,EAAOnD,KAAKN,SAK/B,IAAK,qBACD,OAAO,eACAwD,EADP,CAEIiB,kBAAmBhB,EAAOZ,UAIlC,IAAK,cACD,OAAO,eACAW,EADP,CAEIe,SAAS,eACFf,EAAMe,SADL,CAEJpB,MAAM,GAAD,mBAAMK,EAAMe,SAASpB,OAArB,CAA4BM,EAAO9B,cAKpD,IAAK,8BACD,OAAO,eACA6B,EADP,CAEIkB,qBAAsBjB,EAAOZ,UAIrC,IAAK,yBACD,OAAO,eACAW,EADP,CAEImB,iBAAkBlB,EAAOZ,UAIjC,IAAK,wBACD,OAAO,eACAW,EADP,CAEIqB,gBAAiBpB,EAAOzD,QAIhC,IAAK,yBACD,OAAO,eACAwD,EADP,CAEIsB,iBAAkBrB,EAAOzD,QAIjC,IAAK,iBACD,IAAMoF,EAAO5B,EAAMe,SAASpB,MAAMY,QAAO,SAAAsB,GAAC,OAAIA,EAAEjF,KAAOqD,EAAOW,aAC9D,OAAO,eACAZ,EADP,CAEIe,SAAS,eACFf,EAAMe,SADL,CAEJpB,MAAOiC,MAInB,QACI,OAAO5B,IAoFL8B,EAAiBP,E,QChL3BQ,EAAe,CACfC,MAAO,GACPrE,SAAU,EACVsE,gBAAiB,EACjBvE,YAAa,EACbwE,qBAAsB,EACtBnD,YAAY,EACZoD,cAAe,GACfC,aAAc,GACd5F,MAAO,IAqFE6F,GACD,SAACC,GAAD,MAAqB,CAAClD,KAAM,SAAUkD,WADrCD,GAEC,SAACC,GAAD,MAAqB,CAAClD,KAAM,WAAYkD,WAFzCD,GAGC,SAACL,GAAD,MAA0B,CAAC5C,KAAM,YAAa4C,UAH/CK,GAIO,SAACvE,GAAD,MAAmB,CAACsB,KAAM,mBAAoBtB,SAJrDuE,GAKM,SAACtE,GAAD,MAAoB,CAACqB,KAAM,wBAAyBrB,UAL1DsE,GAMO,SAACtD,GAAD,MAA0B,CAACK,KAAM,qBAAsBL,eAN9DsD,GAOe,SAACC,EAAgBC,GAAjB,MAAgD,CACpEnD,KAAM,2BACNkD,SACAC,qBAVKF,GAYgB,SAAChD,GAAD,MAAsB,CAACD,KAAM,6BAA8BC,YAZ3EgD,GAcC,SAAC7F,GAAD,MAAoB,CAAC4C,KAAM,YAAa5C,UAQzCgG,GAAuB,SAAC9E,EAAqBC,EAAkBC,GACxE,OAAO,SAAC4B,EAA+BiD,GACnCjD,EAAS6C,GAAsB,KAC/B7C,EAAS6C,GAA4B3E,IACrC8B,EAAS6C,IAA4B,IACrC5E,EAAkBC,EAAaC,EAAUC,GAASP,MAAK,SAACP,GACpD0C,EAAS6C,GAAsBvF,EAAK6C,QACpCH,EAAS6C,GAA2BvF,EAAKkE,gBAC1CnB,OAAM,WACLL,EAAS6C,GAAsB,qBAChCvC,SAAQ,WACPN,EAAS6C,IAA4B,SAMpCK,GAAqB,SAACJ,GAAyC,IAAzBK,EAAwB,wDACvE,OAAO,SAACnD,GACJA,EAAS6C,GAAoCC,GAAQ,IAErD7E,EAAmB6E,GAAQjF,MAAK,SAACP,GACL,IAApBA,EAAK8F,aACLpD,EAAS6C,GAAoBC,IAC1BK,GAAanD,EAASL,GAA2B,QAGzDU,OAAM,WACL1B,IAAQ3B,MAAM,oBACfsD,SAAQ,WACPN,EAAS6C,GAAoCC,GAAQ,SAMpDO,GAAuB,SAACP,GAAyC,IAAzBK,EAAwB,wDACzE,OAAO,SAACnD,EAAeiD,GACnBjD,EAAS6C,GAAoCC,GAAQ,IACrD7E,EAAqB6E,GAAQjF,MAAK,SAACP,GACP,IAApBA,EAAK8F,aACLpD,EAAS6C,GAAsBC,IAC5BK,GAAanD,EAASL,GAA2B,QAGzDU,OAAM,WACL1B,IAAQ3B,MAAM,sBACfsD,SAAQ,WACPN,EAAS6C,GAAoCC,GAAQ,SAMlDQ,GA9JM,WAA+D,IAA9D9C,EAA6D,uDAArD+B,EAAc9B,EAAuC,uCAC/E,OAAQA,EAAOb,MACX,IAAK,SACD,OAAO,eACAY,EADP,CAEIgC,MAAOhC,EAAMgC,MAAMe,KAAI,SAAAC,GACnB,OAAIA,EAAEpG,KAAOqD,EAAOqC,OACV,eAAOU,EAAP,CAAUpD,UAAU,IAIvBoD,OAInB,IAAK,WACD,OAAO,eACAhD,EADP,CAEIgC,MAAOhC,EAAMgC,MAAMe,KAAI,SAAAC,GACnB,OAAIA,EAAEpG,KAAOqD,EAAOqC,OACT,eAAIU,EAAX,CAAcpD,UAAU,IAErBoD,OAInB,IAAK,YACD,OAAO,eACAhD,EADP,CAEIgC,MAAO/B,EAAO+B,QAGtB,IAAK,mBACD,OAAO,eACAhC,EADP,CAEItC,YAAauC,EAAOnC,OAG5B,IAAK,wBACD,OAAO,eACAkC,EADP,CAEIiC,gBAAiBhC,EAAOlC,QAIhC,IAAK,qBACD,OAAO,eACAiC,EADP,CAEIjB,WAAYkB,EAAOlB,aAG3B,IAAK,2BACD,OAAO,eACAiB,EADP,CAEImC,cAAelC,EAAOsC,iBAAP,sBACPvC,EAAMmC,eADC,CACclC,EAAOqC,SAAUtC,EAAMmC,cAAc5B,QAAO,SAAA3D,GAAE,OAAIA,IAAOqD,EAAOqC,YAGrG,IAAK,6BACD,OAAO,eACAtC,EADP,CAEIkC,qBAAsBjC,EAAOZ,UAErC,IAAK,oBACD,OAAO,eACAW,EADP,CAEIoC,aAAcnC,EAAON,QAI7B,IAAK,YACD,OAAO,eACAK,EADP,CAEIxD,MAAOyD,EAAOzD,QAItB,QACI,OAAOwD,I,oBH7FP3B,O,qBAAAA,I,kBAAAA,M,cAUAC,O,2CAAAA,M,KIZL,IAAI2E,GAAU,WAEb,OAAOnH,EAASe,IAA2B,WAAWQ,MAAK,SAAAC,GAAQ,OAAIA,EAASR,SAF7EmG,GAAU,SAKXC,EAAeC,GAAsE,IAApDC,EAAmD,wDAA/BC,EAA+B,uDAAN,KAChF,OAAOvH,EAASmC,KAAkD,aAAc,CAACiF,QAAOC,WAAUC,aAAYC,aAN3GJ,GAAU,WAUb,OAAOnH,EAASoC,OAAsB,cAAcb,MAAK,SAAAC,GAAQ,OAAIA,EAASR,SAV3EmG,GAAU,WAcb,OAAOnH,EAASe,IAAc,4BAA4BQ,MAAK,SAAAC,GAAQ,OAAIA,EAASR,SCVxFwG,GAAY,CACZ1G,GAAI,KACJsG,MAAO,KACPK,MAAO,KACPC,WAAW,EACXC,WAAY,GACZ3E,QAAS,MAgCP4E,GACc,SAAC9G,EAAsB2G,EAAyBL,EAAyBM,GACrF,MAAQ,CAACpE,KAAM,iBAAkBtC,KAAM,CAACF,KAAI2G,QAAOL,QAAOM,eAF5DE,GAKe,SAACC,GAAD,MAAkB,CAACvE,KAAM,kBAAmBuE,QAL3DD,GAOY,SAAC5E,GAAD,MAAqC,CAACM,KAAM,kBAAmBN,YAItE8E,GAAoB,WAC3B,OAAO,SAACpE,GACJ,OAAOyD,KAAmB5F,MAAK,SAACC,GAC5B,GAAIA,EAASsF,aAAevE,EAAawF,QAAS,CAAC,IAAD,EACrBvG,EAASR,KAA7BF,EADyC,EACzCA,GAAI2G,EADqC,EACrCA,MAAOL,EAD8B,EAC9BA,MAChB1D,EAASkE,GAA4B9G,EAAI2G,EAAOL,GAAO,IAEvDvG,EAAsBC,GAAIS,MAAK,SAACC,GAC5BkC,EAASkE,GAA0BpG,EAASR,gBAQrDgH,GAAyB,WAChC,OAAO,SAACtE,GACJyD,KAA2B5F,MAAK,SAACC,GAC7BkC,EAASkE,GAA6BpG,EAASyG,WAyBhDC,GAAS,WAChB,OAAO,SAACxE,GACJyD,KAAiB5F,MAAK,SAACC,GACfA,EAASsF,aAAevE,EAAawF,SACrCrE,EAASkE,GAA4B,KAAM,KAAM,MAAM,SAOxDO,GA/FM,WAAiE,IAAhEjE,EAA+D,uDAAvDsD,GAAWrD,EAA4C,uCAEjF,OAAQA,EAAOb,MACX,IAAK,iBACD,OAAO,eACAY,EACAC,EAAOnD,KAFd,CAGIF,GAAIqD,EAAOnD,KAAKF,KAGxB,IAAK,kBACD,OAAO,eACAoD,EADP,CAEIyD,WAAYxD,EAAO0D,MAG3B,IAAK,kBACD,OAAO,eACA3D,EADP,CAEIlB,QAASmB,EAAOnB,UAIxB,QACI,OAAOkB,I,oBCrCfsD,GAAY,CACbY,aAAa,EACbC,YAAY,GAyBFC,GACS,iBAAO,CAAChF,KAAM,oBADvBgF,GAEM,iBAAO,CAAChF,KAAM,iBAiBlBiF,GAxCI,WAA4D,IAA3DrE,EAA0D,uDAAlDsD,GAAWrD,EAAuC,uCAC1E,OAAOA,EAAOb,MACV,IAAK,kBACD,OAAO,eACAY,EADP,CAEIkE,aAAa,IAGrB,IAAK,eAED,OADAI,aAAaC,QAAQ,QAASC,KAAK3G,WAAWmC,EAAMmE,aAC7C,eACAnE,EADP,CAEImE,YAAanE,EAAMmE,aAI3B,QAAS,OAAOnE,ICtBlByE,GAAsB,CACxBC,gBAAiB,GAkBfC,GACkB,SAACtF,GAAD,MAAsB,CAACD,KAAM,wBAAyBC,YAa/DuF,GA7Ba,WAA6E,IAA5E5E,EAA2E,uDAAnEyE,GAAqBxE,EAA8C,uCAEpG,OAAQA,EAAOb,MACX,IAAK,wBACD,OAAO,eACAY,EADP,CAEI0E,gBAAiBzE,EAAOZ,QAAU,IAAMY,EAAOZ,QAAU,QAGjE,QACI,OAAOW,ICjBf6E,GAAuB,KACvBC,GAAc,CACd,gBAAmB,GACnB,cAAiB,IAKfC,GAA8B,SAAC/H,GACjC8H,GAAYE,cAAcC,SAAQ,SAAAC,GAAC,OAAIA,EAAElI,OAIvCmI,GAAe,WACjBJ,GAA4B,WAC5BK,WAAWC,GAAe,MAGxBC,GAAqB,SAACC,GACxB,IAAIxE,EAAWyD,KAAKgB,MAAMD,EAAEzI,MAC5BgI,GAAW,gBAAoBG,SAAQ,SAAAC,GAAC,OAAIA,EAAEnE,OAG5C0E,GAAc,WAChBV,GAA4B,UAG1BW,GAA0B,WAAO,IAAD,QAChC,QAAF,EAAAb,UAAA,SAAIc,oBAAoB,QAAQR,IAC9B,QAAF,EAAAN,UAAA,SAAIc,oBAAoB,UAAWL,IACjC,QAAF,EAAAT,UAAA,SAAIc,oBAAoB,OAAQF,IAC9B,QAAF,EAAAZ,UAAA,SAAIe,SAIR,SAASP,KAAiB,IAAD,MACrBK,KACAb,GAAK,IAAIgB,UAAU,gEACnBd,GAA4B,WAE1B,QAAF,EAAAF,UAAA,SAAIiB,iBAAiB,QAASX,IAC5B,QAAF,EAAAN,UAAA,SAAIiB,iBAAiB,UAAWR,IAC9B,QAAF,EAAAT,UAAA,SAAIiB,iBAAiB,OAAQL,IAG1B,I,oCC9CHM,GAAOC,GAAQC,GAAQC,GAAQC,GD8CtBC,GAAU,WAEff,MAFKe,GAAU,WAMfV,KACAZ,GAAW,gBAAsB,GACjCA,GAAW,cAAoB,IAR1BsB,GAAU,SAWTC,EAA2BC,GACjCxB,GAAYuB,GAAWE,KAAKD,IAZvBF,GAAU,SAePC,EAA2BC,GAEnCxB,GAAYuB,GAAavB,GAAYuB,GAAW9F,QAAO,SAACC,GAAD,OAAeA,IAAS8F,MAjB1EF,GAAU,SAoBdpI,GAAe,IAAD,EACb,QAAF,EAAA6G,UAAA,SAAI2B,KAAKxI,I,UE7DXsF,GAAY,CACdvC,SAAU,GACV/D,OAAQ,WAwBCyJ,GACS,SAAC1F,GAAD,MACb,CAAC3B,KAAM,wBAAyBC,QAAS,CAAC0B,cAFtC0F,GAIM,SAACzJ,GAAD,MACX,CAACoC,KAAM,qBAAsBC,QAASrC,IAG1C0J,GAA4D,KAC1DC,GAA0B,SAACnH,GAO7B,OANyB,OAAtBkH,KACCA,GAAoB,SAAC1J,GACjBwC,EAASiH,GAA0BzJ,MAIpC0J,IAIPE,GAAsE,KACpEC,GAA2B,SAACrH,GAO9B,OAN0B,OAAvBoH,KACCA,GAAqB,SAAC7F,GAClBvB,EAASiH,GAA6B1F,MAIvC6F,IC/CPE,GAAWC,YAAgB,CAC3BC,YAAajH,EACbkH,YAAatF,EACbuF,aAAcpE,GACdqE,aAAclD,GACdmD,KAAMC,KACNC,IAAKjD,GACLkD,KDRuB,WAA4D,IAA3DvH,EAA0D,uDAAlDsD,GAAWrD,EAAuC,uCAClF,OAAOA,EAAOb,MACV,IAAK,wBACD,OAAO,eACAY,EADP,CAEIe,SAAU,sBAAIf,EAAMe,UAAV,YAAuBd,EAAOZ,QAAQ0B,SAASgC,KAAK,SAAAlB,GAAC,sBAASA,EAAT,CAAYjF,GAAI4K,sBAC1EjH,QAAO,SAACsB,EAAG4F,EAAOC,GAAX,OAAqBD,GAASC,EAAMC,OAAS,SAGjE,IAAK,qBACD,OAAO,eACA3H,EADP,CAEIhD,OAAQiD,EAAOZ,UAGvB,QAAS,OAAOW,ICNpB4H,aAAchD,KAQZiD,GAAmBC,OAAOC,sCAAwCC,IAazDC,GAXDC,YAAYpB,GAAUe,GAAiBM,YAAgBC,Q,sICzBxDC,GAA6B,SAAC,GAAkC,IAAjCC,EAAgC,EAAhCA,MAAOC,EAAyB,EAAzBA,KAASC,EAAgB,iCACpEC,EAAWF,EAAK/L,OAAS+L,EAAKG,QAElC,OAAQ,uBAAKC,UAAWC,KAAOC,eAAvB,UACJ,+BACI,sCAAWL,EAAWF,MAEzBG,GAAY,gCAAOF,EAAK/L,YCbpBsM,GAAW,SAACC,GACrB,IAAIA,EACJ,MAAO,qB,SCCEC,GAA0BC,KAAOC,IAAV,oRAClB,SAAAV,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,aACzD,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,cAGhD,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,cAIpD,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,cAQpD,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,cAIxDC,GAAcJ,aAAOD,GAAPC,CAAH,+DACI,SAAAT,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAmB,UAAY,eAGpEE,GAAkBL,aAAOD,GAAPC,CAAH,qMAEH,SAAAT,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,oBAAsB,yBAI5D,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,oBAAsB,yBAInE,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,aAI7DG,GAAcN,KAAOC,IAAV,4IACL,SAAAV,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,aAC1C,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAmB,UAAY,eAG9D,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,cAI3DI,GAAoBP,aAAOD,GAAPC,CAAH,4FAChB,SAAAT,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,oBAAsB,0BAM/DK,GAAuBR,aAAOD,GAAPC,CAAH,6TACnB,SAAAT,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,oBAAsB,0BAItD,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,eAc7DM,GAAsBT,aAAOO,GAAPP,CAAH,uNAEV,SAAAT,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,eAQpD,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,eAI7DO,GAAiBV,aAAOO,GAAPP,CAAH,sUAET,SAAAT,GAAK,MAAyB,SAArBA,EAAMW,MAAMC,KAAkB,OAAS,aAgBrDQ,GAAkBX,aAAOO,GAAPP,CAAH,8QAEL,SAAAT,GAAK,MAAyB,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,UACxD,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,OAAS,UAMhC,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,eACvD,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,eAIvES,GAAkBZ,aAAOD,GAAPC,CAAH,oJACA,SAAAT,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,eAG1D,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,eAM7DU,GAAgBb,aAAOD,GAAPC,CAAH,gIAEJ,SAAAT,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,eACzD,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,OAAS,UCrIrDW,GAAmB,SAAC/J,GAAD,OAA0BA,EAAMmH,aAAa5D,OAChEyG,GAAuB,SAAChK,GAAD,OAA0BA,EAAMmH,aAAa3D,WACpEyG,GAAuB,SAACjK,GAAD,OAA0BA,EAAMmH,aAAarI,SACpEoL,GAAqB,SAAClK,GAAD,OAA0BA,EAAMmH,aAAa1D,YAClE0G,GAAkB,SAACnK,GAAD,OAA0BA,EAAMmH,aAAavK,I,UCQtEwN,GAAanB,KAAOC,IAAV,qLAgEZmB,GAAiBC,aAAkD,CAAClD,KAAM,SAAzDkD,EA/C+E,SAAC,GAKO,IAJHC,EAIE,EAJFA,aACAC,EAGE,EAHFA,WACAhO,EAEE,EAFFA,MACA6G,EACE,EADFA,QAErG,OAAQ,wBAAMsF,UAAWC,KAAO6B,KAAMC,SAAUH,EAAxC,UACJ,+BACI,iCACI,gCAAI,eAACI,GAAA,EAAD,IAAJ,WACA,sDAIR,uBAAKhC,UAAWC,KAAOgC,MAAvB,UACI,uDAAwB,yCACxB,eAACC,GAAA,EAAD,CAAOzL,KAAM,OAAQ0L,YAAa,cAAeC,UAAW1C,GAAY2C,SAAUlC,GAAUmC,KAAM,aAGtG,uBAAKtC,UAAWC,KAAOgC,MAAvB,UACI,yDAA0B,yCAC1B,eAACC,GAAA,EAAD,CAAOzL,KAAM,WAAY0L,YAAa,iBAAkBC,UAAW1C,GAAY2C,SAAUlC,GAClFmC,KAAM,gBAGjB,uBAAKtC,UAAWC,KAAOsC,WAAvB,UACI,eAACL,GAAA,EAAD,CAAOzL,KAAM,WAAY2L,UAAW,QAASE,KAAM,eADvD,kBAKC5H,GAAW,uBAAKsF,UAAWC,KAAOuC,QAAvB,UACR,sBAAKC,IAAK/H,EAASgI,IAAI,YACvB,eAACR,GAAA,EAAD,CAAOzL,KAAM,OACN0L,YAAa,gBACbC,UAAW1C,GACX4C,KAAM,eAGhBzO,GAAS,sBAAKmM,UAAWC,KAAO0C,MAAvB,SAA+B9O,IAEzC,+BACI,yBAAQ4C,KAAK,SAASmM,SAAUf,EAAhC,8BAqCGgB,GA5BM,WACjBC,qBAAU,WACNC,SAASC,MAAQ,UAClB,IAEH,IAAMnI,EAAYoI,aAAY5B,IACxB3G,EAAUuI,aAAY1B,IAEtB1K,EAAWqM,eAOjB,OAAIrI,EACO,eAAC,KAAD,CAAUsI,GAAG,aAGhB,uBAAKnD,UAAWC,KAAO4C,MAAvB,UACI,eAACpB,GAAD,CAAYzB,UAAWC,KAAOmD,QAE9B,eAAClC,GAAD,CAAiBlB,UAAWC,KAAOoD,UAAnC,SACI,eAAC3B,GAAD,CAAgBK,SAZjB,SAACuB,GACZzM,EXbW,SAAC0D,EAAeC,GAAkF,IAAhEC,EAA+D,wDAAlCC,EAAkC,uDAAT,KACvG,OAAO,SAAC7D,GACJyD,GAAcC,EAAOC,EAAUC,EAAYC,GAAShG,MAAK,SAACC,GACtD,GAAIA,EAASR,KAAK8F,aAAevE,EAAawF,QAC1CrE,EAASoE,WAEN,GAAItG,EAASR,KAAK8F,aAAetE,EAAqB4N,kBAAmB,CAC5E1M,EAASsE,MAET,IAAI7D,EAASkM,aAAW,QAAS,CAACC,OAAQ9O,EAASR,KAAKiE,SAASsL,KAAK,OACtE7M,EAASS,OAEN,CACH,IAAIA,EAASkM,aAAW,QAAS,CAACC,OAAQ9O,EAASR,KAAKiE,SAASsL,KAAK,OACtE7M,EAASS,QWDRsD,CAAM0I,EAAU/I,MAAO+I,EAAU9I,SAAU8I,EAAU7I,WAAY6I,EAAU5I,WAWpCA,QAASA,UPvGjE,SAASiJ,KAA2Q,OAA9PA,GAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAI/M,EAAI,EAAGA,EAAIgN,UAAU/E,OAAQjI,IAAK,CAAE,IAAIiN,EAASD,UAAUhN,GAAI,IAAK,IAAIkN,KAAOD,EAAcJ,OAAOM,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQH,EAAOG,GAAOD,EAAOC,IAAY,OAAOH,IAA2BO,MAAMC,KAAMP,WAEhT,SAASQ,GAAyBP,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKlN,EAAnE+M,EAEzF,SAAuCE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKlN,EAA5D+M,EAAS,GAAQW,EAAab,OAAOc,KAAKV,GAAqB,IAAKjN,EAAI,EAAGA,EAAI0N,EAAWzF,OAAQjI,IAAOkN,EAAMQ,EAAW1N,GAAQyN,EAASG,QAAQV,IAAQ,IAAaH,EAAOG,GAAOD,EAAOC,IAAQ,OAAOH,EAFxMc,CAA8BZ,EAAQQ,GAAuB,GAAIZ,OAAOiB,sBAAuB,CAAE,IAAIC,EAAmBlB,OAAOiB,sBAAsBb,GAAS,IAAKjN,EAAI,EAAGA,EAAI+N,EAAiB9F,OAAQjI,IAAOkN,EAAMa,EAAiB/N,GAAQyN,EAASG,QAAQV,IAAQ,GAAkBL,OAAOM,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBH,EAAOG,GAAOD,EAAOC,IAAU,OAAOH,EAMne,SAASkB,GAAaC,EAAMC,GAC1B,IAAIlC,EAAQiC,EAAKjC,MACbmC,EAAUF,EAAKE,QACftF,EAAQ0E,GAAyBU,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAOtB,GAAS,CACtD1P,GAAI,UACJmR,MAAO,6BACPC,EAAG,MACHC,EAAG,MACHC,OAAQ,UACRC,KAAM,UACNC,OAAQ,GACRC,MAAO,GACPC,QAAS,cACTC,IAAKV,EACL,kBAAmBC,GAClBtF,GAAQmD,EAAqB,gBAAoB,QAAS,CAC3D/O,GAAIkR,GACHnC,GAAS,KAAM5F,KAAUA,GAAqB,gBAAoB,OAAQ,CAC3EoI,KAAM,UACNE,MAAO,EACPD,OAAQ,IACRI,UAAW,iCACG,gBAAoB,UAAW,CAC7CC,cAAe,SACfC,cAAe,MACfC,IAAK,KACLC,OAAQ,cACRC,YAAa,iBACT7I,KAAWA,GAAsB,gBAAoB,OAAQ,CACjEgI,EAAG,GACHG,KAAM,UACNE,MAAO,EACPD,OAAQ,IACRI,UAAW,kCACG,gBAAoB,UAAW,CAC7CC,cAAe,SACfC,cAAe,MACfC,IAAK,KACLC,OAAQ,cACRC,YAAa,aACbC,MAAO,WACH7I,KAAWA,GAAsB,gBAAoB,OAAQ,CACjE+H,EAAG,GACHG,KAAM,UACNE,MAAO,EACPD,OAAQ,IACRI,UAAW,kCACG,gBAAoB,UAAW,CAC7CC,cAAe,SACfC,cAAe,MACfC,IAAK,KACLC,OAAQ,cACRC,YAAa,aACbC,MAAO,WACH5I,KAAWA,GAAsB,gBAAoB,OAAQ,CACjE8H,EAAG,GACHG,KAAM,UACNE,MAAO,EACPD,OAAQ,IACRI,UAAW,kCACG,gBAAoB,UAAW,CAC7CC,cAAe,SACfC,cAAe,MACfC,IAAK,KACLC,OAAQ,cACRC,YAAa,aACbC,MAAO,WACH3I,KAAWA,GAAsB,gBAAoB,OAAQ,CACjE6H,EAAG,GACHG,KAAM,UACNE,MAAO,EACPD,OAAQ,IACRI,UAAW,kCACG,gBAAoB,UAAW,CAC7CC,cAAe,SACfC,cAAe,MACfC,IAAK,KACLC,OAAQ,cACRC,YAAa,aACbC,MAAO,YAIX,I,kBAAIC,GAA0B,aAAiBpB,IQpFhCqB,IRqFA,IQ7Fa,WACxB,OAAQ,sBAAKrG,UAAU,YAAf,SACI,+BACI,eAAC,GAAD,U,iDCJPsG,GAA8B,SAACjP,GAAD,OAA0BA,EAAM4H,aAAalD,iB,gFCFzE,OAA0B,mCCUnCwK,GAAejG,KAAOC,IAAV,8NAEJ,SAAAV,GAAK,OAAIA,EAAM2G,QAChB,SAAA3G,GAAK,OAAIA,EAAM2G,QACL,SAAA3G,GAAK,OAAIA,EAAM4G,KAAO5G,EAAM4G,KAAOC,MAI5C,SAAA7G,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,oBAAsB,0BAG/DkG,GAAgC,SAAC,GAAD,IAAEF,EAAF,EAAEA,KAAMD,EAAR,EAAQA,KAAR,OAAmB,eAACD,GAAD,CAAcE,KAAMA,EAAMD,KAAMA,KCGnFI,GAAetG,KAAOuG,OAAV,gJASZC,GAAwD,SAAC,GAAuB,IAAtBC,EAAqB,EAArBA,gBAC7D5Q,EAAU8M,aAAY3B,IACtBvF,EAAkBkH,aAAYqD,IAC9BzP,EAAWqM,eAEjB,OAAO,eAAC7C,GAAD,CAAyBL,UAAWgH,KAAUC,WAA9C,SACK,uBAAKjH,UAAWgH,KAAUE,eAA1B,UACI,iCACI,qCAAK/Q,QAAL,IAAKA,OAAL,EAAKA,EAASW,WACd,eAAC,GAAD,CAAQ2P,MAAa,OAAPtQ,QAAO,IAAPA,OAAA,EAAAA,EAASgR,OAAOC,QAASV,GAAWF,KAAM,KACxD,eAACa,GAAA,EAAD,CACIrH,UAAWgH,KAAUM,gBACrBC,QAAS,kBAAMR,GAAgB,SAIvC,uBAAK/G,UAAWgH,KAAUQ,oBAA1B,UACI,sBAAKxH,UAAWgH,KAAUS,aAAcF,QAAS,kBAAMR,GAAgB,IAAvE,SACI,gBAAC,KAAD,CAAS5D,GAAG,WAAWuE,gBAAiBC,KAAOC,WAA/C,UACI,eAACC,GAAA,EAAD,IADJ,eAMJ,sBAAK7H,UAAWgH,KAAUS,aAAcF,QAAS,kBAAMR,GAAgB,IAAvE,SACI,gBAAC,KAAD,CAAS5D,GAAG,WAAWuE,gBAAiBC,KAAOC,WAA/C,UACI,eAACE,GAAA,EAAD,IADJ,aAMJ,uBAAK9H,UAAWgH,KAAUS,aAAe,IAAMT,KAAU5O,SAAUmP,QAAS,kBAAMR,GAAgB,IAAlG,UACI,gBAAC,KAAD,CAAS5D,GAAG,WAAZ,UACI,eAAC4E,GAAA,EAAD,IADJ,cAIChM,EAAkB,sBAAKiE,UAAWgH,KAAUjL,gBAA1B,SAA4CA,IAAyB,QAG5F,sBAAKiE,UAAWgH,KAAUS,aAAcF,QAAS,kBAAMR,GAAgB,IAAvE,SACI,gBAAC,KAAD,CAAS5D,GAAG,QAAQuE,gBAAiBC,KAAOC,WAA5C,UACI,eAACI,GAAA,EAAD,IADJ,mBAMJ,sBAAKhI,UAAWgH,KAAUS,aAAcF,QAAS,kBAAMR,GAAgB,IAAvE,SACI,gBAAC,KAAD,CAAS5D,GAAG,WAAWuE,gBAAiBC,KAAOC,WAA/C,UACI,eAACK,GAAA,EAAD,IADJ,gBAMJ,sBAAKjI,UAAWgH,KAAUS,aAAcF,QAAS,kBAAMR,GAAgB,IAAvE,SACI,gBAACH,GAAD,CAAcW,QAAS,kBAAM1Q,EAAS4E,OAAtC,UACI,eAACyM,GAAA,EAAD,IADJ,qBAKJ,uBAAKlI,UAAWgH,KAAU3L,OAAQkM,QAAS,kBAAM1Q,EAASwE,OAA1D,UACI,eAAC8M,GAAA,EAAD,IADJ,sBAQXC,GAAyB,WAClC,IAAMvN,EAAYoI,aAAY5B,IACxBtF,EAAkBkH,aAAYqD,IAFI,EAGA+B,oBAAS,GAHT,oBAGjCC,EAHiC,KAGnBvB,EAHmB,KAKxC,OAAIlM,EAEI,gBAAC+F,GAAD,CAAaZ,UAAWgH,KAAUuB,aAAlC,UACHD,GAAgB,eAAC,GAAD,CAAgBvB,gBAAiBA,IAElD,sBAAK/G,UAAWgH,KAAUS,aAA1B,SACI,eAAC,KAAD,CAAStE,GAAG,WAAWuE,gBAAiBC,KAAOC,WAA/C,SACI,eAACE,GAAA,EAAD,QAGR,uBAAK9H,UAAWgH,KAAUS,aAAe,IAAMT,KAAU5O,SAAzD,UACI,eAAC,KAAD,CAAS+K,GAAG,WAAZ,SACI,eAAC4E,GAAA,EAAD,MAEHhM,EAAkB,sBAAKiE,UAAWgH,KAAUjL,gBAA1B,SAA4CA,IAAyB,QAG5F,sBAAKiE,UAAWgH,KAAUS,aAA1B,SACI,eAAC,KAAD,CAAStE,GAAG,WAAWuE,gBAAiBC,KAAOC,WAA/C,SAA2D,eAACC,GAAA,EAAD,QAG/D,sBAAK7H,UAAWgH,KAAUS,aAAe,IAAMT,KAAUwB,KAAMjB,QAAS,kBAAMR,GAAgB,IAA9F,SACI,eAACM,GAAA,EAAD,SAtBc,MCvGboB,GAAqB,SAACpR,GAAD,OAA0BA,EAAMsH,IAAInD,YACzDkN,GAAyB,SAACrR,GAAD,OAA0BA,EAAMsH,IAAIpD,a,uECC7DoN,GAAqB,SAACtR,GAAD,OAAyBA,EAAMiH,YAAYnG,SAChEyQ,GAAsB,SAACvR,GAAD,OAAyBA,EAAMiH,YAAYlG,UACjEyQ,GAAuB,SAACxR,GAAD,OAAyBA,EAAMiH,YAAYhG,mBAClEwQ,GAAwB,SAACzR,GAAD,OAAyBA,EAAMiH,YAAY9F,kBACnEE,GAAkB,SAACrB,GAAD,OAAyBA,EAAMiH,YAAY5F,iBAC7DC,GAAmB,SAACtB,GAAD,OAAyBA,EAAMiH,YAAY3F,kBAC9DoQ,GAAwB,SAAC1R,GAAD,OAA0BA,EAAMiH,YAAY/F,sBAGpEyQ,GAAwBC,cAChC,SAAA5R,GAAK,OAAIA,EAAMiH,YAAYnG,WAC5B,SAAC+Q,EAAiBjV,GAAlB,OAAiCA,KACjC,SAACkE,EAASlE,GAAV,cAAiBkE,QAAjB,IAAiBA,OAAjB,EAAiBA,EAASP,QAAO,SAAAuR,GAAM,OAAIC,OAAOD,EAAOlV,MAAQA,Q,uCChB1DoV,GAAiB,SAACC,GACzB,IACIC,GADI,IAAI/R,MACKgS,oBAAsB,GACnCvQ,EAAQ,IAAIzB,KAAK8R,GAAOG,UAAuB,KAAXF,EACxC,OAAO,IAAI/R,KAAKyB,GAAMxB,WAAWC,MAAM,EAAG,K,wCCKxCgS,GAAOpJ,KAAOC,IAAV,0NAGG,SAAAV,GAAK,MAAyB,SAArBA,EAAMW,MAAMC,KAAkB,OAAS,UAUhDkJ,GAAuC,SAAC,GAAD,IAAElR,EAAF,EAAEA,QAAF,OAC/C,gBAACiR,GAAD,WACG,+BACI,eAACE,GAAA,EAAD,MAEJ,kDAEA,eAAC,KAAD,CAAQpD,KAAM,QAASe,QAAS,kBAAM9O,KAAtC,yBC3BD,SAASoR,KAAsB,IAAD,EAEGxB,mBAASlJ,OAAO2K,YAFnB,oBAE1BC,EAF0B,KAEdC,EAFc,KAcjC,OAXAlH,qBAAU,WACN,SAASmH,IACLD,EAAc7K,OAAO2K,YAMzB,OAHA3K,OAAOhC,iBAAiB,SAAU8M,GAElCA,IACO,kBAAM9K,OAAOnC,oBAAoB,SAAUiN,MACnD,IAEIF,ECMX,I,2BAAMG,GAAU,eAACC,GAAA,EAAD,CAAiBC,MAAO,CAAEC,SAAU,IAAMC,MAAI,IAExDC,GAAcjK,KAAOC,IAAV,qDACC,SAAAV,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,aAGhDC,GAAOnK,aAAOoK,KAAPpK,CAAH,+CACG,SAAAT,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAmB,OAAQ,UAGxDkC,GAAQrC,KAAOC,IAAV,mGAOLoK,GAAU,SAAC9K,GACb,IAAM+K,EACF,eAAC,KAAD,UACI,gBAAC,KAAKC,KAAN,CAAmBT,MAAO,CAACU,MAAO,OAAQvD,QAAS,kBAAM1H,EAAMkL,cAAclL,EAAM5H,YAAnF,uBACc,eAAC+S,GAAA,EAAD,MADC,OAMvB,OACI,uBACIhL,UAAWiL,KAAcC,YAAc,KAAOrL,EAAMsL,OAAStL,EAAMuL,SAAWH,KAAcI,KAAO,IADvG,UAGI,sBAAKrL,UAAWiL,KAAcK,kBAC7BzL,EAAM0L,KACP,uBAAMvL,UAAWiL,KAAc9W,KAA/B,SAAsCkV,GAAexJ,EAAM2L,WAC3D,eAAC,KAAD,CAAUC,QAASb,EAAac,QAAS,CAAC,SAA1C,SACI,eAACjB,GAAD,CAAMzK,UAAWiL,KAAcU,uBAOlCC,GAAW,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SAChBhV,EAAWqM,eAEX4I,EAAe7I,aAAY2F,IAC3BmD,EAAU9I,aAAYwF,IACtB0C,EAAOlI,aAAYzB,IACnBwK,EAAoB/I,aAAY6F,IAChCjV,EAAQoP,aAAYtK,IACpB+M,EAAQmE,KAEd/G,qBAAU,WAGN,OAFAjM,EAASiC,EAAwB+S,IAE1B,WACHhV,EAASsC,EAAc,CAACnC,MAAO,GAAIqB,WAAY,EAAGxE,MAAO,SAE9D,CAACgY,EAAUhV,IAEd,IAAMkU,EAAgB,SAAC9S,GACnBpB,EzBwFiC,SAACoB,GACtC,OAAO,SAACpB,GACJiB,EAAyBG,GAAWvD,MAAK,SAACC,GACf,MAApBA,EAASN,QAAgBwC,EAAS+B,EAA8BX,OAEpEf,OAAM,WACL1B,IAAQ3B,MAAM,6ByB9FToY,CAA0BhU,KAIjCG,EAAW0T,EAAa9U,MAAMoD,KAAI,SAAA8Q,GAAW,OAAI,eAAC,GAAD,CAASK,KAAML,EAAYnT,KAETE,UAAaiT,EAAYjX,GACzBuX,QAASN,EAAYM,QACrBJ,SAAUF,EAAYE,SACtBD,KAAMA,EACNJ,cAAeA,GALVG,EAAYjX,OAQtFiY,UAEJ,OAAGxG,GAAS,IAED,eAAC6E,GAAD,CAAavK,UAAWiL,KAAc7S,SAAUoS,MAAOuB,EAAvD,SACEC,EAAoB,eAAC,GAAD,IAAa,wCAAInY,GAASuE,EAC1CvE,GAAS,eAAC8O,GAAD,UAAO,eAAC,GAAD,CAAclK,QAAS,kBAAM5B,EAASiC,EAAwB+S,cAItF,eAAC,KAAD,CAAMM,SAAUH,EAAmBI,UAAWlC,GAA9C,SACG,gBAACK,GAAD,CAAavK,UAAWiL,KAAc7S,SAAUoS,MAAOuB,EAAvD,WACMlY,GAASuE,EACVvE,GAAS,eAAC8O,GAAD,UAAO,eAAC,GAAD,CAAclK,QAAS,kBAAM5B,EAASiC,EAAwB+S,e,iEC5GpF,OAA0B,qCCkB1BQ,G,iMAZPtJ,SAASC,MAAQ,c,+BAIjB,OAAQ,uBAAKoH,MAAO,CAACkC,UAAW,SAAUC,UAAW,QAA7C,UACI,sBAAK9J,IAAK+J,GAAU9J,IAAI,cACxB,uD,GARG+J,IAAMC,WCWvBC,GAAerM,KAAOC,IAAV,2EACA,SAAAV,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,aAIhDoC,GAAetM,KAAOC,IAAV,kOACA,SAAAV,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,aACvB,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,eAGlD,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,cAIpC,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,cAIpC,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,OAAS,WAI5CqC,GAAgBvM,KAAOC,IAAV,qNACS,SAAAV,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,eAC9C,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,aAGhC,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,aACzC,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,OAAS,UAQ5CsC,GAAexM,KAAOC,IAAV,qSAeLwM,GAAoB,eAACD,GAAD,CAAc9M,UAAWgN,KAAUC,SAAnC,SACG,iCACI,eAAClF,GAAA,EAAD,IACA,oDAK3BmF,GAAS,WAAO,IAAD,MAClBrW,EAAWqM,eACVvJ,EAAUwT,eAAVxT,OAFiB,EAGU0O,mBAAS,IAHnB,oBAGjB7S,EAHiB,KAGR4X,EAHQ,KAKlBrB,EAAU9I,aAAYwF,IACtB4E,EAAiBpK,cAAY,SAAC5L,GAAD,OAAW2R,GAAsB3R,EAAOsC,MAE3E,OAAIA,EAEA0T,EAAe,GAIX,gBAACV,GAAD,CAAc3M,UAAWgN,KAAUM,eAAgB9C,MAAOuB,EAA1D,UACI,gBAACa,GAAD,CAAc5M,UAAWgN,KAAUO,aAAc/C,MAAOuB,EAAxD,UACI,sBAAKtJ,KAAK,UAAA4K,EAAe,UAAf,eAAmBlG,OAAOC,SAA1B,UAAmCiG,EAAe,UAAlD,aAAmC,EAAmBlG,OAAOqG,QAAS7G,GAC3EjE,IAAI,SACJ1C,UAAWgN,KAAUS,eAG1B,iCACI,eAAC,KAAD,CAAStK,GAAI,YAAYxJ,EAAzB,SAAiC,8BAAK0T,EAAe,GAAGK,aACxD,uBAAK1N,UAAWgN,KAAU3Y,OAAU,QAApC,mCACiBgZ,EAAe,UADhC,aACiB,EAAmBM,qBAAqBC,MAAM,KAAKlK,KAAK,KAAKhM,MAAM,EAAG,UAI3F,sBAAKsI,UAAWgN,KAAUa,iBAA1B,SACI,eAAC,KAAD,CAAS1K,GAAG,WAAZ,SACI,eAAC2K,GAAA,EAAD,WAKZ,eAAC,GAAD,CAAUjC,SAAUlS,IAGpB,gBAACkT,GAAD,CAAe7M,UAAWgN,KAAUe,iBAAkBvD,MAAOuB,EAA7D,UACI,2BAAUzJ,KAAM,aAAcH,YAAa,cACjC/B,MAAO5K,EACPwY,WAAY,SAAAC,GACS,UAAdA,EAAMhK,KAA+B,KAAZzO,IACxByY,EAAMC,iBACNrX,EAASkC,EAAyBY,EAAQnE,IAC1C4X,EAAe,MAGvBe,SAAU,SAACvR,GAAD,OAAOwQ,EAAexQ,EAAEkH,OAAO1D,UAGnD,sBAAKJ,UAAWgN,KAAUoB,0BAA1B,SACI,yBACIpO,UAAWqO,KAAOxH,OAAS,IAAMwH,KAAOxQ,KACxC0J,QAAS,WACL6F,EAAe,IACfvW,EAASkC,EAAyBY,EAAQnE,KAE9CoN,SAA6B,KAAnBpN,EAAQ8Y,OANtB,SAMqC,eAACC,GAAA,EAAD,cAhD3B,eAAC,GAAD,IAFXxB,I,8BCzEjByB,GAAmBlO,KAAOC,IAAV,qiBACJ,SAAAV,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,aAErC,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,OAAS,UAIjC,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,cAIpC,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,cAIpC,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,cAIpC,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,cAIpC,SAAA3K,GAAK,OAAKA,EAAM2K,MAAQ,UAAY,cAKpB,SAAA3K,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,eAW/EgO,GAAmBnO,KAAOoO,GAAV,uJAEU,SAAA7O,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,eAI9D,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,aAIpEkO,GAAa,SAAC9O,GAChB,IAAI+O,EAAO,YAAc/O,EAAM5L,GAG/B,OAAQ,gBAACwa,GAAD,CAAkBzO,UAAW6O,KAAcF,WAAYpH,QAAS,kBAAM1H,EAAMiP,QAAQlR,KAAKgR,IAAzF,UACI,sBAAK5O,UAAW6O,KAAcva,OAA9B,SACI,sBAAKmO,IAAK5C,EAAMsH,OAAOC,OAAST,GAAQjE,IAAK,aAGjD,uBAAK1C,UAAW6O,KAAcE,MAA9B,UACI,8BAAKlP,EAAMyC,OAEX,uBAAKtC,UAAW6O,KAAcG,YAA9B,UACI,mDAA4BnP,EAAMoP,uBACjCpP,EAAMqP,kBAIZrP,EAAMsP,iBAAmB,GAAM,sBAAKnP,UAAW6O,KAAcM,iBAAmB,IAAMN,KAAcO,OAArE,SAC7BvP,EAAMsP,uBA+CZE,GA1CY,SAACxP,GACxB,IAAMiP,EAAUQ,eADkB,EAEEjH,mBAAS,IAFX,oBAE3BkH,EAF2B,KAEfC,EAFe,KAI9BC,EAAa,YAAO5P,EAAM1H,SAGL,KAAtBoX,EAAWjB,SACVmB,EAAgB,YAAI5P,EAAM1H,SAASP,QAAO,SAAAC,GAAI,OAAIA,EAAK6V,SAASgC,cAAcC,SAASJ,EAAWG,mBAGtG,IAAIE,EAAkBH,EAAcrV,KAAI,SAAC+O,EAAQlF,GAC7C,OAAO,eAAC,GAAD,CAAY3B,KAAM6G,EAAOuE,SACHzZ,GAAIkV,EAAOlV,GACrBgb,uBAAwB9F,EAAO8F,uBAC/BtB,qBAAsBxE,EAAOwE,qBAC7BwB,iBAAkBhG,EAAOgG,iBACzBhI,OAAQgC,EAAOhC,OACf2H,QAASA,GALJ7K,MAS5B,OACI,sBAAKjE,UAAW6O,KAAc1W,QAA9B,SACI,gBAACqW,GAAD,CAAkBxO,UAAW6O,KAAcgB,WAAYrF,MAAO3K,EAAM2K,MAApE,UACI,sBAAKxK,UAAW,mBAAhB,SACI,uBAAKA,UAAW6O,KAAciB,aAA9B,UACI,eAACC,GAAA,EAAD,IACA,wBAAOtZ,KAAK,OAAO0L,YAAa,gBAAiBgM,SAAU,SAAAF,GAAK,OAAIuB,EAAcvB,EAAMnK,OAAO1D,eAIvG,sBAAKJ,UAAW6O,KAAcmB,YAA9B,SACI,8BACKJ,EAAgB5Q,OAAS4Q,EAAkB,sDCvG9DK,GAAa3P,KAAOC,IAAV,mDA+BD2P,GA1BkB,WAC7B,IAAMrZ,EAAWqM,eACX6I,EAAU9I,aAAYwF,IACtBjQ,EAAmByK,aAAY4F,IAC/B1Q,EAAU8K,aAAY0F,IACtB9U,EAAQoP,aAAYvK,IAW1B,OARAoK,qBAAU,WAGN,OAFAjM,EAASgC,KAEF,WACHhC,EAAS+B,EAA6B,UAE3C,CAAC/B,IAEDhD,EAAc,eAAC,GAAD,CAAc4E,QAAS,kBAAM5B,EAASgC,QAExC,OAAZV,GAAoBK,EAAyB,eAAC,GAAD,IAExC,gBAACyX,GAAD,WACI,eAAC,GAAD,CAAazF,MAAOuB,EAAS5T,QAASA,IACtC,eAAC,GAAD,Q,oBCCDgY,GAhCO,WAGlB,OAFkBlN,aAAY5B,IAItB,+BACJ,eAACV,GAAD,CAAiBX,UAAW2H,KAAOyI,WAAnC,SACI,gCACI,eAAC,KAAD,CAASjN,GAAG,WAAWuE,gBAAiBC,KAAOC,WAA/C,SACI,8BAAI,eAACC,GAAA,EAAD,QAGR,eAAC,KAAD,CAAS1E,GAAG,WAAWuE,gBAAiBC,KAAOC,WAA/C,SACI,8BAAI,eAACE,GAAA,EAAD,QAGR,eAAC,KAAD,CAAS3E,GAAG,WAAWuE,gBAAiBC,KAAOC,WAA/C,SACI,8BAAI,eAACG,GAAA,EAAD,QAGR,eAAC,KAAD,CAAS5E,GAAG,QAAQuE,gBAAiBC,KAAOC,WAA5C,SACI,8BAAI,eAACI,GAAA,EAAD,QAGR,eAAC,KAAD,CAAS7E,GAAG,WAAWuE,gBAAiBC,KAAOC,WAA/C,SACI,8BAAI,eAACK,GAAA,EAAD,eAtBE,MCVboI,GAAgB/P,KAAOC,IAAV,6E,UCqEX+P,GA/CU,WACrB,IAAM1V,EAAQqI,aAAY7B,IACpBvG,EAAYoI,aAAY5B,IACxBlL,EAAU8M,aAAY3B,IACtBvF,EAAkBkH,aAAYqD,IAI9BzP,EAAWqM,eAEjB,OAAQ,yBAAQlD,UAAWgH,KAAUsJ,OAA7B,SACJ,eAAC5P,GAAD,UACI,uBAAKV,UAAWgH,KAAUuJ,WAA1B,UACI,uBAAKvQ,UAAWgH,KAAUwJ,SAA1B,UACI,eAAC,KAAD,CAASrN,GAAG,WAAYnD,UAAWgH,KAAUyJ,KAA7C,SAAmD,gCAAI,eAACzO,GAAA,EAAD,IAAJ,aACnD,sBAAKoI,MAAO,CAAC,UAAa,OAA1B,SACI,eAACxD,GAAD,CAAcW,QAAS,kBAAM1Q,EAAS4E,OAAtC,SACI,eAACyM,GAAA,EAAD,QAIR,eAAC,GAAD,OAGJ,uBAAKlI,UAAWgH,KAAU0J,UAA1B,UAEI,uBAAK1Q,UAAWgH,KAAU2J,KAAO,IAAM3J,KAAU4J,KAAO,IAAM5J,KAAU5O,SAAxE,UACI,eAACyY,GAAA,EAAD,IACC9U,EAAkB,GAAK,uBAAMiE,UAAWgH,KAAUjL,gBAA3B,SAA6CA,OAGzE,8BAAKlB,EACD,gBAACwV,GAAD,WAAgBzV,EAAM,eAAC,GAAD,CAAQ6L,KAAMtQ,EAAUA,EAAQgR,OAAOC,MAAQ,KACvCZ,KAAM,QACpC,eAAC,KAAD,CAASsK,OAAO,EAAM3N,GAAG,SAAzB,8BAEHtI,GAAa,sBAAKmF,UAAWgH,KAAU2J,KAAO,IAAM3J,KAAU3L,OAAQkM,QAAS,WAC5E1Q,EAASwE,OADC,SAGV,eAAC8M,GAAA,EAAD,iB,oBCzDX4I,GAAgBzQ,KAAOC,IAAV,kGAGT,SAAAV,GAAK,OAAIA,EAAMmR,YCPnBC,GAAqB,SAAC5Z,GAAD,OAA0BA,EAAMgH,YAAYlI,SACjE+a,GAAuB,SAAC7Z,GAAD,OAA0BA,EAAMgH,YAAYjI,YACnE+a,GAAqB,SAAC9Z,GAAD,OAA0BA,EAAMgH,YAAYxI,WACjEub,GAAoB,SAAC/Z,GAAD,OAA0BA,EAAMgH,YAAYhK,QAChEgd,GAA0B,SAACha,GAAD,OAA0BA,EAAMgH,YAAY9H,kBACtE+a,GAAwB,SAACja,GAAD,OAA0BA,EAAMgH,YAAY/H,Y,+ECS3Eib,GAAgCC,OAAaC,MAAM,CACrDC,QAASF,OACJG,IAAI,EAAG,cACPC,IAAI,GAAI,aACRzR,SAAS,YACdrJ,SAAU0a,OACLG,IAAI,EAAG,cACPC,IAAI,GAAI,aACRzR,SAAS,YACd0R,0BAA2BL,OACtBG,IAAI,EAAG,cACPC,IAAI,GAAI,eAGjBpc,IAAQ5B,OAAO,CACXke,IAAK,GACLrc,SAAU,IAIP,I,kBAAMsc,GAAc,SAACzP,GACxB,OAAQ,sBAAKtC,UAAWgS,KAAOC,SAAvB,SACI,eAAC,KAAKpH,KAAN,CAAWvI,KAAMA,EAAM4P,MAAO5P,EAAM8H,MAAO,CAAC,aAAgB,OAA5D,SACI,eAAC,KAAD,CAAO3T,KAAK,OAAO6L,KAAMA,EAAMH,YAAaG,OAFdA,IAQrC6P,GAAyC,SAAC,GAAe,IAAdhc,EAAa,EAAbA,QAC7Cub,EAAgEvb,EAAhEub,QAAS5a,EAAuDX,EAAvDW,SAAU+a,EAA6C1b,EAA7C0b,0BAA2BO,EAAkBjc,EAAlBic,eAC9CC,EAAKC,eAALD,EAGP,OAAQ,eAAC,KAAD,CACIE,cAAe,CAACb,UAAS5a,WAAU+a,4BAA2BO,kBAC9DI,oBAAkB,EAClBC,iBAAkBlB,GAClBxP,SAAU,SAACkE,EAAD,GAA+B,IAApByM,EAAmB,EAAnBA,cACjBA,GAAc,GACd1e,EAAA,eAA8BmC,EAAY8P,IACrCvR,MAAK,SAAAie,GACCA,EAAIxe,KAAK8F,aAAevE,EAAawF,QACpC1F,IAAQod,QAAQ,UAAW,GAE3Bpd,IAAQ3B,MAAM8e,EAAIxe,KAAKiE,SAASsL,KAAK,SAE9CxM,OAAM,SAAA0F,GAAC,OAAIpH,IAAQ3B,MAAM+I,MAAIzF,SAAQ,kBAAMub,GAAc,OAbpE,SAgBK,gBAAGG,EAAH,EAAGA,aAAH,wCACG,eAAC,KAAD,CAAMC,OAAQ,WAAd,SAGI,gBAACzS,GAAD,CAAyBL,UAAWgS,KAAOna,KAA3C,UACI,8BAAKwa,EAAE,sBAENzO,OAAOc,KAAK,CAACgN,UAAS5a,WAAU+a,8BAA4BzX,IAAI2X,IAEjE,uBAAK/R,UAAWgS,KAAOC,SAAvB,UACI,eAAC,KAAD,CAAU3P,KAAM,iBAAhB,+BACA,eAAC,KAAD,CAAcA,KAAM,iBAAkBF,UAAU,WAGpD,uBAAKpC,UAAWgS,KAAOe,QAAvB,UACI,eAAC,KAAD,CAAavM,KAAM,QAAnB,SAA6B6L,EAAE,oBAC/B,eAAC,KAAD,CAAc7L,KAAM,QAAS5D,SAAUiQ,EAAvC,SAAsDR,EAAE,+B,8BChE3EW,GAAyC,SAAC,GAAe,IAAd7c,EAAa,EAAbA,QAC7C8c,EAAY9c,EAAZ8c,SAEAZ,EAAKC,eAALD,EAEDa,EAA0B,GAChC,IAAK,IAAIjP,KAAOgP,EACZC,EAAiBjP,GAAOuN,OAAapW,IAAI,eAAe+X,WAI5D,IAAM5B,EAAgCC,OAAaC,MAAMyB,GAEzD,OAAQ,eAAC,KAAD,CACAX,cAAeU,EACfT,oBAAkB,EAClBC,iBAAkBlB,EAClBxP,SAAU,SAACkE,EAAD,GAA8B,IAApByM,EAAmB,EAAnBA,cAChBA,GAAc,GACd1e,EAAA,eAA8BmC,EAA9B,CAAuC8c,SAAS,eAAKhN,MAChDvR,MAAK,SAAAie,GACEA,EAAIxe,KAAK8F,aAAevE,EAAawF,QACrC1F,IAAQod,QAAQ,UAAW,GAE3Bpd,IAAQ3B,MAAM8e,EAAIxe,KAAKiE,SAASsL,KAAK,SAE1CxM,OAAM,SAAA0F,GAAC,OAAIpH,IAAQ3B,MAAM+I,MAAIzF,SAAQ,kBAAMub,GAAc,OAbpE,SAgBC,gBAAEG,EAAF,EAAEA,aAAF,OACG,eAAC,KAAD,CAAMC,OAAQ,WAAd,SAEI,gBAACzS,GAAD,CAAyBL,UAAWgS,KAAOna,KAA3C,UACI,8BAAKwa,EAAE,uBAENzO,OAAOc,KAAKuO,GAAU7Y,IAAI2X,IAC3B,uBAAK/R,UAAWgS,KAAOe,QAAvB,UACI,eAAC,KAAD,CAAavM,KAAM,QAAnB,SAA6B6L,EAAE,oBAC/B,eAAC,KAAD,CAAczP,SAAUiQ,EAAcrM,KAAM,QAA5C,SAAsD6L,EAAE,+BCrC7Ee,GAAWC,KAAXD,QAqDQE,GAlDW,WACtB,IAAMnd,EAAU8M,aAAYgO,IACtBhd,EAAKgP,aAAYzB,IACjB3N,EAAQoP,aAAYoO,IACpBkC,EAAe1J,KAEfhT,EAAWqM,eAWjB,OARAJ,qBAAU,WACNC,SAASC,MAAQ,UACN,OAAP/O,GACA4C,EAASD,EAAuB3C,MAGrC,CAAC4C,EAAU5C,IAEXJ,GAAgB,OAAPI,EACD,eAAC,GAAD,CAAcwE,QAAS,kBAAO5B,EAASD,EAAuB3C,QAGzEuf,QAAQC,IAAIF,GAEI,OAAZpd,EAAyB,eAAC,GAAD,IAErB,eAAC4a,GAAD,CAAeC,SAAU,IAAzB,SACJ,eAAC7P,GAAD,UACI,gBAAC,KAAD,CAAMuS,iBAAiB,UAAUC,YAAaJ,EAAe,IAAM,OAAS,MAAOvT,UAAW4T,KAAIC,KAAlG,UACI,eAACT,GAAD,CAASU,IACL,sBAAK9T,UAAW4T,KAAIE,IAApB,SACI,eAACC,GAAA,EAAD,MAFR,SAOI,eAAC,GAAD,CAAmB5d,QAASA,KAFzB,WAIP,eAACid,GAAD,CAASU,IACL,sBAAK9T,UAAW4T,KAAIE,IAApB,SACI,eAACE,GAAA,EAAD,MAFR,SAMI,eAAC,GAAD,CAAmB7d,QAASA,KADzB,qB,6DCNR8d,GAnDgC,SAACpU,GAC5C,IAAMhJ,EAAWqM,eADqC,EAG9BmF,oBAAS,GAHqB,oBAG/C6L,EAH+C,KAGzCC,EAHyC,KAKhDC,EAAanR,aAAYmO,IALuB,EAM1B/I,mBAAS+L,GANiB,oBAM/C/f,EAN+C,KAMvCggB,EANuC,KAQtDvR,qBAAU,WACNuR,EAAUD,KACX,CAACA,IAsBJ,OAAO,qCAAIF,EAKP,kCACc,wBAAO/F,SAXJ,SAACvR,GAClByX,EAAUzX,EAAE0X,cAAclU,QAWLmU,WAAW,EACXvU,UAAWC,KAAOgC,MAClBuS,OAtBA,WACjB3U,EAAM4U,MACNN,GAAQ,GACK,OAAV9f,GAAgBwC,E1C6GS,SAACxC,GACrC,OAAO,SAACwC,GACJ7C,EAAwBK,GAAQK,MAAK,SAACC,GACD,IAA7BA,EAASR,KAAK8F,YACdpD,EAASL,EAAyBnC,OACvC6C,OAAM,WACL1B,IAAQ3B,MAAM,iC0CnHc6gB,CAAyBrgB,MAoBpCoC,KAAK,OACL2J,MAAO/L,EACPsgB,UAAW,MAElB,sBAAK3U,UAAWC,KAAO2U,SAAvB,0BAbd,gCACc,uBAAMC,cArBD,WACfhV,EAAM4U,KACNN,GAAQ,IAmBE,SAAwC9f,GAAU,gB,+BCLzDygB,GA1BqB,SAAAjV,GAOhC,OAAQ,sBAAKG,UAAW+U,KAAarL,KAA7B,SACJ,sBAAK1J,UAAW+U,KAAaC,eAAgBzN,QAP/B,SAAC0G,GACQ,OAApBA,EAAMnK,OAAO7P,IACY,KAApBga,EAAMnK,OAAO7P,IAAW4L,EAAMoV,gBAAe,IAKchhB,GAAI,OAAvE,SACI,uBAAK+L,UAAW+U,KAAaG,QAA7B,UACI,uBAAKlV,UAAW+U,KAAazE,OAA7B,UACI,sBAAK/I,QAAS,kBAAM1H,EAAMoV,gBAAe,IAAzC,SAAiD,eAACnH,GAAA,EAAD,MAEhDjO,EAAM4U,KAAO,+BACV,yBAAOU,QAAQ,SAAf,UACI,eAACC,GAAA,EAAD,IACA,wBAAO3e,KAAK,OAAOxC,GAAG,SAASohB,QAASxV,EAAMyV,YAAalL,MAAO,CAACmL,QAAS,kBAIxF,sBAAK9S,IAAK5C,EAAM2V,IAAK9S,IAAI,oB,8GC6L1B+S,GArLyB,SAAC,GAKO,IALNtf,EAKK,EALLA,QACGgV,EAIE,EAJFA,KACAuK,EAGE,EAHFA,mBACApf,EAEE,EAFFA,WACAqf,EACE,EADFA,cAEnC9e,EAAWqM,eACTmP,EAAMC,eAAND,EAEJuD,GAAa,EACbnB,EAAete,EAAQ0f,SAAW1K,EAG/B8H,EAAY9c,EAAZ8c,SAEP,IAAK,IAAIhP,KAAOgP,EAEU,OAAlBA,EAAShP,IAAmC,KAAlBgP,EAAShP,KACnC2R,GAAa,GAbsB,MAiBPvN,oBAAS,GAjBF,oBAiBtCyN,EAjBsC,KAiBzBb,EAjByB,KAmBvCc,EAAgB,SAACtP,GACjB,OAAIA,EAAKuP,MAAM,aAAevP,EAAKuP,MAAM,WAC9BvP,EAEA,KAAOA,GAIlB6O,EAAc,SAAC1Y,G5C+EiB,IAACtI,E4C9EX,OAAnBsI,EAAEkH,OAAOmS,OACRpf,G5C6E6BvC,E4C7EMsI,EAAEkH,OAAOmS,MAAM,G5C8EnD,WACHjiB,EAAwBM,GAAQI,MAAK,SAACC,GACN,IAAxBA,EAASsF,YACTkF,OAAO+W,SAASC,YAErBjf,OAAM,WACL1B,IAAQ3B,MAAM,uB4ChFlBuiB,EAAU,YACNjgB,EAAQgR,OAAOqG,OAASrX,EAAQgR,OAAOC,QACvC6N,GAAe,IAIvB,OAAIS,EACO,eAAC,KAAD,CAAUvS,GAAI,YAAchN,EAAQ0f,SAGvC,uBAAK7V,UAAWqW,KAAEC,YAAlB,UACA,sBAAKtW,UAAWqW,KAAEE,YAElB,gBAAC1V,GAAD,CAAmBb,UAAWqW,KAAEG,YAAhC,UACK/B,GAAO,sBAAKzU,UAAWqW,KAAEI,WAAlB,SACJ,uBAAKzW,UAAWqW,KAAEK,sBAAlB,UACI,sBAAKjU,IAAKtM,EAAQgR,OAAOqG,OAASmJ,GAC7B3W,UAAWqW,KAAE/hB,OACboO,IAAI,SAAS6E,QAAS6O,IAE3B,wBAAOjB,QAAQ,SAASnV,UAAWqW,KAAEO,aAArC,SACI,uBAAK5W,UAAWqW,KAAEQ,cAAlB,UACI,eAACzB,GAAA,EAAD,IACA,wBAAO3e,KAAK,OAAOxC,GAAG,SAASohB,QAASC,EAAalL,MAAO,CAACmL,QAAS,qBAMpFd,GAAO,sBAAKzU,UAAWqW,KAAEI,WAAlB,SAEL,sBAAKhU,IAAKtM,EAAQgR,OAAOqG,OAASmJ,GAC7B3W,UAAWqW,KAAE/hB,OAAQ8V,MAAO,CAAC0M,OAAQ,kBACrCpU,IAAI,SAAS6E,QAAS6O,MAI/B,uBAAKpW,UAAWqW,KAAEU,KAAlB,UACI,8BAAK5gB,EAAQW,WAEb,sBAAIkJ,UAAWqW,KAAEW,MAAjB,UACI,gCACI,uBAAMhX,UAAWqW,KAAEY,SAAnB,SAA6B,eAACC,GAAA,EAAD,MAC7B,eAAC,GAAD,CAAQzC,IAAKA,OAGhBte,EAAQub,SAAW,gCAChB,uBAAM1R,UAAWqW,KAAEY,SAAnB,SAA6B,eAACE,GAAA,EAAD,MAC5BhhB,EAAQub,WAGZvb,EAAQic,gBAAkB,gCACvB,uBAAMpS,UAAWqW,KAAEY,SAAnB,SAA6B,eAACG,GAAA,EAAD,MAC7B,6BAAI/E,EAAE,wBAEN,oBAAGrS,UAAWqW,KAAEgB,YAAhB,SAA8BlhB,EAAQ0b,sCAMhD4C,GAAO,uBAAKzU,UAAWqW,KAAEiB,SAAlB,UAEJhhB,EACG,yBAAQsM,SAAU+S,EAAc4B,MAAK,SAAC1f,GAAD,OAAkBA,IAAS1B,EAAQ0f,UAChE7V,UAAWwX,KAAYC,SAAW,IAAMpB,KAAEqB,gBAAkB,IAAMrB,KAAEsB,SACpEpQ,QAAS,WAEL1Q,EAASqD,GAAqB/D,EAAQ0f,QAAQ,KAJ1D,sBAMA,yBAAQjT,SAAU+S,EAAc4B,MAAK,SAAC1f,GAAD,OAAkBA,IAAS1B,EAAQ0f,UAChE7V,UAAWwX,KAAYC,SAAW,IAAMpB,KAAEqB,gBAC1CnQ,QAAS,WACL1Q,EAASkD,GAAmB5D,EAAQ0f,QAAQ,KAHxD,oBAMJ,yBAAQtO,QAAS,kBAAM1Q,GzCKF5C,EyCLoCkC,EAAQ0f,OzCM1E,SAAChf,GACJiB,EAAwB7D,GAAIS,MAAK,SAACP,GAC9B2D,IAAwBpD,MAAK,SAACP,GAC1B0C,EAAS+B,GAAsC,UAEpD1B,OAAM,WACL1B,IAAQ3B,MAAM,eAPc,IAACI,GyCLsD+L,UAAWqW,KAAEuB,KAAxF,SACI,eAAC7P,GAAA,EAAD,YAOX6N,GAAc,eAAC/U,GAAD,CAAmBb,UAAWqW,KAAEG,YAAc,IAAMH,KAAEpD,SAAtD,SACX,gCACKA,EAAS4E,UAAY,8BAClB,oBAAGC,KAAM/B,EAAc9C,EAAS4E,UAAW/T,OAAO,SAASiU,IAAI,sBAA/D,SACI,eAACC,GAAA,EAAD,QAIP/E,EAASgF,SAAW,8BACjB,oBAAGH,KAAM/B,EAAc9C,EAASgF,SAAUnU,OAAO,SAASiU,IAAI,sBAA9D,SACI,eAACG,GAAA,EAAD,QAIPjF,EAASkF,IAAM,8BAAI,oBAAGL,KAAM/B,EAAc9C,EAASkF,IAAKrU,OAAO,SAASiU,IAAI,sBAAzD,SACR,eAACK,GAAA,EAAD,QAIXnF,EAASoF,SAAW,8BACjB,oBAAGP,KAAM/B,EAAc9C,EAASoF,SAAUvU,OAAO,SAASiU,IAAI,sBAA9D,SACI,eAACO,GAAA,EAAD,QAIPrF,EAASsF,WAAa,8BACnB,oBAAGT,KAAM/B,EAAc9C,EAASsF,WAAYzU,OAAO,SAASiU,IAAI,sBAAhE,SACI,eAACS,GAAA,EAAD,QAIPvF,EAASwF,SAAW,8BACjB,oBAAGX,KAAM/B,EAAc9C,EAASwF,SAAU3U,OAAO,SAASiU,IAAI,sBAA9D,SACI,eAACW,GAAA,EAAD,QAIPzF,EAAS0F,QAAU,8BAChB,oBAAGb,KAAM/B,EAAc9C,EAAS0F,QAAS7U,OAAO,SAASiU,IAAI,sBAA7D,SACI,eAACa,GAAA,EAAD,QAIP3F,EAAS4F,UAAY,8BAClB,oBAAGf,KAAM/B,EAAc9C,EAAS4F,UAAW/U,OAAO,SAASiU,IAAI,sBAA/D,SACI,eAACe,GAAA,EAAD,aAMfhD,GACD,eAAC,GAAD,CAASN,IAAKrf,EAAQgR,OAAOqG,MAAiByH,eAAgBA,EAAgBR,IAAKA,EAAKa,YAAaA,Q,yCCzKlGyD,GA/BiC,SAAClZ,GAE7C,OACI,gBAACoB,GAAD,CAAiBjB,UAAW1K,KAAKuC,KAAjC,UACI,uBAAKmI,UAAW1K,KAAK0jB,UAArB,UACI,sBAAKvW,IAAK5C,EAAMsH,OAAOC,OAASvH,EAAMsH,OAAOqG,OAAS7G,GAAQjE,IAAI,WAElE,iCACI,8BAAK7C,EAAMyC,OACX,sBAAKtC,UAAW1K,KAAKgU,KAArB,SAA4BzJ,EAAM3J,cAGtC,sBAAK8J,UAAW1K,KAAK2jB,YAArB,SACI,oBAAGjZ,UAAU,2BAIrB,sBAAKA,UAAW1K,KAAKQ,QAAU,WAA/B,SACK+J,EAAM/J,UAGX,uBAAKkK,UAAW1K,KAAK4jB,SAArB,UACI,uBAAKlZ,UAAW1K,KAAKS,MAArB,UAA4B,eAACojB,GAAA,EAAD,IAA5B,IAA8CtZ,EAAM9J,SACpD,uBAAKiK,UAAU,SAAf,UAAwB,eAACoZ,GAAA,EAAD,IAAxB,IAA6CvZ,EAAM7J,OACnD,uBAAKgK,UAAU,WAAf,UAA0B,eAAC+H,GAAA,EAAD,IAA1B,IAA+ClI,EAAM5J,e,UCyCtDojB,GA3DqB,SAAC,GAAe,IAAdljB,EAAa,EAAbA,QAAa,EAEpBkS,mBAAS,IAFW,oBAExCjI,EAFwC,KAEjCkZ,EAFiC,OAGVjR,oBAAS,GAHC,oBAGxCkR,EAHwC,KAG5BC,EAH4B,OAIjBnR,mBAAS,GAJQ,oBAIxCoR,EAJwC,KAI/BC,EAJ+B,KAMzC7iB,EAAWqM,eACXrN,EAAYoN,aAAYkO,IACtBkB,EAAMC,eAAND,EAsBJsH,EAAgB9jB,EAAUuE,KAAI,SAACwf,EAAc9a,GAAf,OAC7B,eAAC,GAAD,eAAiC8a,EAAjC,CAA+CtX,KAAMnM,EAAQW,SAAUqQ,OAAQhR,EAAQgR,SAA5ErI,EAAMrH,eACjByU,UACL,OACI,sBAAKlM,UAAWqO,KAAOwL,QAAvB,SACI,uBAAK7Z,UAAU,WAAf,UACI,gBAACiB,GAAD,CAAiBjB,UAAWqO,KAAOyL,QAAnC,UACI,eAAC,KAAD,CAAkB1Z,MAAOA,EAAO+N,SAlB9B,SAACvR,GACf0c,EAAU1c,EAAEkH,OAAO1D,OACnBsZ,EAAW9c,EAAEkH,OAAO1D,MAAMpB,QAEH,KAAnBpC,EAAEkH,OAAO1D,MACToZ,GAAe,GAEfA,GAAe,IAWgDrX,YAAakQ,EAAE,uBACpD0H,aAAc,MAAOlG,KAAM,SAC7C,uBAAK7T,UAAWqO,KAAO2L,cAAvB,UACI,kCAAO3H,EAAE,mBAAT,KAA+BoH,KAC/B,+BACI,yBAAQzZ,UAAWqO,KAAOxH,OAAS,IAAMwH,KAAOxQ,KAAM+E,SAAU2W,EACxDhS,QAjCf,WACC,KAAVnH,IACAkZ,EAAU,IACVE,GAAe,GACf3iB,EAASL,EAA4B4J,IACrCsZ,EAAW,KA2BK,SAEI,eAACnL,GAAA,EAAD,cAKhB,sBAAKvO,UAAU,OAAf,SACK2Z,UCjERM,GAAmB,SAAC5iB,GAAD,OAAyBA,EAAMkH,aAAalF,OAC/D6gB,GAAsB,SAAC7iB,GAAD,OAAyBA,EAAMkH,aAAavJ,UAClEmlB,GAA6B,SAAC9iB,GAAD,OAAyBA,EAAMkH,aAAajF,iBACzE8gB,GAAyB,SAAC/iB,GAAD,OAAyBA,EAAMkH,aAAaxJ,aACrEslB,GAAwB,SAAChjB,GAAD,OAAyBA,EAAMkH,aAAanI,YACpEkkB,GAAmB,SAACjjB,GAAD,OAAyBA,EAAMkH,aAAahF,sBAC/DghB,GAA2B,SAACljB,GAAD,OAAyBA,EAAMkH,aAAa/E,eAEvEghB,GAAwB,SAACnjB,GAAD,OAAyBA,EAAMkH,aAAa1K,OC4ElE4mB,GAjEC,WAEZ,IAAMrkB,EAAa6M,aAAYiO,IACzB/a,EAAU8M,aAAYgO,IACtBpd,EAAQoP,aAAYoO,IACpBlG,EAAOlI,aAAYzB,IACnBkU,EAAqBzS,aAAY8F,IACjCzS,EAAa2M,aAAYqO,IACzBqE,EAAgB1S,aAAYsX,IAE5BG,EAASvN,eACT2B,EAAUQ,eACVzY,EAAWqM,gBC7BM,WACvB,IAAMrI,EAAYoI,aAAY5B,IACxByN,EAAUQ,eAGZzU,GACAiU,EAAQlR,KAAK,UAIjBkF,qBAAU,WACFjI,GACAiU,EAAQlR,KAAK,YAElB,CAAC/C,IDkBJ8f,GAEA,IAAMC,EAAa,WACf,IhDwF8B3mB,EgDxF1B0F,EAAiC+gB,EAAO/gB,OAEvCA,IACDA,EAASwR,IAQbtU,EAASD,GAAwB+C,IACjC9C,GhD4E8B5C,GgD5EE0F,EhD6E7B,SAAC9C,GACJ7C,EAAqBC,GAAIS,MAAK,SAACC,GAC3BkC,EAASL,EAAyB7B,EAASR,UAC5C+C,OAAM,WACL1B,IAAQ3B,MAAM,iCgDvFVib,EAAQlR,KAAK,WAoBzB,OAZAkF,qBAAU,WACN,OAAO,WACHjM,EAASL,EAA0B,OACnCK,EAAS+B,GAAsC,OAEpD,IAEHkK,qBAAU,WACNC,SAASC,MAAQ,UACjB4X,MACD,CAACF,IAED7mB,EACQ,eAAC,GAAD,CAAc4E,QAASmiB,IAG9BxkB,GAA0B,OAAZD,EACN,eAAC,GAAD,IAGR,uBAAK6J,UAAWqW,KAAElgB,QAAlB,UACI,eAAC,GAAD,CAAaA,QAASA,EACTgV,KAAMA,EACNuK,mBAAoBA,EACpBpf,WAAYA,EACZqf,cAAeA,IAG3Bxf,EAAQ0f,SAAW1K,GAAQ,eAAC,GAAD,CAAShV,QAASA,QE3B3C0kB,GAjCiB,SAAAhb,GAC5B,IAAMkM,EAAU9I,aAAYwF,IAE5B,OAAQ,gBAACzH,GAAD,CAAgBhB,UAAWwX,KAAY3f,KAAvC,UACJ,sBAAKmI,UAAWwX,KAAYsD,OAA5B,SACI,eAAC,GAAD,CAAQtU,KAAM,IAAKC,KAAmC,OAA5B5G,EAAMkb,KAAK5T,OAAOC,MAAkBvH,EAAMkb,KAAK5T,OAAOC,MAAS2E,EC3BtF,ytOD2B6GrF,OAGpH,uBAAK1G,UAAWwX,KAAY1hB,QAA5B,UACI,sBAAKkK,UAAWwX,KAAYlV,KAA5B,SACI,eAAC,KAAD,CAASa,GAAI,YAActD,EAAMkb,KAAK9mB,GAAtC,SAA0C,8BAAK4L,EAAMkb,KAAKzY,WAG9D,sBAAKtC,UAAWwX,KAAYnjB,OAA5B,SAAqCwL,EAAMkb,KAAK1mB,QAAU,iBAG9D,sBAAK2L,UAAWwX,KAAYzE,QAA5B,SACKlT,EAAMkb,KAAK9jB,SACR,yBAAQ2L,SAAU/C,EAAMrG,cAAc+d,MAAK,SAAA1f,GAAI,OAAIA,IAASgI,EAAMkb,KAAK9mB,MAC/D+L,UAAW,WACXuH,QAAS,WACL1H,EAAM3F,qBAAqB2F,EAAMkb,KAAK9mB,KAHlD,SAIY4L,EAAMwS,EAAE,oBACpB,yBAAQzP,SAAU/C,EAAMrG,cAAc+d,MAAK,SAAA1f,GAAI,OAAIA,IAASgI,EAAMkb,KAAK9mB,MAC/DsT,QAAS,WACL1H,EAAM9F,mBAAmB8F,EAAMkb,KAAK9mB,KAFhD,SAGY4L,EAAMwS,EAAE,sBAvB0BxS,EAAMf,MAAMrH,a,oBEP7DujB,GAAsC,SAAC,GA0BhD,IAjBuD,IAGnDC,EAXgD3hB,EAQE,EARFA,gBACA4hB,EAOE,EAPFA,cACAlmB,EAME,EANFA,SACAD,EAKE,EALFA,YACAomB,EAIE,EAJFA,wBACAC,EAGE,EAHFA,aACA7H,EAEE,EAFFA,aACAte,EACE,EADFA,QAEhDomB,EAAYC,KAAKC,KAAKjiB,EAAkBtE,GACxCwmB,EAAuB,GASvBpmB,EAAQ8lB,EAERO,EAAOrmB,GAPP6lB,EADA1H,GAAgB,IACN,EAEA,GAKe,EACzBmI,EAAQD,EAAOR,EAAU,EAGpBlkB,EAAI,EAAGA,GAAKskB,EAAWtkB,IAC5BykB,EAAM5d,KAAK7G,GAiBf,OANA+L,qBAAU,WACNqY,EAAwB,KACzB,CAAClmB,IAEJumB,EAAQA,EAAM5jB,QAAO,SAAAC,GAAI,OAAIA,GAAQ4jB,GAAQ5jB,GAAQ6jB,KAE7C,gBAAC3a,GAAD,CAAqBf,UAAWwX,KAAYmE,aAA5C,UACJ,yBAAQ3b,UAAWwX,KAAYoE,KAAO,QAAShZ,SAAU6Y,GAAQ,EAAGlU,QAfxD,WACZ4T,IAA0B/lB,IAc1B,SACI,eAACymB,GAAA,EAAD,MAGHL,EAAMphB,KAAI,SAACic,EAAGvX,GACX,OAAO,yBAAQyI,QAAS,WACpB6T,EAAa/E,IACdrW,WAAYjL,IAAgBshB,GAAKmB,KAAYpI,QAAQ3X,WAFjD,SAGgC4e,GAAnBvX,EAAMrH,eAG9B,yBAAQuI,UAAWwX,KAAYoE,KAAO,QAASrU,QAtBlC,WACb4T,IAA0B/lB,IAqB0CwN,SAAU8Y,GAASL,EAAvF,SACI,eAACS,GAAA,EAAD,U,yCCvENpS,GAAOpJ,KAAOC,IAAV,2MAcG8L,GAAW,WACpB,OACI,gBAAC,GAAD,WACI,eAAC0P,GAAA,EAAD,IACA,wDCINnnB,GAAKC,EAAQ,KAyKJmnB,GArKO,WAElB,IAAM1iB,EAAkB2J,aAAYkX,IAC9BnlB,EAAWiO,aAAYiX,IACvBgB,EAAgBjY,aAAYqX,IAC5BjhB,EAAQ4J,aAAYgX,IACpBllB,EAAckO,aAAYmX,IAC1B5gB,EAAgByJ,aAAYsX,IAC5BnkB,EAAa6M,aAAYoX,IACzBxmB,EAAQoP,aAAYuX,IACnBnI,EAAKC,eAALD,EACDkB,EAAe1J,KAXG,EAcMxB,mBAAmB,IAdzB,oBAcjBpT,EAdiB,KAcRgnB,EAdQ,OAeU5T,mBAAS,IAfnB,oBAejB6T,EAfiB,KAeNC,EAfM,KAkBlBtlB,EAAWqM,eACX4L,EAAUQ,eAgBV8M,EAAW,SAACnoB,GACd4C,EAASqD,GAAqBjG,KAG5BooB,EAAS,SAACpoB,GACZ4C,EAASkD,GAAmB9F,KAuChC,GAZA6O,qBAAU,WACN,IAAMwZ,EAAM1nB,GAAGM,UAAUD,GACzB6Z,EAAQlR,KAAK,YAAY0e,GAErBzlB,EAASgD,GAAqB,EAD/B0Z,GAAgB,IACkB,EAEAve,EAFGC,MAKzC,CAACA,EAASD,IAGVnB,EACA,OAAO,eAAC,GAAD,CAAc4E,QArCP,WACb,IAAIQ,EAAOrE,GAAGiI,MAAMiS,EAAQoH,SAASqG,OAAQ,CAAEC,mBAAmB,IAC/DvjB,EAAKwjB,MAAMN,EAAaljB,EAAKwjB,MAChCR,EAAWhjB,GAEPpC,EAASgD,GAAqB9E,EAD/Bwe,GAAgB,IAC4B,EAEAve,EAFGiE,OAmCtD,IAAMyjB,EAAgB,WAClBT,GAAW,SAAAU,GACP,IAAI1jB,EAAI,eAAO0jB,GAEf,cADO1jB,EAAK2jB,OACL3jB,MAIT4jB,EAA6B,WAC/BZ,GAAW,SAAAU,GAAS,sBAASA,EAAT,CAAoBC,QAAQ,QAG9CE,EAAuB,WACzBb,GAAW,SAAAU,GAAS,sBAASA,EAAT,CAAoBC,QAAQ,QAIpD,OAAQ,gBAAC7L,GAAD,CAAeC,SAAU,IAAzB,UACI,eAAC,GAAD,CAAWjc,YAAaA,EACbqmB,aAhFF,SAAC/E,GAEdxf,EAASgD,GAAqBwc,EAD/B9C,GAAgB,IACkB,EAEAve,EAFGC,KA+ErBimB,cAAeA,EACflmB,SAAUA,EACVmmB,wBA1ES,SAAC9E,GAC7Bxf,EAAS6C,GAAqC2c,KA0E3B/c,gBAAiBA,EACjBia,aAAcA,EACdte,QAASA,IAGpB,gBAAC6L,GAAD,CAAsBd,UAAWwX,KAAYuF,OAA7C,UACKxJ,GAAgB,KAAO,uCAAE,eAAC,KAAD,CAAQ9c,UAA0BumB,IAAnB/nB,EAAQ2nB,OAAwB,UAAW,UAC5ErV,QAASmV,EACTlW,KAAM,QAFY,iBAI1B,eAAC,KAAD,CAAQA,KAAM,QACNe,QAASsV,EACTpmB,KAAOxB,EAAQ2nB,OAAU,UAAW,UAF5C,uBAIA,eAAC,KAAD,CAAQpW,KAAM,QACNe,QAASuV,EACTrmB,MAA0B,IAAnBxB,EAAQ2nB,OAAoB,UAAW,UAFtD,6BAKCrJ,EAAe,KAAO,gBAAC,KAAD,CAAQ/M,KAAM,QAC7BxG,UAAWwX,KAAYyF,aACvBC,aAAc,MACd/O,SAAU,SAACvR,GACN,QAANA,GAAa8f,IACP,aAAN9f,GAAkBigB,IACZ,iBAANjgB,GAAsBkgB,KANN,UAQnB,yBAAQ1c,MAAM,MAAd,sBAAyB,OACzB,yBAAQA,MAAM,WAAd,qBAA8B,YAC9B,yBAAQA,MAAM,eAAd,0BAAkC,kBAGtC,eAAC,KAAD,CAAQ+B,YAAY,oBACZgb,YAAU,EACVC,aAAW,EACXhd,MAAO8b,EACP/N,SAAU,SAAAvR,GAAC,OAAIuf,EAAavf,EAAEkH,OAAO1D,QACrCoG,KAAM,QAAS6W,SAxF1B,SAACjd,GAEN6b,EADS,KAAV7b,EACY,SAAAuc,GACP,IAAI1jB,EAAI,eAAO0jB,GAEf,cADO1jB,EAAKwjB,KACLxjB,GAGA,SAAA0jB,GAAS,sBAASA,EAAT,CAAoBF,KAAMrc,YAuFzChK,EAAa,eAAC,GAAD,IAAe,sBAAK4J,UAAWwX,KAAY8F,SAA5B,SACxBjkB,EAAMe,KAAI,SAAC2gB,EAAMjc,GAAP,OAAiB,eAAC,GAAD,CAAMic,KAAMA,EACQvhB,cAAeA,EAEf6Y,EAAGA,EACHvT,MAAOA,EACP/E,mBAAoBsiB,EACpBniB,qBAAsBkiB,GAJjBtd,QAOvC,IAAjBzF,EAAM2F,QAAgB,eAAC,GAAD,Q,oBC3L1Bue,GAAY,CACrBC,G,OACAC,I,4BCHSC,GAA0B,SAACrmB,GAAD,OAA0BA,EAAMuH,KAAKxG,UAC/DulB,GAAwB,SAACtmB,GAAD,OAA0BA,EAAMuH,KAAKvK,QCepEupB,GAAkBtd,aAAOD,GAAPC,CAAH,qCAIRud,GAAW,WACpB,OAAQ,eAAC9M,GAAD,CAAeC,SAAU,IAAzB,SACI,eAAC4M,GAAD,UACI,eAAC,GAAD,SAKdE,GAAO,WACT,IAAMjnB,EAAWqM,eAWjB,OATAJ,qBAAU,WAGN,OAFAjM,G9C8BkC,SAACA,GACvC4G,KACAA,GAAkB,kBAAmBS,GAAyBrH,IAC9D4G,GAAkB,gBAAiBO,GAAwBnH,O8C/BhD,WACHA,EAASiH,GAA6B,KACtCjH,G9CgC6B,SAACA,GACtC4G,KACAA,GAAoB,kBAAkBS,GAAyBrH,IAC/D4G,GAAoB,gBAAiBO,GAAwBnH,U8CjC1D,IAEI,iCACK,eAAC,GAAD,IACA,eAAC,GAAD,QAIVknB,GAAqBzd,KAAOC,IAAV,4RAelBqL,GAAqB,WAAO,IAAD,EACWvD,oBAAS,GADpB,oBACtB2V,EADsB,KACRC,EADQ,KAEvBC,EAAyBC,iBAAuB,MAChD/lB,EAAW6K,aAAYya,IAS7B,OAPA5a,qBAAU,WACW,IAAD,EAAbkb,IACC,UAAAE,EAAuBE,eAAvB,SAAgCC,eAAe,CAACC,SAAU,cAG/D,CAAClmB,EAAU4lB,IAEP,gBAACD,GAAD,CAAoBQ,SAAU,SAAA3hB,GACjC,IAAM4hB,EAAU5hB,EAAE0X,cACdgH,KAAKmD,IAAMD,EAAQE,aAAeF,EAAQG,UAAaH,EAAQI,cAAiB,KAE/EZ,GAAgBC,GAAgB,GAEjCD,GAAgBC,GAAgB,IANjC,UAQH7lB,EAASgC,KAAI,SAAClB,EAAGnC,GAAJ,OAAU,eAAC,GAAD,eAAwBmC,GAAVA,EAAEjF,OAC/B,sBAAK2R,IAAKsY,QAKpBW,GAAqBve,KAAOC,IAAV,gOAEK,SAAAV,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAmB,UAAY,eAc5EkK,GAAqC8B,IAAMqS,MAAK,SAAAjf,GAClD,OAAO,gBAACgf,GAAD,WACK,iCAAK,eAAC,KAAD,CAAQpc,IAAK5C,EAAMkf,MAAOvY,KAAM,KAArC,OACA,iCACI,eAAC,KAAD,CAASrD,GAAI,WAAWtD,EAAMgW,OAA9B,SAAsC,6BAAIhW,EAAM6N,aAChD,6BACK7N,EAAMrK,mBAMzBwpB,GAAuB1e,KAAOC,IAAV,qPAOT,SAAAV,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAmB,OAAS,UAC7C,SAAAZ,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAmB,UAAY,eAQrEwe,GAA2B,WAAO,IAAD,EACD5W,mBAAS,IADR,oBAC5B7S,EAD4B,KACnB4X,EADmB,KAE7BvW,EAAWqM,eACX7O,EAAS4O,aAAY0a,IAQ3B,OAAO,gBAACqB,GAAD,WACC,eAAC,KAAD,CAAO5e,MAAO5K,EACP2M,YAAa,qBACbgM,SAAU,SAAAvR,GAAC,OAAIwQ,EAAexQ,EAAEkH,OAAO1D,QACvCoG,KAAM,UAEb,+BACI,eAAC,KAAD,CAAQ/P,KAAM,UACNmM,SAAqB,YAAXvO,EACVmS,KAAM,QACNe,QAhBO,W9C9DD,IAAClS,E8C+DR,KAAZG,GAAgBqB,G9C/DIxB,E8C+DsBG,E9C/DL,SAACqB,GAC7C4G,GAAapI,M8CgET+X,EAAe,KAUP,SAIC,eAACmB,GAAA,EAAD,YCjIjB2Q,KACKvrB,IAAIwrB,MACJC,KAAK,CACF7B,UAAWA,GACX8B,IAAK,MACLC,YAAa,MAEbC,cAAe,CACXC,aAAa,KAazB,IAAMC,GAAcC,aAAH,oEAEC,SAAA7f,GAAK,MAA0B,SAArBA,EAAMW,MAAMC,KAAkB,UAAY,aAsDvDkf,GAlDH,WACR,IAAM9oB,EAAWqM,eACX4L,EAAUQ,eACV/T,EAAc0H,aAAYyF,IAC1BkX,EAAe3c,aAAYwF,IAC3B5N,EAAYoI,aAAY5B,IAQ9B,OANAyB,qBAAU,WACNjM,GnDvBG,SAACA,EAAeiD,GACnB,IAAIiS,EAAUjS,IAAW6E,IAAInD,WACjBG,aAAakkB,QAAQ,WACpBzW,OAAO2C,IAAUlV,EAAS4E,MAEvC,IAAIqkB,EAAUjpB,EAASoE,MACvBnH,QAAQisB,IAAI,CAACD,IAAUprB,MAAK,WACxBmC,EAAS4E,YmDiBb5E,GlDlCG,SAACA,GACJiB,IAA6BpD,MAAK,SAACP,GAC/B0C,EAASmF,GAAwC7H,EAAKA,UACvD+C,OAAM,WACL1B,IAAQuhB,KAAK,oCkD+BlB,CAAClgB,IAGC0E,GAIDV,GACAiU,EAAQlR,KAAK,UAKb,eAAC,KAAD,CAAe4C,MAAO,CAACC,KAAMmf,EAAe,OAAS,SAArD,SACI,uBAAK5f,UAAU,SAAf,UACI,eAACyf,GAAD,IACA,eAAC,GAAD,IACA,eAAC,GAAD,IAEA,eAAC,IAAMO,SAAP,CAAgBC,SAAU,eAAC,GAAD,IAA1B,SACI,gBAAC,KAAD,WACI,eAAC,KAAD,CAAOrR,KAAK,SAASkC,OAAK,EAACoP,OAAQ,kBAAM,eAAC,GAAD,QACvCrlB,GAAa,eAAC,KAAD,CAAO+T,KAAK,IAAIkC,OAAK,EAACoP,OAAQ,kBAAM,eAAC,GAAD,OAEnD,sBAAKlgB,UAAU,YAAf,SACKnF,GAAa,kCACV,eAAC,KAAD,CAAO+T,KAAK,oBACLsR,OAAQ,kBAAM,eAAC,GAAD,OACrB,eAAC,KAAD,CAAOtR,KAAK,WAAWsR,OAAQ,kBAAM,eAAC,GAAD,OACrC,eAAC,KAAD,CAAOtR,KAAK,QAAQsR,OAAQ,kBAAM,eAAC,GAAD,OAClC,eAAC,KAAD,CAAOtR,KAAM,CAAC,oBAAqB,KAAMkC,OAAK,EAACoP,OAAQ,kBAAM,eAAC,GAAD,OAC7D,eAAC,KAAD,CAAOtR,KAAK,WAAWsR,OAAQ,kBAAM,eAAC,GAAD,uBA3BtD,eAAC,GAAD,KCtDfC,KAASD,OAAO,eAAC,KAAD,UACI,eAAC,KAAD,CAAU5gB,MAAOA,GAAjB,SACI,eAAC,GAAD,QAEOyD,SAASqd,eAAe,U,mBChBvDntB,EAAOC,QAAU,CAAC,WAAa,0B,mBCA/BD,EAAOC,QAAU,CAAC,KAAO,sBAAsB,KAAO,sBAAsB,SAAW,0BAA0B,QAAU,yBAAyB,IAAM,uB,mBCA1JD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,WAAa,2BAA2B,KAAO,qBAAqB,SAAW,yBAAyB,UAAY,0BAA0B,MAAQ,sBAAsB,KAAO,qBAAqB,SAAW,yBAAyB,gBAAkB,gCAAgC,eAAiB,+BAA+B,OAAS,uBAAuB,OAAS,uBAAuB,QAAU,wBAAwB,KAAO,uB,mBCAzeD,EAAOC,QAAU,CAAC,QAAU,6BAA6B,aAAe,kCAAkC,YAAc,iCAAiC,OAAS,4BAA4B,YAAc,iCAAiC,WAAa,gCAAgC,iBAAmB,sCAAsC,OAAS,4BAA4B,MAAQ,2BAA2B,WAAa,kC,mBCAxaD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,MAAQ,qBAAqB,UAAY,yBAAyB,KAAO,oBAAoB,MAAQ,qBAAqB,WAAa,0BAA0B,MAAQ,qBAAqB,QAAU,yB,mBCAvPD,EAAOC,QAAU,CAAC,OAAS,wBAAwB,KAAO,sBAAsB,QAAU,yBAAyB,KAAO,sBAAsB,cAAgB,iC,mBCAhKD,EAAOC,QAAU,CAAC,eAAiB,uCAAuC,aAAe,qCAAqC,iBAAmB,yCAAyC,aAAe,qCAAqC,OAAS,+BAA+B,iBAAmB,yCAAyC,SAAW,oC","file":"static/js/main.a0cc1fa8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages\":\"Messages_messages__2NfD3\",\"messageItem\":\"Messages_messageItem__1kROg\",\"data\":\"Messages_data__1gAI-\",\"isMy\":\"Messages_isMy__2vJsT\",\"messageItemLogo\":\"Messages_messageItemLogo__px053\",\"messageActions\":\"Messages_messageActions__20aUX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"post_item__1d9Uy\",\"postHeder\":\"post_postHeder__gMBV_\",\"postSetting\":\"post_postSetting__14YJA\",\"date\":\"post_date__I4UXF\",\"content\":\"post_content__1VIv4\",\"activity\":\"post_activity__1g_kO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Wrap\":\"gallery_Wrap__D-mxu\",\"ContentWrapper\":\"gallery_ContentWrapper__3cwQY\",\"Content\":\"gallery_Content__KeD-U\",\"Header\":\"gallery_Header__1-2fy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Input\":\"status_Input__3J-UV\",\"EditMode\":\"status_EditMode__Apdum\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"InputContainer\":\"FormControls_InputContainer__3-NLO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"profile_profile__2n88h\",\"information\":\"profile_information__14-Ps\",\"avatarWrap\":\"profile_avatarWrap__mJWIf\",\"changeAvatarContainer\":\"profile_changeAvatarContainer__1aedx\",\"avatar\":\"profile_avatar__2xIzO\",\"changeAvatar\":\"profile_changeAvatar__2FPSc\",\"AvatarControl\":\"profile_AvatarControl__1kTjZ\",\"about\":\"profile_about__3iR5o\",\"contacts\":\"profile_contacts__2NaTb\",\"photowrap\":\"profile_photowrap__36b3g\",\"button\":\"profile_button__fPiVz\",\"infoItem\":\"profile_infoItem__2OOPr\",\"description\":\"profile_description__3lghB\",\"Activity\":\"profile_Activity__2uwJP\",\"Mail\":\"profile_Mail__lDS-x\",\"ActivityButtons\":\"profile_ActivityButtons__2C6ef\",\"Unfollow\":\"profile_Unfollow__2iFaA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logout\":\"adaptiveNav_logout__1ovgc\",\"adaptivemenu\":\"adaptiveNav_adaptivemenu__NMKIG\",\"fullScreen\":\"adaptiveNav_fullScreen__1EWZ8\",\"fullScreenWrap\":\"adaptiveNav_fullScreenWrap__4Lusm\",\"closeFullScreen\":\"adaptiveNav_closeFullScreen__11jW2\",\"fullScreenMenuItems\":\"adaptiveNav_fullScreenMenuItems__2uTXn\",\"menu\":\"adaptiveNav_menu__1DjUw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"optionSelect\":\"Users_optionSelect__3xtso\",\"settingPanel\":\"Users_settingPanel__2bpRV\",\"navs\":\"Users_navs__djiCl\",\"active\":\"Users_active__2-7Rz\",\"itemWrap\":\"Users_itemWrap__2a-eO\",\"item\":\"Users_item__2KFX5\",\"option\":\"Users_option__c0XWx\",\"buttons\":\"Users_buttons__3_hEN\",\"name\":\"Users_name__1ZJNU\",\"status\":\"Users_status__JVpzc\"};","import axios from 'axios';\r\n\r\nconst DEBUG = process.env.NODE_ENV === 'development';\r\n\r\n\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        'API-KEY': '412c8d28-b10e-4666-9818-7ae2e9743b00',\r\n    }\r\n})\r\n\r\ninstance.interceptors.request.use((config) => {\r\n    /** In dev, intercepts request and logs it into console for dev */\r\n    if (DEBUG) {\r\n        //console.info(\" \", config);\r\n    }\r\n    return config;\r\n}, (error) => {\r\n    if (DEBUG) {\r\n        console.error(' ', error);\r\n    }\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\n\r\n\r\n","import {ProfileType} from '../interfaces/profile-interfaces';\r\nimport {instance} from './api';\r\nimport {IBaseResponse} from '../interfaces/common-interfaces';\r\n\r\nexport let ProfileAPI = {\r\n    getProfile(id: number) {\r\n        return instance.get<ProfileType>('profile/' + id)\r\n    },\r\n\r\n    getStatus(id: number) {\r\n        return instance.get<string>('profile/status/' + id);\r\n    },\r\n\r\n    putProfileData(data: ProfileType) {\r\n        return instance.put<IBaseResponse>('profile', data)\r\n    },\r\n\r\n    updateStatus(status: string) {\r\n        return instance.put<IBaseResponse>('profile/status', {status: status});\r\n    },\r\n\r\n    uploadAvatar(avatar: File) {\r\n        let formData = new FormData();\r\n        formData.append('image', avatar)\r\n\r\n\r\n        return instance.put<IBaseResponse>('profile/photo', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        }).then(response => response.data)\r\n    }\r\n};","\r\nimport {instance} from './api';\r\nimport {IBaseResponse, IFilters, IGetItems} from '../interfaces/common-interfaces';\r\nimport {UserT} from '../interfaces/users-interfaces';\r\nconst qs = require('qs')\r\n\r\n\r\nexport let UsersAPI = {\r\n    //todo: &friend=true\r\n    getUsers(currentPage = 1, pageSize = 9, filters: IFilters) {\r\n        let request = qs.stringify({page: currentPage, count: pageSize, ...filters})\r\n\r\n        return instance.get<IGetItems<UserT>>(`users?`+request)\r\n            .then(response => response.data);\r\n    },\r\n\r\n    Search(text: string) {\r\n        return instance.get<IGetItems<UserT>>(`users?term=${text}&count=${5}`)\r\n    },\r\n\r\n\r\n    followAPI: (id: number) => {\r\n        return instance.post<IBaseResponse>('follow/' + id, {}).then(response => response.data);\r\n    },\r\n\r\n    unfollowAPI: (id: number) => {\r\n        return instance.delete<IBaseResponse>('follow/' + id).then(response => response.data)\r\n    }\r\n};","\r\nimport {PostDataType, ProfileType} from '../interfaces/profile-interfaces';\r\nimport {nullable} from '../interfaces/common-interfaces';\r\nimport {InferActionsTypes} from './stateRedux';\r\nimport { ProfileAPI } from '../api/profile-api';\r\nimport { UsersAPI } from '../api/users-api';\r\nimport {Dispatch} from 'redux';\r\nimport {message} from 'antd';\r\n\r\nmessage.config({duration: 100})\r\n\r\n\r\nlet initialProfilePage = {\r\n    PostsData: [\r\n        {id: 1, content: 'Hello Uface!', likes: 0, rep: 0, comm: 0, dataSend: 'Sun Mar 15 2020 18:44:42'},\r\n    ] as Array<PostDataType>,\r\n\r\n    profile: null as nullable<ProfileType>,\r\n    status: '' as nullable<string>,\r\n    isFetching: true as boolean,\r\n    isUploadProfile: false as boolean,\r\n    isFollowed: false as boolean,\r\n    setProfileErrors: '' as string\r\n}\r\n\r\nconst profileReducer = (state = initialProfilePage, action: ActionsType): initialProfilePageType => {\r\n    switch (action.type) {\r\n        case 'ADD_NEW_POST':\r\n            let currentData = new Date().toString().slice(0, 24);\r\n\r\n            let stateCopy = {\r\n                ...state,\r\n                PostsData: [...state.PostsData, {\r\n                    id: 1,\r\n                    content: action.text,\r\n                    likes: 0,\r\n                    rep: 0,\r\n                    comm: 0,\r\n                    dataSend: currentData\r\n                }],\r\n            };\r\n\r\n            return stateCopy;\r\n\r\n        case 'SET_PROFILE':\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            };\r\n\r\n        case 'SET_STATUS':\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            };\r\n\r\n        case 'USERS_IS_FETCHING' : {\r\n\r\n            return {\r\n                ...state,\r\n                isFetching: action.payload\r\n            }\r\n        }\r\n\r\n        case 'DELETE_POST': {\r\n            return {\r\n                ...state,\r\n                PostsData: state.PostsData.filter(item => item.id !== action.id)\r\n            }\r\n        }\r\n\r\n        case 'SET_FOLLOW': {\r\n            return {\r\n                ...state,\r\n                isFollowed: action.payload\r\n            }\r\n        }\r\n\r\n        case 'UPLOAD_PROFILE_INFO_PROCESS': {\r\n            return {\r\n                ...state,\r\n                isUploadProfile: action.payload\r\n            }\r\n        }\r\n\r\n        case 'SET_PROFILE_ERRORS': {\r\n            return {\r\n                ...state,\r\n                setProfileErrors: action.payload\r\n            }\r\n        }\r\n\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\nexport const actionsProfile = {\r\n    addNewPostAC: (text: string) => ({type: 'ADD_NEW_POST', text} as const),\r\n    deletePostAC: (id: number) => ({type: 'DELETE_POST', id} as const),\r\n    isUploadProfileAC: (payload: boolean) => ({type: 'UPLOAD_PROFILE_INFO_PROCESS', payload} as const),\r\n    setFollowAC: (payload: boolean) => ({type: 'SET_FOLLOW', payload} as const),\r\n    isFetchingAC: (condition: boolean) => ({type: 'USERS_IS_FETCHING', payload: condition} as const),\r\n    setProfile: (profile: nullable<ProfileType> ) => ({type: 'SET_PROFILE', profile: profile} as const),\r\n    setStatus: (status: string | null) => ({type: 'SET_STATUS', status} as const),\r\n    setProfileErrors: (payload: string) => ({type: 'SET_PROFILE_ERRORS', payload} as const),\r\n}\r\n\r\nexport const getProfileThunkCreator = (id: number) => {\r\n    return (dispatch: any) => {\r\n        dispatch(actionsProfile.setProfileErrors(''))\r\n        dispatch(actionsProfile.isFetchingAC(true))\r\n\r\n        ProfileAPI.getProfile(id).then((response: any) => {\r\n            UsersAPI.Search(response.data.fullName).then((i: any) => {\r\n                dispatch(actionsProfile.setFollowAC(i.data.items[0].followed))\r\n                dispatch(actionsProfile.setProfile(response.data))\r\n                dispatch(actionsProfile.isFetchingAC(false))\r\n            })\r\n        }).catch(() => {\r\n            dispatch(actionsProfile.setProfileErrors('Network error'))\r\n        }).finally(() => {\r\n            dispatch(actionsProfile.isFetchingAC(false))\r\n        });\r\n    }\r\n}\r\n\r\nexport const getStatusThunkCreator = (id: number) => {\r\n    return (dispatch: any) => {\r\n        ProfileAPI.getStatus(id).then((response: any) => {\r\n            dispatch(actionsProfile.setStatus(response.data))\r\n        }).catch(() => {\r\n            message.error('Cannot get user status')\r\n        })\r\n    }\r\n}\r\n\r\nexport const updateStatusThunkCreator = (status: string) => {\r\n    return (dispatch: any) => {\r\n        ProfileAPI.updateStatus(status).then((response: any) => {\r\n            if (response.data.resultCode === 0)\r\n                dispatch(actionsProfile.setStatus(status))\r\n        }).catch(() => {\r\n            message.error('Cannot update user status')\r\n        })\r\n    }\r\n}\r\n\r\nexport const uploadAvatarThunkCreator = (avatar: any) => {\r\n    return () => {\r\n        ProfileAPI.uploadAvatar(avatar).then((response: any) => {\r\n            if (response.resultCode === 0) {\r\n                window.location.reload()\r\n            }\r\n        }).catch(() => {\r\n            message.error('Logout error')\r\n        })\r\n    }\r\n}\r\n\r\nexport const putUserDataThunkCreator = (data: ProfileType) => {\r\n    return (dispatch: Dispatch) => {\r\n        dispatch(actionsProfile.isUploadProfileAC(true));\r\n        ProfileAPI.putProfileData(data).then((response) => {\r\n            if (response.data.resultCode === 0) {\r\n                dispatch(actionsProfile.isUploadProfileAC(false));\r\n            } else if(response.data.messages) {\r\n                dispatch(actionsProfile.setProfileErrors(response.data.messages.join('')))\r\n            }else {\r\n                message.error('Some error')\r\n               dispatch(actionsProfile.isUploadProfileAC(false));\r\n            }\r\n        }).catch(() => {\r\n            message.error('Cannot update user data')\r\n        }).finally(() => {\r\n            dispatch(actionsProfile.isUploadProfileAC(false));\r\n        })\r\n    }\r\n}\r\n\r\nexport default profileReducer;\r\n\r\ntype ActionsType = InferActionsTypes<typeof actionsProfile>\r\ntype initialProfilePageType = typeof initialProfilePage;\r\n","export type nullable<T> = T | null\r\n\r\nexport interface IKeys {\r\n    [key: string]: any\r\n}\r\n\r\nexport enum ResultsCodes {\r\n    Success = 0,\r\n    Error = 1,\r\n}\r\n\r\nexport interface IFilters {\r\n    friend?: boolean,\r\n    term?: string\r\n}\r\n\r\nexport enum ResultCodeForCaptcha {\r\n    CaptchaIsRequired = 10\r\n}\r\n\r\nexport interface IBaseResponse<R = {}> {\r\n    resultCode: ResultsCodes\r\n    messages: Array<string>,\r\n    fieldsErrors: Array<string>\r\n    data: R\r\n}\r\n\r\nexport interface IResponseWithCaptcha<R = {}>{\r\n    resultCode: ResultsCodes | ResultCodeForCaptcha\r\n    messages: Array<string>\r\n    fieldsErrors: Array<string>\r\n    data: R\r\n}\r\n\r\nexport interface IGetItems<Items> {\r\n    items: Array<Items>\r\n    totalCount: number\r\n    error: string | null\r\n}\r\n\r\n","import {instance} from './api';\r\n\r\nexport let DialogsAPI = {\r\n    getDialogs() {\r\n        return instance.get<any>('dialogs')\r\n    },\r\n\r\n    startChating(id: number) {\r\n        return instance.put<any>(`dialogs/${id}`)\r\n    },\r\n\r\n    sendMessage(id: number, body: string) {\r\n        return instance.post<any>(`dialogs/${id}/messages`, {body: body}).then(response => response.data)\r\n    },\r\n\r\n    getMessages(UserId: number) {\r\n        return instance.get<any>(`dialogs/${UserId}/messages`)\r\n    },\r\n\r\n    getMessageCount() {\r\n        return instance.get<number>('dialogs/messages/new/count');\r\n    },\r\n\r\n    deleteMessage(messageId: string) {\r\n        return instance.delete<any>(`dialogs/messages/${messageId}`)\r\n    }\r\n}\r\n","import {dialogT, messageT} from '../interfaces/messages-interfaces';\r\nimport {nullable} from '../interfaces/common-interfaces';\r\nimport {InferActionsTypes} from './stateRedux';\r\nimport { DialogsAPI } from '../api/dialogs-api';\r\nimport { message } from 'antd';\r\n\r\n\r\n\r\nconst initialMessage = {\r\n    dialogs: null as nullable<Array<dialogT>>,\r\n\r\n    messages: {\r\n        items: [] as Array<messageT>,\r\n        totalCount: 0,\r\n        error: null as nullable<string>,\r\n    },\r\n    isDialogsFetching: false,\r\n    isRedirectedToDialog: false,\r\n    isDialogFetching: false,\r\n    refresh: false,\r\n    getDialogsError: '',\r\n    getMessagesError: '',\r\n};\r\n\r\n\r\nconst messageReducer = (state = initialMessage, action: ActionTypes): initialMessageType => {\r\n    switch (action.type) {\r\n        case 'GET_DIALOGS': {\r\n            return {\r\n                ...state,\r\n                dialogs: action.dialogs\r\n            }\r\n        }\r\n\r\n        case 'GET_MESSAGES': {\r\n            return {\r\n                ...state,\r\n                messages: {\r\n                    items: [...action.data.items],\r\n                    totalCount: action.data.totalCount,\r\n                    error: action.data.error,\r\n                }\r\n            }\r\n        }\r\n\r\n        case 'IS_DIALOG_FETCHING': {\r\n            return {\r\n                ...state,\r\n                isDialogsFetching: action.payload\r\n            }\r\n        }\r\n\r\n        case 'ADD_MESSAGE': {\r\n            return {\r\n                ...state,\r\n                messages: {\r\n                    ...state.messages,\r\n                    items: [...state.messages.items, action.message]\r\n                }\r\n\r\n            }\r\n        }\r\n        case 'SET_IS_REDIRECTED_TO_DIALOG': {\r\n            return {\r\n                ...state,\r\n                isRedirectedToDialog: action.payload\r\n            }\r\n        }\r\n\r\n        case 'SET_IS_DIALOG_FETCHING': {\r\n            return {\r\n                ...state,\r\n                isDialogFetching: action.payload\r\n            }\r\n        }\r\n\r\n        case 'SET_GET_DIALOGS_ERROR': {\r\n            return {\r\n                ...state,\r\n                getDialogsError: action.error\r\n            }\r\n        }\r\n\r\n        case 'SET_GET_MESSAGES_ERROR': {\r\n            return {\r\n                ...state,\r\n                getMessagesError: action.error\r\n            }\r\n        }\r\n\r\n        case 'DELETE_MESSAGE': {\r\n            const temp = state.messages.items.filter(m => m.id !== action.messageId)\r\n            return {\r\n                ...state,\r\n                messages: {\r\n                    ...state.messages,\r\n                    items: temp\r\n                }\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}\r\n\r\nexport const actionsMessages = {\r\n    getDialogsAC: (dialogs: Array<dialogT> | null) => ({type: 'GET_DIALOGS', dialogs} as const),\r\n    getMessagesAC: (data: {items: Array<messageT>, totalCount: number, error: string}) => ({type: 'GET_MESSAGES', data} as const),\r\n    isDialogsFetchingAC: (payload: boolean) => ({type: 'IS_DIALOG_FETCHING', payload} as const),\r\n    addMessageAC: (message: messageT) => ({type: 'ADD_MESSAGE', message} as const),\r\n    setRedirectedToDialog: (payload: boolean) => ({type: 'SET_IS_REDIRECTED_TO_DIALOG', payload} as const),\r\n    setIsDialogFetching: (payload: boolean) => ({type: 'SET_IS_DIALOG_FETCHING', payload} as const),\r\n    deleteMessage: (messageId: string) => ({type: 'DELETE_MESSAGE', messageId} as const),\r\n    setGetDialogsError: (error: string) => ({type: 'SET_GET_DIALOGS_ERROR', error} as const),\r\n    setGetMessagesError: (error: string) => ({type: 'SET_GET_MESSAGES_ERROR', error} as const)\r\n}\r\n\r\nexport const getDialogsThunkCreator = () => {\r\n    return (dispatch: any) => {\r\n        dispatch(actionsMessages.isDialogsFetchingAC(true))\r\n        dispatch(actionsMessages.setGetDialogsError(''))\r\n\r\n        DialogsAPI.getDialogs().then((data: any) => {\r\n            if (data.status === 200) dispatch(actionsMessages.getDialogsAC(data.data))\r\n        }).catch(() => {\r\n            dispatch(actionsMessages.setGetDialogsError('Network error'))\r\n        }).finally(() => {\r\n            dispatch(actionsMessages.isDialogsFetchingAC(false))\r\n        });\r\n    }\r\n}\r\n\r\nexport const getMessagesThunkCreator = (id: number) => {\r\n    return (dispatch: any) => {\r\n        dispatch(actionsMessages.setGetMessagesError(''))\r\n        dispatch(actionsMessages.setIsDialogFetching(true))\r\n        DialogsAPI.getMessages(id).then((data: any) => {\r\n            if (data.status === 200) dispatch(actionsMessages.getMessagesAC(data.data))\r\n        }).catch(() => {\r\n            dispatch(actionsMessages.setGetMessagesError('Network error'))\r\n        }).finally(() => {\r\n            dispatch(actionsMessages.setIsDialogFetching(false))\r\n        });\r\n    }\r\n}\r\n\r\nexport const sendMessagesThunkCreator = (id: number, body: string) => {\r\n    return (dispatch: any) => {\r\n        DialogsAPI.sendMessage(id, body).then((data: any) => {\r\n            dispatch(actionsMessages.addMessageAC(data.data.message))\r\n        }).catch(() => {\r\n            message.error('Cannot send message')\r\n        })\r\n    }\r\n}\r\n\r\nexport const startChatingThunkCreator = (id: number) => {\r\n    return (dispatch: any) => {\r\n        DialogsAPI.startChating(id).then((data: any) => {\r\n            DialogsAPI.getDialogs().then((data: any) => {\r\n                dispatch(actionsMessages.setRedirectedToDialog(true));\r\n            })\r\n        }).catch(() => {\r\n            message.error('Error')\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const deleteMessageThunkCreator = (messageId: string) => {\r\n    return (dispatch: any) => {\r\n        DialogsAPI.deleteMessage(messageId).then((response: any) => {\r\n            if(response.status === 200) dispatch(actionsMessages.deleteMessage(messageId))\r\n\r\n        }).catch(() => {\r\n            message.error('Cannot delete message')\r\n        })\r\n    }\r\n}\r\n\r\nexport default messageReducer;\r\n\r\nexport type initialMessageType = typeof initialMessage;\r\ntype ActionTypes = InferActionsTypes<typeof actionsMessages>\r\nexport const {getMessagesAC} = actionsMessages","import {AppStateType, InferActionsTypes} from './stateRedux';\r\nimport {Dispatch} from 'redux';\r\nimport {UserT} from '../interfaces/users-interfaces';\r\nimport { UsersAPI } from '../api/users-api';\r\nimport {IFilters} from '../interfaces/common-interfaces';\r\nimport {message} from 'antd';\r\nimport {actionsProfile} from './profileReducer';\r\n\r\n\r\nlet initialUsers = {\r\n    users: [] as Array<UserT>,\r\n    pageSize: 9,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    currentPagePagitator: 0,\r\n    isFetching: true,\r\n    followProcess: [] as Array<number>,\r\n    foundedUsers: [] as Array<UserT>,\r\n    error: '' as string,\r\n};\r\n\r\nconst usersReducer = (state = initialUsers, action: ActionTypes): InitialUsersT => {\r\n    switch (action.type) {\r\n        case 'FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => {\r\n                    if (u.id === action.userID) {\r\n                        let uc = {...u, followed: true};\r\n\r\n                        return uc;\r\n                    }\r\n                    return u;\r\n                })\r\n            }\r\n\r\n        case 'UNFOLLOW':\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => {\r\n                    if (u.id === action.userID) {\r\n                        return {...u, followed: false}\r\n                    }\r\n                    return u;\r\n                })\r\n            }\r\n\r\n        case 'SET_USERS':\r\n            return {\r\n                ...state,\r\n                users: action.users,\r\n            }\r\n\r\n        case 'SET_CURRENT_PAGE':\r\n            return {\r\n                ...state,\r\n                currentPage: action.page\r\n            }\r\n\r\n        case 'SET_TOTAL_USERS_COUNT':\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.count\r\n\r\n            }\r\n\r\n        case 'TOGGLE_IS_FETCHING':\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n\r\n        case 'TOGGLE_FOLLOW_IN_PROCESS':\r\n            return {\r\n                ...state,\r\n                followProcess: action.isFetchingFollow ?\r\n                    [...state.followProcess, action.userID] : state.followProcess.filter(id => id !== action.userID)\r\n            }\r\n\r\n        case 'SET_CURRENT_PAGE_PAGITATOR':\r\n            return {\r\n                ...state,\r\n                currentPagePagitator: action.payload\r\n            }\r\n        case 'SET_FOUNDED_USERS': {\r\n            return {\r\n                ...state,\r\n                foundedUsers: action.items\r\n            }\r\n        }\r\n\r\n        case 'SET_ERROR': {\r\n            return {\r\n                ...state,\r\n                error: action.error\r\n            }\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const UsersActions = {\r\n    follow: (userID: number) => ({type: 'FOLLOW', userID} as const),\r\n    unfollow: (userID: number) => ({type: 'UNFOLLOW', userID} as const),\r\n    setUsers: (users: Array<UserT>) => ({type: 'SET_USERS', users} as const),\r\n    setCurrentPage: (page: number) => ({type: 'SET_CURRENT_PAGE', page} as const),\r\n    setTotalCount: (count: number) => ({type: 'SET_TOTAL_USERS_COUNT', count} as const),\r\n    ToggleFetching: (isFetching: boolean) => ({type: 'TOGGLE_IS_FETCHING', isFetching} as const),\r\n    toggleFollowProcessing: (userID: number, isFetchingFollow: boolean) => ({\r\n        type: 'TOGGLE_FOLLOW_IN_PROCESS',\r\n        userID,\r\n        isFetchingFollow\r\n    } as const),\r\n    setCurrentPagePagitator: (payload: number) => ({type: 'SET_CURRENT_PAGE_PAGITATOR', payload} as const),\r\n    setFoundedUsers: (items: Array<UserT>) => ({type: 'SET_FOUNDED_USERS', items} as const),\r\n    setError: (error: string) => ({type: 'SET_ERROR', error} as const)\r\n}\r\n\r\n\r\n//   \r\ntype getStateType = () => AppStateType\r\ntype currentDispatchType = Dispatch<ActionTypes>\r\n\r\nexport const setUsersThunkCreator = (currentPage: number, pageSize: number, filters: IFilters) => {\r\n    return (dispatch: currentDispatchType, getState: getStateType) => {\r\n        dispatch(UsersActions.setError(''))\r\n        dispatch(UsersActions.setCurrentPage(currentPage));\r\n        dispatch(UsersActions.ToggleFetching(true));\r\n        UsersAPI.getUsers(currentPage, pageSize, filters).then((data: any) => {\r\n            dispatch(UsersActions.setUsers(data.items));\r\n            dispatch(UsersActions.setTotalCount(data.totalCount));\r\n        }).catch(() => {\r\n            dispatch(UsersActions.setError('Network error'))\r\n        }).finally(() => {\r\n            dispatch(UsersActions.ToggleFetching(false));\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport const followThunkCreator = (userID: number, fromProfile = false) => {\r\n    return (dispatch: any) => {\r\n        dispatch(UsersActions.toggleFollowProcessing(userID, true));\r\n\r\n        UsersAPI.followAPI(userID).then((data: any) => {\r\n            if (data.resultCode === 0) {\r\n                dispatch(UsersActions.follow(userID))\r\n                if(fromProfile) dispatch(actionsProfile.setFollowAC(true))\r\n            }\r\n\r\n        }).catch(() => {\r\n            message.error('Cannot follow')\r\n        }).finally(() => {\r\n            dispatch(UsersActions.toggleFollowProcessing(userID, false))\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const unfollowThunkCreator = (userID: number, fromProfile = false) => {\r\n    return (dispatch: any, getState: getStateType) => {\r\n        dispatch(UsersActions.toggleFollowProcessing(userID, true));\r\n        UsersAPI.unfollowAPI(userID).then((data: any) => {\r\n            if (data.resultCode === 0) {\r\n                dispatch(UsersActions.unfollow(userID))\r\n                if(fromProfile) dispatch(actionsProfile.setFollowAC(false))\r\n            }\r\n\r\n        }).catch(() => {\r\n            message.error('Cannot unfollow')\r\n        }).finally(() => {\r\n            dispatch(UsersActions.toggleFollowProcessing(userID, false))\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport default usersReducer;\r\n\r\nexport type InitialUsersT = typeof initialUsers;\r\ntype ActionTypes = InferActionsTypes<typeof UsersActions>;\r\n","import { instance } from './api';\r\nimport {IBaseResponse, IResponseWithCaptcha} from '../interfaces/common-interfaces';\r\nimport {ICaptcha, ILogin, LoginResponseDataType} from '../interfaces/login-interfaces';\r\n\r\nexport let AuthAPI = {\r\n    getLogin() {\r\n        return instance.get<IBaseResponse<ILogin>>('auth/me').then(response => response.data);\r\n    },\r\n\r\n    login(email: string, password: string, rememberMe = false, captcha: null | string = null) {\r\n        return instance.post<IResponseWithCaptcha<LoginResponseDataType>>('auth/login', {email, password, rememberMe, captcha});\r\n    },\r\n\r\n    logout() {\r\n        return instance.delete<IBaseResponse>('auth/login').then(response => response.data);\r\n    },\r\n\r\n    getSecureCaptcha () {\r\n        return instance.get<ICaptcha>('security/get-captcha-url').then(response => response.data);\r\n    }\r\n\r\n};","import {stopSubmit} from 'redux-form';\r\nimport {nullable, ResultCodeForCaptcha, ResultsCodes} from '../interfaces/common-interfaces';\r\nimport {InferActionsTypes} from './stateRedux';\r\nimport {ProfileType} from '../interfaces/profile-interfaces';\r\nimport {AuthAPI} from '../api/auth-api';\r\nimport {ProfileAPI} from '../api/profile-api';\r\n\r\n\r\nlet initState = {\r\n    id: null as nullable<number>,\r\n    email: null as nullable<string>,\r\n    login: null as nullable<string>,\r\n    isLogined: false,\r\n    captchaURL: '',\r\n    profile: null as nullable<ProfileType>\r\n}\r\n\r\nconst loginReducer = (state = initState, action: ActionsType): InitLoginStateType => {\r\n\r\n    switch (action.type) {\r\n        case 'SET_USER_LOGIN':\r\n            return {\r\n                ...state,\r\n                ...action.data,\r\n                id: action.data.id,\r\n            }\r\n\r\n        case 'SET_CAPTCHA_URL':\r\n            return {\r\n                ...state,\r\n                captchaURL: action.URL\r\n            }\r\n\r\n        case 'SET_OWN_PROFILE':\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n\r\n\r\n        default:\r\n            return state\r\n\r\n    }\r\n}\r\n\r\nconst actionsLogin = {\r\n    setUserLoginAC: (id: nullable<number>, login: nullable<string>, email: nullable<string>, isLogined: boolean) => {\r\n        return ({type: 'SET_USER_LOGIN', data: {id, login, email, isLogined}} as const)\r\n    },\r\n\r\n    setCaptchaUrlAC: (URL: string) => ({type: 'SET_CAPTCHA_URL', URL} as const),\r\n\r\n    setProfileAC: (profile: nullable<ProfileType>) => ({type: 'SET_OWN_PROFILE', profile} as const)\r\n}\r\n\r\n\r\nexport let loginThunkCreator = () => {\r\n    return (dispatch: any) => {\r\n        return AuthAPI.getLogin().then((response: any) => {\r\n            if (response.resultCode === ResultsCodes.Success) {\r\n                let {id, login, email} = response.data;\r\n                dispatch(actionsLogin.setUserLoginAC(id, login, email, true));\r\n\r\n                ProfileAPI.getProfile(id).then((response: any) => {\r\n                    dispatch(actionsLogin.setProfileAC(response.data));\r\n                })\r\n            }\r\n        });\r\n\r\n    }\r\n}\r\n\r\nexport let getCaptchaThunkCreator = () => {\r\n    return (dispatch: any) => {\r\n        AuthAPI.getSecureCaptcha().then((response) => {\r\n            dispatch(actionsLogin.setCaptchaUrlAC(response.url))\r\n        })\r\n    }\r\n}\r\n\r\nexport let login = (email: string, password: string, rememberMe: boolean = false, captcha: string | null = null) => {\r\n    return (dispatch: any) => {\r\n        AuthAPI.login(email, password, rememberMe, captcha).then((response) => {\r\n            if (response.data.resultCode === ResultsCodes.Success) {\r\n                dispatch(loginThunkCreator())\r\n\r\n            } else if (response.data.resultCode === ResultCodeForCaptcha.CaptchaIsRequired) {\r\n                dispatch(getCaptchaThunkCreator());\r\n\r\n                let action = stopSubmit('login', {_error: response.data.messages.join(' ')})\r\n                dispatch(action)\r\n\r\n            } else {\r\n                let action = stopSubmit('login', {_error: response.data.messages.join(' ')})\r\n                dispatch(action)\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport let logout = () => {\r\n    return (dispatch: any) => {\r\n        AuthAPI.logout().then((response) => {\r\n            if (response.resultCode === ResultsCodes.Success) {\r\n                dispatch(actionsLogin.setUserLoginAC(null, null, null, false))\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport default loginReducer;\r\n\r\ntype ActionsType = InferActionsTypes<typeof actionsLogin>\r\nexport type InitLoginStateType = typeof initState;\r\n","import {loginThunkCreator} from './loginReducer';\r\nimport {AppStateType, InferActionsTypes} from './stateRedux';\r\n\r\n\r\nlet initState = {\r\n   initialized: false,\r\n   blackTheme: false,\r\n}\r\n\r\n\r\nconst appReducer = (state = initState, action: ActionsType): AppInitStateT => {\r\n    switch(action.type){\r\n        case 'SET_INITIALIZED':\r\n            return {\r\n                ...state,\r\n                initialized: true,\r\n            }\r\n\r\n        case 'CHANGE_THEME':\r\n            localStorage.setItem('theme', JSON.stringify(!state.blackTheme))\r\n            return {\r\n                ...state,\r\n                blackTheme: !state.blackTheme\r\n            }\r\n\r\n\r\n        default: return state\r\n        \r\n    }\r\n}\r\n\r\nexport const actionsApp = {\r\n    setInitializedAC: () => ({type: 'SET_INITIALIZED'} as const),\r\n    ChangeThemeAC: () => ({type: 'CHANGE_THEME'} as const)\r\n}\r\n\r\n\r\nexport let initializeApp = () => {\r\n    return (dispatch: any, getState: () => AppStateType) => {\r\n        let isBlack = getState().app.blackTheme\r\n        let theme = localStorage.getItem('theme')\r\n        if(theme !== String(isBlack)) dispatch(actionsApp.ChangeThemeAC())\r\n\r\n        let promise = dispatch(loginThunkCreator());\r\n        Promise.all([promise]).then(() => {\r\n            dispatch(actionsApp.setInitializedAC())\r\n        });\r\n    }\r\n}\r\n\r\nexport default appReducer;\r\n\r\n\r\ntype ActionsType = InferActionsTypes<typeof actionsApp>\r\nexport type AppInitStateT = typeof initState\r\n","import {InferActionsTypes} from './stateRedux';\r\nimport { DialogsAPI } from '../api/dialogs-api';\r\nimport {message} from 'antd';\r\n\r\nconst initialNotification = {\r\n    newMessageCount: 0 as number | string,\r\n}\r\n\r\nconst notificationReducer = (state = initialNotification, action: ActionsType): initialNotificationT => {\r\n\r\n    switch (action.type) {\r\n        case 'SET_NEW_MESSAGE_COUNT':\r\n            return {\r\n                ...state,\r\n                newMessageCount: action.payload < 100 ? action.payload : '99+'\r\n            }\r\n\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nconst actionsNotifications = {\r\n    setNewMessageCount: (payload: number) => ({type: 'SET_NEW_MESSAGE_COUNT', payload} as const)\r\n}\r\n\r\nexport const getNewMessageCountThunkCreator = () => {\r\n    return (dispatch: any) => {\r\n        DialogsAPI.getMessageCount().then((data: any) => {\r\n            dispatch(actionsNotifications.setNewMessageCount(data.data))\r\n        }).catch(() => {\r\n            message.info('Cannot get notifications')\r\n        })\r\n    }\r\n}\r\n\r\nexport default notificationReducer;\r\n\r\n\r\ntype ActionsType = InferActionsTypes<typeof actionsNotifications>\r\nexport type initialNotificationT = typeof initialNotification;","\r\nlet ws: WebSocket | null = null;\r\nlet subscribers = {\r\n    'messageReceived': [] as MessagesSubscriberType[],\r\n    'statusChanged': [] as MessagesStatusSubscriberType[]\r\n}\r\n\r\ntype eventsNameType = 'messageReceived' | 'statusChanged'\r\n\r\nconst notifySubscriberAboutStatus = (status: ChatStatus) => {\r\n    subscribers.statusChanged.forEach(s => s(status))\r\n}\r\n\r\n\r\nconst closeHandler = () => {\r\n    notifySubscriberAboutStatus('pending')\r\n    setTimeout(createChannel, 3000)\r\n}\r\n\r\nconst setMessagesHandler = (e: MessageEvent) => {\r\n    let messages = JSON.parse(e.data)\r\n    subscribers['messageReceived'].forEach(s => s(messages))\r\n}\r\n\r\nconst openHandler = () => {\r\n    notifySubscriberAboutStatus('ready')\r\n}\r\n\r\nconst removeAllEventsAndClose = () => {\r\n    ws?.removeEventListener('close',closeHandler)\r\n    ws?.removeEventListener('message', setMessagesHandler)\r\n    ws?.removeEventListener('open', openHandler)\r\n    ws?.close()\r\n}\r\n\r\n\r\nfunction createChannel() {\r\n    removeAllEventsAndClose()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx');\r\n    notifySubscriberAboutStatus('pending')\r\n\r\n    ws?.addEventListener('close', closeHandler)\r\n    ws?.addEventListener('message', setMessagesHandler)\r\n    ws?.addEventListener('open', openHandler)\r\n}\r\n\r\nexport const ChatAPI = {\r\n    start(){\r\n        createChannel()\r\n    },\r\n\r\n    stop(){\r\n        removeAllEventsAndClose()\r\n        subscribers['messageReceived'] = []\r\n        subscribers['statusChanged'] = []\r\n    },\r\n\r\n    subscribe(eventName: eventsNameType, callback: any){\r\n        subscribers[eventName].push(callback)\r\n    },\r\n\r\n    unsubscribe(eventName: eventsNameType, callback: any){\r\n        //@ts-ignore\r\n        subscribers[eventName] = subscribers[eventName].filter((item: any) => item !== callback)\r\n    },\r\n\r\n    send(text: string) {\r\n        ws?.send(text)\r\n    }\r\n\r\n}\r\n\r\ntype MessagesSubscriberType = (messages: ChatMessageType[]) => void\r\ntype MessagesStatusSubscriberType = (status: ChatStatus) => void\r\n\r\nexport type ChatMessageType = {\r\n    id?: any,\r\n    message: string,\r\n    photo: string,\r\n    userId: number,\r\n    userName: string,\r\n}\r\nexport type ChatStatus = 'pending' | 'ready'\r\n\r\n\r\n\r\n\r\n","var _rect, _rect2, _rect3, _rect4, _rect5;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPreloader(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    x: \"0px\",\n    y: \"0px\",\n    stroke: \"#0078D4\",\n    fill: \"#0078D4\",\n    height: 60,\n    width: 60,\n    viewBox: \"0 0 100 100\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    fill: \"#0078D4\",\n    width: 4,\n    height: 100,\n    transform: \"translate(0) rotate(180 3 50)\"\n  }, /*#__PURE__*/React.createElement(\"animate\", {\n    attributeName: \"height\",\n    attributeType: \"XML\",\n    dur: \"1s\",\n    values: \"30; 100; 30\",\n    repeatCount: \"indefinite\"\n  }))), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 17,\n    fill: \"#0078D4\",\n    width: 4,\n    height: 100,\n    transform: \"translate(0) rotate(180 20 50)\"\n  }, /*#__PURE__*/React.createElement(\"animate\", {\n    attributeName: \"height\",\n    attributeType: \"XML\",\n    dur: \"1s\",\n    values: \"30; 100; 30\",\n    repeatCount: \"indefinite\",\n    begin: \"0.1s\"\n  }))), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 40,\n    fill: \"#0078D4\",\n    width: 4,\n    height: 100,\n    transform: \"translate(0) rotate(180 40 50)\"\n  }, /*#__PURE__*/React.createElement(\"animate\", {\n    attributeName: \"height\",\n    attributeType: \"XML\",\n    dur: \"1s\",\n    values: \"30; 100; 30\",\n    repeatCount: \"indefinite\",\n    begin: \"0.3s\"\n  }))), _rect4 || (_rect4 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 60,\n    fill: \"#0078D4\",\n    width: 4,\n    height: 100,\n    transform: \"translate(0) rotate(180 58 50)\"\n  }, /*#__PURE__*/React.createElement(\"animate\", {\n    attributeName: \"height\",\n    attributeType: \"XML\",\n    dur: \"1s\",\n    values: \"30; 100; 30\",\n    repeatCount: \"indefinite\",\n    begin: \"0.5s\"\n  }))), _rect5 || (_rect5 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 80,\n    fill: \"#0078D4\",\n    width: 4,\n    height: 100,\n    transform: \"translate(0) rotate(180 76 50)\"\n  }, /*#__PURE__*/React.createElement(\"animate\", {\n    attributeName: \"height\",\n    attributeType: \"XML\",\n    dur: \"1s\",\n    values: \"30; 100; 30\",\n    repeatCount: \"indefinite\",\n    begin: \"0.1s\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPreloader);\nexport default __webpack_public_path__ + \"static/media/preloader.aeed75de.svg\";\nexport { ForwardRef as ReactComponent };","import {ChatAPI, ChatMessageType, ChatStatus} from '../api/chat-api';\r\nimport {InferActionsTypes} from './stateRedux';\r\nimport { Dispatch } from 'redux';\r\n// @ts-ignore\r\nimport {v1} from 'uuid'\r\n\r\nconst initState = {\r\n    messages: [] as ChatMessageType[],\r\n    status: 'pending' as ChatStatus,\r\n}\r\n\r\n\r\nexport const chatReducer = (state = initState, action: ActionsType): AppInitStateT => {\r\n    switch(action.type){\r\n        case 'SET_MESSAGES_RECEIVED':\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.payload.messages.map( m => ({...m, id: v1() }))]\r\n                    .filter((m, index, array) => index >= array.length - 100)\r\n            }\r\n\r\n        case 'SET_STATUS_CHANGED':\r\n            return {\r\n                ...state,\r\n                status: action.payload\r\n            }\r\n\r\n        default: return state\r\n\r\n    }\r\n}\r\n\r\nexport const actionsChat = {\r\n    messagesReceived: (messages: ChatMessageType[]) =>\r\n        ({type: 'SET_MESSAGES_RECEIVED', payload: {messages}} as const),\r\n\r\n    statusChanged: (status: ChatStatus) => (\r\n        {type: 'SET_STATUS_CHANGED', payload: status} as const\r\n    )\r\n}\r\nlet _newStatusHandler: ((status: ChatStatus) => void ) | null = null\r\nconst newStatusHandlerCreator = (dispatch: Dispatch) => {\r\n    if(_newStatusHandler === null) {\r\n        _newStatusHandler = (status) => {\r\n            dispatch(actionsChat.statusChanged(status))\r\n        }\r\n    }\r\n\r\n    return _newStatusHandler\r\n}\r\n\r\n\r\nlet _newMessageHandler: ((messages: ChatMessageType[]) => void ) | null = null\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n    if(_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => {\r\n            dispatch(actionsChat.messagesReceived(messages))\r\n        }\r\n    }\r\n\r\n    return _newMessageHandler\r\n}\r\n\r\n\r\nexport let startMessagesListening = () => (dispatch: Dispatch) => {\r\n    ChatAPI.start()\r\n    ChatAPI.subscribe('messageReceived', newMessageHandlerCreator(dispatch))\r\n    ChatAPI.subscribe('statusChanged', newStatusHandlerCreator(dispatch))\r\n}\r\n\r\nexport let stopMessagesListening = () => (dispatch: Dispatch) => {\r\n    ChatAPI.stop()\r\n    ChatAPI.unsubscribe('messageReceived',newMessageHandlerCreator(dispatch))\r\n    ChatAPI.unsubscribe('statusChanged', newStatusHandlerCreator(dispatch))\r\n}\r\n\r\nexport let sendMessageThunk = (text: string) => (dispatch: Dispatch) => {\r\n    ChatAPI.send(text)\r\n}\r\n\r\n\r\ntype ActionsType = InferActionsTypes<typeof actionsChat>\r\nexport type AppInitStateT = typeof initState\r\n","import profileReducer from './profileReducer';\r\nimport messageReducer from './messageReducer';\r\nimport {Action, combineReducers, compose, createStore} from 'redux';\r\nimport usersReducer from './usersReducer';\r\nimport loginReducer from './loginReducer'\r\nimport {applyMiddleware} from 'redux';\r\nimport thunkMiddleWare, {ThunkAction} from 'redux-thunk';\r\nimport {reducer as formReducer} from 'redux-form';\r\nimport appReducer from './appReducer';\r\nimport notificationReducer from './notificationReducer';\r\nimport { chatReducer } from './chat-reducer';\r\n\r\n\r\nlet reducers = combineReducers({\r\n    ProfilePage: profileReducer,\r\n    MessagePage: messageReducer,\r\n    UsersReducer: usersReducer,\r\n    LoginReducer: loginReducer,\r\n    form: formReducer,\r\n    app: appReducer,\r\n    chat: chatReducer,\r\n    notification: notificationReducer\r\n})\r\n\r\ntype RootReducerType = typeof reducers;\r\nexport type AppStateType = ReturnType<RootReducerType>\r\n\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleWare)));\r\n\r\ntype PropertiesType<T> = T extends { [key: string]: infer U } ? U : never\r\nexport type InferActionsTypes<T extends { [key: string]: (...args: any[]) => any }> = ReturnType<PropertiesType<T>>\r\n\r\n\r\nexport type BaseThunkType<A extends Action = Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\r\n\r\n// @ts-ignore\r\n//window._market = store;\r\n\r\nexport default store;","import React from 'react';\r\nimport styles from './FormControls.module.css';\r\nimport {WrappedFieldProps} from 'redux-form';\r\n\r\n\r\ntype InputFieldType = (params: WrappedFieldProps) => React.ReactNode\r\nexport const InputField: InputFieldType = ({input, meta, ...props}): any => {\r\n    let hasError = meta.error && meta.touched;\r\n\r\n    return (<div className={styles.InputContainer}>\r\n        <div>\r\n            <input {...props} {...input}/>\r\n        </div>\r\n        {hasError && <span>{meta.error}</span>}\r\n    </div>)\r\n}\r\n","export const required = (value: string): string | undefined => {\r\n    if (value) return undefined;\r\n    return 'Field is required';\r\n}\r\n\r\nexport const maxSymbols = (max: number) => (value: string): string | undefined => {\r\n    if (value && value.length > max) return `max size is ${max} symbols`;\r\n    return undefined;\r\n}","import styled from 'styled-components';\r\n\r\n\r\nexport const UniversalThemeComponent = styled.div`\r\n    background: ${props => (props.theme.mode === 'dark' ? '#2B2B2B' : '#ffffff')};\r\n    color: ${props => (props.theme.mode === 'dark' ? '#ffffff' : '#474B59;')};\r\n    \r\n    & h1, h2, h3, .tab {\r\n        color: ${props => (props.theme.mode === 'dark' ? '#ffffff' : '#474B59;')};\r\n    }\r\n   \r\n    & a {\r\n        color: ${props => (props.theme.mode === 'dark' ? '#ffffff' : '#474B59;')};\r\n    }\r\n\r\n    & a.active svg{\r\n        color: #2B5278;\r\n    }\r\n    \r\n    & svg {\r\n        color: ${props => (props.theme.mode === 'dark' ? '#ffffff' : '#474B59;')};\r\n    }\r\n`\r\n\r\nexport const HeaderStyle = styled(UniversalThemeComponent)`\r\n border-bottom: 1px solid ${props => (props.theme.mode === 'dark') ? '#3C3F41' : 'lightgray'};\r\n`\r\n\r\nexport const NavigationStyle = styled(UniversalThemeComponent)`\r\n    & a{\r\n         border-right: ${props => (props.theme.mode === 'dark' ? '1px solid #3C3F41' : '1px solid lightgray')};\r\n    }\r\n    \r\n    & a:first-child {\r\n            border-left: ${props => (props.theme.mode === 'dark' ? '1px solid #3C3F41' : '1px solid lightgray')};\r\n    }\r\n\r\n    & a.active{\r\n        background: ${props => (props.theme.mode === 'dark' ? '#202020' : '#f2f2f2')};\r\n    } \r\n`\r\n\r\nexport const AdaptiveNav = styled.div`\r\n     background: ${props => (props.theme.mode === 'dark' ? '#2B2B2B' : '#ffffff')};\r\n     border-top: 1px solid ${props => (props.theme.mode === 'dark') ? '#3C3F41' : 'lightgray'};\r\n     \r\n     & svg {\r\n           color: ${props => (props.theme.mode === 'dark' ? '#ffffff' : '#474B59;')};\r\n     }\r\n`\r\n\r\nexport const ProfileItemStyled = styled(UniversalThemeComponent)`\r\n    border: ${props => (props.theme.mode === 'dark' ? '1px solid #2B2B2B' : '1px solid lightgray;')};\r\n    svg {\r\n        color: #0078D4;\r\n    }\r\n`\r\n\r\nexport const UserOptionItemStyled = styled(UniversalThemeComponent)`\r\n    border: ${props => (props.theme.mode === 'dark' ? '1px solid #2B2B2B' : '1px solid lightgray;')};\r\n    \r\n    & > button {\r\n        border: none;\r\n        background: ${props => (props.theme.mode === 'dark' ? '#3C3F41' : 'lightgray')};\r\n        color: #fff;\r\n    }\r\n    \r\n    & > button:hover {\r\n        background: #2B5278;\r\n        color: #fff;\r\n    }\r\n    \r\n    & > button.ant-btn-primary {\r\n        background: #2B5278;\r\n    }\r\n`\r\n\r\nexport const PagitatorItemStyled = styled(ProfileItemStyled)`\r\n    & > button {\r\n        background: ${props => (props.theme.mode === 'dark' ? '#3C3F41' : 'lightgray')};\r\n    }\r\n    \r\n    & > button.navs {\r\n        background: #2B5278;\r\n    }\r\n    \r\n    & > button:disabled {\r\n        background: ${props => (props.theme.mode === 'dark' ? '#3C3F41' : 'lightgray')};;\r\n    }\r\n`\r\n\r\nexport const UserItemStyled = styled(ProfileItemStyled)`\r\n    & button {\r\n        color:  ${props => props.theme.mode === 'dark' ? '#fff' : '#2B2B2B'};\r\n    }\r\n    \r\n    & button.unfollow{\r\n        border: 1px solid #2B5278;\r\n        color: #fff;\r\n        background: #2B5278;\r\n    }\r\n\r\n    & button:disabled{\r\n        background: lightgrey;\r\n        border: 1px solid lightgrey;\r\n        color: #fff;\r\n    }\r\n`\r\n\r\nexport const PostsItemStyled = styled(ProfileItemStyled)`\r\n    & textarea {\r\n        background:  ${props => props.theme.mode === 'dark' ? '#2B2B2B' : '#fff'};\r\n        color:  ${props => (props.theme.mode === 'dark' ? '#fff' : '#000')};\r\n        margin-bottom: 10px;\r\n        border-radius: 0px;\r\n    }\r\n    \r\n    & .Content {\r\n        border-bottom: 1px solid ${props => (props.theme.mode === 'dark' ? '#3C3F41' : 'lightgray')};\r\n        border-top: 1px solid ${props => (props.theme.mode === 'dark' ? '#3C3F41' : 'lightgray')};\r\n    }\r\n`\r\n\r\nexport const LoginWrapStyled = styled(UniversalThemeComponent)`\r\n    border-top: 1px solid ${props => (props.theme.mode === 'dark' ? '#3C3F41' : 'lightgray')}; \r\n    \r\n    & input {\r\n        background: ${props => (props.theme.mode === 'dark' ? '#3C3F41' : 'lightgray')};\r\n        border: none;\r\n    };\r\n    \r\n`\r\n\r\nexport const SettingStyled = styled(UniversalThemeComponent)`\r\n   & input {\r\n        background: ${props => (props.theme.mode === 'dark' ? '#3C3F41' : 'lightgray')};\r\n        color: ${props => (props.theme.mode === 'dark' ? '#fff' : '#000')};\r\n        border: none;\r\n    };\r\n   \r\n`\r\n","import {AppStateType} from '../stateRedux';\r\n\r\n\r\nexport const getLoginSelector = (state: AppStateType) => (state.LoginReducer.login);\r\nexport const getIsLoginedSelector = (state: AppStateType) => (state.LoginReducer.isLogined);\r\nexport const getMyProfileSelector = (state: AppStateType) => (state.LoginReducer.profile);\r\nexport const getCaptchaSelector = (state: AppStateType) => (state.LoginReducer.captchaURL);\r\nexport const getMyIdSelector = (state: AppStateType) => (state.LoginReducer.id);","import React, {useEffect} from 'react';\r\nimport {Field, InjectedFormProps, reduxForm} from 'redux-form';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nimport styles from './Login.module.css';\r\n\r\nimport {InputField} from '../common/formControls/FormControls';\r\nimport {required} from '../../utils/validators/validators';\r\nimport {login} from '../../redux-state/loginReducer';\r\nimport {LoginWrapStyled} from '../../styles/theme';\r\nimport styled from 'styled-components';\r\nimport {getCaptchaSelector, getIsLoginedSelector} from '../../redux-state/selectors/login-selectors';\r\nimport {AliwangwangOutlined} from '@ant-design/icons';\r\n\r\nconst Background = styled.div`\r\n    width: 75%;\r\n    height: 100%;\r\n    background: url('https://image.freepik.com/free-vector/season-rain-blue-seamless-background_95169-905.jpg');\r\n`\r\n\r\ntype loginFormValuesType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    captcha: string | null\r\n}\r\n\r\ntype LoginFormOwnProps = {\r\n    captcha: string | null\r\n}\r\n\r\nlet Form: React.FC<InjectedFormProps<loginFormValuesType, LoginFormOwnProps> & LoginFormOwnProps> = ({\r\n                                                                                                         handleSubmit,\r\n                                                                                                         submitting,\r\n                                                                                                         error,\r\n                                                                                                         captcha\r\n                                                                                                     }) => {\r\n    return (<form className={styles.Form} onSubmit={handleSubmit}>\r\n        <div>\r\n            <div>\r\n                <h1><AliwangwangOutlined />Uface</h1>\r\n                <h2>Please sing up</h2>\r\n            </div>\r\n        </div>\r\n\r\n        <div className={styles.Input}>\r\n            <label>Enter your email <span>*</span></label>\r\n            <Field type={'text'} placeholder={'enter login'} component={InputField} validate={required} name={'email'}/>\r\n        </div>\r\n\r\n        <div className={styles.Input}>\r\n            <label>Enter your password<span>*</span></label>\r\n            <Field type={'password'} placeholder={'enter password'} component={InputField} validate={required}\r\n                   name={'password'}/>\r\n        </div>\r\n\r\n        <div className={styles.RememberMe}>\r\n            <Field type={'checkbox'} component={'input'} name={'rememberMe'}/> Remember me\r\n        </div>\r\n\r\n\r\n        {captcha && <div className={styles.Captcha}>\r\n            <img src={captcha} alt=\"captcha\"/>\r\n            <Field type={'text'}\r\n                   placeholder={'enter captcha'}\r\n                   component={InputField}\r\n                   name={'captcha'}/>\r\n        </div>}\r\n\r\n        {error && <div className={styles.Error}>{error}</div>}\r\n\r\n        <div>\r\n            <button type=\"submit\" disabled={submitting}>Login in</button>\r\n        </div>\r\n\r\n    </form>)\r\n}\r\n\r\nlet ReduxLoginForm = reduxForm<loginFormValuesType, LoginFormOwnProps>({form: 'login'})(Form)\r\n\r\n\r\nexport const Login = () => {\r\n    useEffect(() => {\r\n        document.title = 'Login';\r\n    }, [])\r\n\r\n    const isLogined = useSelector(getIsLoginedSelector)\r\n    const captcha = useSelector(getCaptchaSelector)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    let onSubmit = (loginData: loginFormValuesType) => {\r\n        dispatch(login(loginData.email, loginData.password, loginData.rememberMe, loginData.captcha))\r\n    }\r\n\r\n    if (isLogined) {\r\n        return <Redirect to=\"/profile\"/>\r\n    }\r\n\r\n    return (<div className={styles.Login}>\r\n                <Background className={styles.Photo}/>\r\n\r\n                <LoginWrapStyled className={styles.LoginForm}>\r\n                    <ReduxLoginForm onSubmit={onSubmit} captcha={captcha}/>\r\n                </LoginWrapStyled>\r\n            </div>)\r\n}\r\n\r\nexport default Login\r\n","import React from 'react';\r\nimport {ReactComponent as PreloaderSVG} from '../../../img/common/preloader.svg';\r\n\r\nconst Preloader: React.FC = () => {\r\n    return (<div className=\"preloader\">\r\n                <div>\r\n                    <PreloaderSVG/>\r\n                </div>\r\n            </div>)\r\n}\r\n\r\nexport default Preloader","import {AppStateType} from '../stateRedux';\r\n\r\nexport const getNewMessagesCountSelector = (state: AppStateType) => (state.notification.newMessageCount)","export default __webpack_public_path__ + \"static/media/avatar.b03c02f4.png\";","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport AvatarImg from '../../../img/Profile/avatar.png';\r\n\r\n\r\ntype avatarTypes = {\r\n    link: string | null,\r\n    size: number,\r\n}\r\n\r\nconst AvatarStyled = styled.div<avatarTypes>`\r\n    border-radius: 50%;\r\n    height: ${props => props.size}px;\r\n    width: ${props => props.size}px;\r\n    background: url('${props => props.link ? props.link : AvatarImg}');\r\n    background-size: cover;\r\n    display: inline-block;\r\n    margin: 0px 10px;\r\n    border: ${props => (props.theme.mode === 'dark' ? '1px solid #2B2B2B' : '1px solid lightgray;')};\r\n`\r\n\r\nexport const Avatar: React.FC<avatarTypes> = ({link, size}) => (<AvatarStyled link={link} size={size}/>)","import React, {useState} from 'react'\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport styled from 'styled-components';\r\nimport headermod from './adaptiveNav.module.css';\r\nimport Navmod from './nav.module.css';\r\n\r\nimport {AdaptiveNav, UniversalThemeComponent} from '../../styles/theme'\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {getIsLoginedSelector, getMyProfileSelector} from '../../redux-state/selectors/login-selectors';\r\nimport {getNewMessagesCountSelector} from '../../redux-state/selectors/notification-selector';\r\nimport { logout } from '../../redux-state/loginReducer';\r\nimport {actionsApp} from '../../redux-state/appReducer';\r\nimport {\r\n    IdcardOutlined,\r\n    LogoutOutlined, MenuUnfoldOutlined,\r\n    MessageOutlined,\r\n    SettingOutlined, SwapOutlined,\r\n    UsergroupAddOutlined,\r\n    WechatOutlined\r\n} from '@ant-design/icons';\r\nimport {Avatar} from '../assets/avatar/avatar';\r\nimport AvatarImg from '../../img/Profile/avatar.png';\r\n\r\nexport const SwitchButton = styled.button`\r\n    background: none;\r\n    outline: none;\r\n    border: none;\r\n    \r\n    & svg {\r\n        color: #0078D4;\r\n    }\r\n`\r\nexport const FullScreenMenu: React.FC<{setIsFullScreen: Function}> = ({setIsFullScreen}) => {\r\n    const profile = useSelector(getMyProfileSelector)\r\n    const newMessageCount = useSelector(getNewMessagesCountSelector)\r\n    const dispatch = useDispatch()\r\n\r\n    return <UniversalThemeComponent className={headermod.fullScreen}>\r\n                <div className={headermod.fullScreenWrap}>\r\n                    <div>\r\n                        <h2>{profile?.fullName}</h2>\r\n                        <Avatar link={profile?.photos.small || AvatarImg} size={70}/>\r\n                        <MenuUnfoldOutlined\r\n                            className={headermod.closeFullScreen}\r\n                            onClick={() => setIsFullScreen(false)}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className={headermod.fullScreenMenuItems} >\r\n                        <div className={headermod.adaptiveMenu} onClick={() => setIsFullScreen(false)}>\r\n                            <NavLink to=\"/profile\" activeClassName={Navmod.activeLink}>\r\n                                <IdcardOutlined />\r\n                                Profile\r\n                            </NavLink>\r\n                        </div>\r\n\r\n                        <div className={headermod.adaptiveMenu} onClick={() => setIsFullScreen(false)}>\r\n                            <NavLink to=\"/friends\" activeClassName={Navmod.activeLink}>\r\n                                <UsergroupAddOutlined />\r\n                                Users\r\n                            </NavLink>\r\n                        </div>\r\n\r\n                        <div className={headermod.adaptiveMenu + ' ' + headermod.messages} onClick={() => setIsFullScreen(false)}>\r\n                            <NavLink to='/dialogs'>\r\n                                <MessageOutlined />\r\n                                Messages\r\n                            </NavLink>\r\n                            {newMessageCount ? <div className={headermod.newMessageCount}>{newMessageCount}</div> : null}\r\n                        </div>\r\n\r\n                        <div className={headermod.adaptiveMenu} onClick={() => setIsFullScreen(false)}>\r\n                            <NavLink to=\"/chat\" activeClassName={Navmod.activeLink}>\r\n                                <WechatOutlined />\r\n                                Common chat\r\n                            </NavLink>\r\n                        </div>\r\n\r\n                        <div className={headermod.adaptiveMenu} onClick={() => setIsFullScreen(false)}>\r\n                            <NavLink to=\"/setting\" activeClassName={Navmod.activeLink}>\r\n                                <SettingOutlined />\r\n                                Settings\r\n                            </NavLink>\r\n                        </div>\r\n\r\n                        <div className={headermod.adaptiveMenu} onClick={() => setIsFullScreen(false)}>\r\n                            <SwitchButton onClick={() => dispatch(actionsApp.ChangeThemeAC())}>\r\n                                <SwapOutlined /> Change theme\r\n                            </SwitchButton>\r\n                        </div>\r\n\r\n                        <div className={headermod.logout} onClick={() => dispatch(logout())}>\r\n                            <LogoutOutlined/> Logout\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n           </UniversalThemeComponent>\r\n}\r\n\r\nexport const AdaptiveMenu: React.FC = () => {\r\n    const isLogined = useSelector(getIsLoginedSelector)\r\n    const newMessageCount = useSelector(getNewMessagesCountSelector)\r\n    const [isFullScreen, setIsFullScreen] = useState(false)\r\n\r\n    if(!isLogined) return null\r\n\r\n    return (<AdaptiveNav className={headermod.adaptivemenu}>\r\n        {isFullScreen && <FullScreenMenu setIsFullScreen={setIsFullScreen}/>}\r\n\r\n        <div className={headermod.adaptiveMenu} >\r\n            <NavLink to=\"/friends\" activeClassName={Navmod.activeLink}>\r\n                <UsergroupAddOutlined /></NavLink>\r\n        </div>\r\n\r\n        <div className={headermod.adaptiveMenu + ' ' + headermod.messages}>\r\n            <NavLink to='/dialogs'>\r\n                <MessageOutlined />\r\n            </NavLink>\r\n            {newMessageCount ? <div className={headermod.newMessageCount}>{newMessageCount}</div> : null}\r\n        </div>\r\n\r\n        <div className={headermod.adaptiveMenu}>\r\n            <NavLink to=\"/profile\" activeClassName={Navmod.activeLink}><IdcardOutlined /></NavLink>\r\n        </div>\r\n\r\n        <div className={headermod.adaptiveMenu + \" \" + headermod.menu} onClick={() => setIsFullScreen(true)}>\r\n            <MenuUnfoldOutlined />\r\n        </div>\r\n    </AdaptiveNav>)\r\n}\r\n","import {AppStateType} from '../stateRedux';\r\n\r\nexport const getIsBlackSelector = (state: AppStateType) => (state.app.blackTheme)\r\nexport const getInitializedSelector = (state: AppStateType) => (state.app.initialized)","import {createSelector} from 'reselect';\r\nimport {AppStateType} from '../stateRedux';\r\n\r\n\r\nexport const getDialogsSelector = (state: AppStateType) => state.MessagePage.dialogs;\r\nexport const getMessagesSelector = (state: AppStateType) => state.MessagePage.messages;\r\nexport const getIsDialogsFetching = (state: AppStateType) => state.MessagePage.isDialogsFetching\r\nexport const getIsMessagesFetching = (state: AppStateType) => state.MessagePage.isDialogFetching\r\nexport const getDialogsError = (state: AppStateType) => state.MessagePage.getDialogsError\r\nexport const getMessagesError = (state: AppStateType) => state.MessagePage.getMessagesError\r\nexport const getIsRedirectToDialog = (state: AppStateType) => (state.MessagePage.isRedirectedToDialog)\r\n\r\n\r\nexport const getDialogInfoSelector = createSelector(\r\n    (state => state.MessagePage.dialogs),\r\n    (_: AppStateType, id: string) => id,\r\n    (dialogs, id) => dialogs?.filter(dialog => String(dialog.id) === id)\r\n)","export let getCorrectTime = (date: Date) => {\r\n    let x = new Date();\r\n    let timeZone = x.getTimezoneOffset() / 60;\r\n    let temp = (new Date(date)).getTime() - timeZone * 3.6e+6\r\n    return new Date(temp).toString().slice(0, 21)\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components';\r\nimport {SyncOutlined} from '@ant-design/icons';\r\nimport {Button} from 'antd';\r\n\r\ntype OwnPropsType = {\r\n    refresh: Function\r\n}\r\n\r\nconst Wrap = styled.div`\r\n    margin-top: 30%;\r\n    text-align: center;\r\n    color: ${props => props.theme.mode === 'dark' ? '#fff' : '#000'};\r\n    font-size: 16px;\r\n    \r\n    & svg{\r\n       color: #2B5278;\r\n       font-size: 40px; \r\n       margin: 10px 0px;\r\n    }\r\n`\r\n\r\nexport const NetworkError: React.FC<OwnPropsType> = ({refresh}) =>\r\n    (<Wrap>\r\n        <div>\r\n            <SyncOutlined />\r\n        </div>\r\n        <p>Cannot load page</p>\r\n\r\n        <Button size={'large'} onClick={() => refresh()}>Refresh</Button>\r\n    </Wrap>)","import React,{useEffect, useState} from 'react';\r\n\r\nexport function useWindowWidthSize() {\r\n\r\n    const [windowSize, setWindowSize] = useState(window.innerWidth);\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            setWindowSize(window.innerWidth);\r\n        }\r\n\r\n        window.addEventListener(\"resize\", handleResize);\r\n\r\n        handleResize();\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n\r\n    return windowSize;\r\n}","import React, {useEffect} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport MessagesStyle from \"./Messages.module.css\";\r\nimport {deleteMessageThunkCreator, getMessagesAC, getMessagesThunkCreator} from '../../../../redux-state/messageReducer';\r\nimport styled from \"styled-components\";\r\nimport {\r\n    getIsMessagesFetching,\r\n    getMessagesError,\r\n    getMessagesSelector\r\n} from '../../../../redux-state/selectors/message-selectors';\r\nimport {getIsBlackSelector} from '../../../../redux-state/selectors/app-selectors';\r\nimport {getMyIdSelector} from '../../../../redux-state/selectors/login-selectors';\r\n\r\nimport { Spin } from 'antd';\r\nimport {DeleteOutlined, EllipsisOutlined, LoadingOutlined} from '@ant-design/icons';\r\nimport {getCorrectTime} from '../../../../utils/date-formater';\r\nimport { Menu, Dropdown } from 'antd';\r\nimport {NetworkError} from '../../../common/NetworkError/NetworkError';\r\nimport {useWindowWidthSize} from '../../../../hook/Resize';\r\nimport Preloader from '../../../assets/preloader/Preloader';\r\n\r\n\r\nconst antIcon = <LoadingOutlined style={{ fontSize: 40 }} spin />;\r\n\r\nconst MessageWrap = styled.div`\r\n    background: ${props => (props.black ? '#2B2B2B' : '#ffffff')};\r\n`\r\n\r\nconst Dots = styled(EllipsisOutlined)`\r\n    color: ${props => (props.theme.mode === 'dark') ? '#fff': '#000'}\r\n`\r\n\r\nconst Error = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 100%;\r\n`\r\n\r\n\r\nconst Message = (props) => {\r\n    const messageMenu = (\r\n        <Menu>\r\n            <Menu.Item key=\"0\" style={{color: 'red'}} onClick={() => props.deleteMessage(props.messageId)}>\r\n                Delete it <DeleteOutlined />\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n    return (\r\n        <div\r\n            className={MessagesStyle.messageItem + \" \" + (props.myId === props.senderId ? MessagesStyle.isMy : \"\")}\r\n        >\r\n            <div className={MessagesStyle.messageItemLogo}></div>\r\n            {props.mail}\r\n            <span className={MessagesStyle.data}>{getCorrectTime(props.addedAt)}</span>\r\n            <Dropdown overlay={messageMenu} trigger={['click']}>\r\n                <Dots className={MessagesStyle.messageActions}/>\r\n            </Dropdown>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const Messages = ({dialogId}) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const messagesData = useSelector(getMessagesSelector)\r\n    const isBlack = useSelector(getIsBlackSelector)\r\n    const myId = useSelector(getMyIdSelector)\r\n    const isMessageFetching = useSelector(getIsMessagesFetching)\r\n    const error = useSelector(getMessagesError)\r\n    const width = useWindowWidthSize()\r\n\r\n    useEffect(() => {\r\n        dispatch(getMessagesThunkCreator(dialogId))\r\n\r\n        return () => {\r\n            dispatch(getMessagesAC({items: [], totalCount: 0, error: ''}))\r\n        }\r\n    }, [dialogId, dispatch])\r\n\r\n    const deleteMessage = (messageId) => {\r\n        dispatch(deleteMessageThunkCreator(messageId))\r\n    }\r\n\r\n\r\n    const messages = messagesData.items.map(messageItem => <Message mail={messageItem.body}\r\n                                                                             key={messageItem.id}\r\n                                                                             messageId = {messageItem.id}\r\n                                                                             addedAt={messageItem.addedAt}\r\n                                                                             senderId={messageItem.senderId}\r\n                                                                             myId={myId}\r\n                                                                             deleteMessage={deleteMessage}\r\n\r\n\r\n    />).reverse()\r\n\r\n    if(width <= 720) {\r\n\r\n        return <MessageWrap className={MessagesStyle.messages} black={isBlack}>\r\n                {isMessageFetching ? <Preloader/>:<>{!error && messages}\r\n                    {error && <Error><NetworkError refresh={() => dispatch(getMessagesThunkCreator(dialogId))}/></Error>}</>}\r\n                </MessageWrap>\r\n    }\r\n\r\n    return   <Spin spinning={isMessageFetching} indicator={antIcon}>\r\n                <MessageWrap className={MessagesStyle.messages} black={isBlack}>\r\n                    {!error && messages}\r\n                    {error && <Error><NetworkError refresh={() => dispatch(getMessagesThunkCreator(dialogId))}/></Error>}\r\n                </MessageWrap>\r\n            </Spin>\r\n}","export default __webpack_public_path__ + \"static/media/notFound.7f91e71d.gif\";","import React from 'react';\r\nimport notFound from '../../img/Preloader/notFound.gif'\r\n\r\n\r\nclass NotFound extends React.Component {\r\n    componentDidMount() {\r\n        document.title = 'Not found';\r\n    }\r\n\r\n    render() {\r\n        return (<div style={{textAlign: 'center', marginTop: '40px'}}>\r\n                    <img src={notFound} alt=\"Not found\"/>\r\n                    <h2>404 Not Found</h2>\r\n                </div>)\r\n\r\n    }\r\n}\r\n\r\nexport default NotFound;","import React, {useState} from 'react';\r\nimport MyPost from \"../../Profile/MyPosts/MyPosts.module.css\";\r\nimport DialogMod from \"./DialogWithUser.module.css\";\r\nimport {NavLink, useParams} from \"react-router-dom\";\r\nimport Avatar from \"../../../img/Profile/avatar.png\";\r\nimport {Messages} from \"./Messages/Messages\";\r\nimport styled from \"styled-components\";\r\nimport {CloseCircleOutlined, MessageOutlined, SendOutlined} from '@ant-design/icons';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {getIsBlackSelector} from '../../../redux-state/selectors/app-selectors';\r\nimport {getDialogInfoSelector} from '../../../redux-state/selectors/message-selectors';\r\nimport {sendMessagesThunkCreator} from '../../../redux-state/messageReducer';\r\nimport NotFound from '../../404/notFound';\r\n\r\n\r\nconst DialogStyled = styled.div`\r\n    background: ${props => (props.black ? '#2B2B2B' : '#ffffff')};\r\n    margin-left: 5px\r\n`\r\n\r\nconst DialogHeader = styled.div`\r\n    background: ${props => (props.black ? '#2B2B2B' : '#ffffff')};\r\n    border-bottom: 1px solid ${props => (props.black ? '#3C3F41' : 'lightgray')};\r\n    \r\n    & h3 {\r\n        color: ${props => (props.black ? '#ffffff' : '#474B59;')};\r\n    }\r\n \r\n    & h1 {\r\n        color: ${props => (props.black ? '#ffffff' : '#474B59;')};\r\n    }\r\n    \r\n    & .last {\r\n        color: ${props => (props.black ? '#fff' : 'gray;')};\r\n    }\r\n`\r\n\r\nconst MessageEditor = styled.div`\r\n    border-top: 1px solid ${props => (props.black ? '#3C3F41' : 'lightgray')};\r\n    background: ${props => (props.black ? '#2B2B2B' : '#ffffff')};\r\n    \r\n    & textarea{\r\n        background: ${props => (props.black ? '#2B2B2B' : '#ffffff')};\r\n        color: ${props => (props.black ? '#fff' : '#000')};\r\n    }\r\n    \r\n    & svg {\r\n        color: #0078D4;\r\n    }\r\n`\r\n\r\nconst ChooseDialog = styled.div`\r\n    color: #fff;\r\n    font-size: 24px;\r\n    text-align: center;\r\n    flex-grow: 1;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    color: #1890ff;\r\n    \r\n    & svg {\r\n        margin-bottom: 10px;\r\n        font-size: 4em;\r\n    }\r\n`\r\nexport const NoDialogSelected = (<ChooseDialog className={DialogMod.noDialog}>\r\n                                    <div>\r\n                                        <MessageOutlined />\r\n                                        <p>Choose Dialog</p>\r\n                                    </div>\r\n                                </ChooseDialog>)\r\n\r\n\r\nexport const Dialog = () => {\r\n    const dispatch = useDispatch()\r\n    const {userID} = useParams()\r\n    const [message, setMessageText] = useState('')\r\n\r\n    const isBlack = useSelector(getIsBlackSelector)\r\n    const dialogUserData = useSelector((state) => getDialogInfoSelector(state, userID))\r\n\r\n    if(!userID) return NoDialogSelected\r\n\r\n    if(!dialogUserData[0]) return <NotFound/>\r\n\r\n\r\n\r\n    return (<DialogStyled className={DialogMod.dialogWithUser} black={isBlack}>\r\n                <DialogHeader className={DialogMod.dialogHeader} black={isBlack}>\r\n                    <img src={dialogUserData[0]?.photos.small || dialogUserData[0]?.photos.large || Avatar}\r\n                         alt=\"avatar\"\r\n                         className={DialogMod.Dialogavatar}\r\n                    />\r\n\r\n                    <div>\r\n                        <NavLink to={\"/profile/\"+userID}><h3>{dialogUserData[0].userName}</h3></NavLink>\r\n                        <div className={DialogMod.status  + \" last\"}>\r\n                            Was online: {dialogUserData[0]?.lastUserActivityDate.split(\"T\").join(\" \").slice(0, 16)}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={DialogMod.backToDialogList}>\r\n                        <NavLink to=\"/dialogs\">\r\n                            <CloseCircleOutlined />\r\n                        </NavLink>\r\n                    </div>\r\n                </DialogHeader>\r\n\r\n                <Messages dialogId={userID}/>\r\n\r\n\r\n                <MessageEditor className={DialogMod.createNewMessage} black={isBlack}>\r\n                    <textarea name={\"newMessage\"} placeholder={\"New message\"}\r\n                              value={message}\r\n                              onKeyPress={event => {\r\n                                  if(event.key === 'Enter' && message !== ''){\r\n                                      event.preventDefault()\r\n                                      dispatch(sendMessagesThunkCreator(userID, message))\r\n                                      setMessageText('')\r\n                                  }\r\n                              }}\r\n                              onChange={(e) => setMessageText(e.target.value)}\r\n                              />\r\n\r\n                    <div className={DialogMod.createNewMessageAcivities}>\r\n                        <button\r\n                            className={MyPost.button + \" \" + MyPost.send}\r\n                            onClick={() =>{\r\n                                setMessageText(\"\")\r\n                                dispatch(sendMessagesThunkCreator(userID, message))\r\n                            }}\r\n                            disabled={message.trim() === \"\"}><SendOutlined /></button>\r\n                    </div>\r\n                </MessageEditor>\r\n             </DialogStyled>);\r\n\r\n};\r\n","import React, {useState} from 'react';\r\nimport DialogsStyles from \"./DialogsList.module.css\";\r\nimport Avatar from \"../../../img/Profile/avatar.png\";\r\nimport styled from \"styled-components\";\r\nimport {SearchOutlined} from '@ant-design/icons';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\n\r\n\r\nconst DialogListStyled = styled.div`\r\n    background: ${props => (props.black ? '#2B2B2B' : '#ffffff')};\r\n    & input, p {\r\n        color: ${props => (props.black ? '#fff' : '#000')};\r\n    }\r\n\r\n    && a {\r\n        color: ${props => (props.black ? '#ffffff' : '#474B59;')};\r\n    }\r\n    \r\n    & svg {\r\n        color: ${props => (props.black ? '#ffffff' : '#474B59;')};\r\n    }\r\n    \r\n    & h1 {\r\n        color: ${props => (props.black ? '#ffffff' : '#474B59;')};\r\n    }\r\n    \r\n    & h3 {\r\n        color: ${props => (props.black ? '#ffffff' : '#474B59;')};\r\n    }\r\n    \r\n    & h1 svg {\r\n        color: ${props => (props.black ? '#0078D4' : '#474B59;')};\r\n    }\r\n    \r\n    & .dialogListHeader {\r\n      position: relative;\r\n      border-bottom: 1px solid ${props => (props.theme.mode === 'dark' ? '#3C3F41' : 'lightgray')}; \r\n    }\r\n    \r\n   .dialogListHeader>svg {\r\n        position: absolute;\r\n        right: 10px;\r\n        top: 15px;\r\n    }\r\n\r\n`\r\n\r\nconst DialogItemStyled = styled.li`\r\n    cursor: pointer;\r\n    border-bottom: 1px solid  ${props => (props.theme.mode === 'dark' ? '#3C3F41' : 'lightgray')}; \r\n    \r\n    \r\n    &:hover {\r\n        background: ${props => (props.theme.mode === 'dark' ? '#202020' : '#f2f2f2')}; \r\n    }\r\n`\r\n\r\nconst DialogItem = (props) => {\r\n    let path = \"/dialogs/\" + props.id;\r\n\r\n\r\n    return (<DialogItemStyled className={DialogsStyles.DialogItem} onClick={() => props.history.push(path)}>\r\n                <div className={DialogsStyles.avatar}>\r\n                    <img src={props.photos.small || Avatar} alt={\"avatar\"}/>\r\n                </div>\r\n\r\n                <div className={DialogsStyles.dates}>\r\n                    <h3>{props.name}</h3>\r\n\r\n                    <div className={DialogsStyles.lastMessage}>\r\n                        <span>Last message: </span>{props.lastDialogActivityDate}\r\n                        {props.LastMessage}\r\n                    </div>\r\n                </div>\r\n\r\n                 {(props.newMessagesCount > 0) && <div className={DialogsStyles.newMessagesCount + \" \" + DialogsStyles.active}>\r\n                    {props.newMessagesCount}\r\n                 </div>}\r\n            </DialogItemStyled>);\r\n}\r\n\r\nexport const DialogsList = (props) => {\r\n    const history = useHistory()\r\n    const [searchText, setSearchText] = useState('')\r\n\r\n    let dialogsCopied = [...props.dialogs]\r\n\r\n\r\n    if(searchText.trim() !== \"\") {\r\n        dialogsCopied = [...props.dialogs].filter(item => item.userName.toLowerCase().includes(searchText.toLowerCase()))\r\n    }\r\n\r\n    let dialogsElements = dialogsCopied.map((dialog, key) => {\r\n        return <DialogItem name={dialog.userName}\r\n                           key={key} id={dialog.id}\r\n                           lastDialogActivityDate={dialog.lastDialogActivityDate}\r\n                           lastUserActivityDate={dialog.lastUserActivityDate}\r\n                           newMessagesCount={dialog.newMessagesCount}\r\n                           photos={dialog.photos}\r\n                           history={history}\r\n        />\r\n    });\r\n\r\n    return(\r\n        <div className={DialogsStyles.dialogs}>\r\n            <DialogListStyled className={DialogsStyles.dialogList} black={props.black}>\r\n                <div className={'dialogListHeader'}>\r\n                    <div className={DialogsStyles.searchDialog}>\r\n                        <SearchOutlined />\r\n                        <input type=\"text\" placeholder={\"Search dialog\"} onChange={event => setSearchText(event.target.value)}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className={DialogsStyles.contactList}>\r\n                    <ul>\r\n                        {dialogsElements.length ? dialogsElements : <p>No message</p>}\r\n                    </ul>\r\n                </div>\r\n            </DialogListStyled>\r\n        </div>);\r\n}\r\n\r\n\r\nexport default DialogsList;","import React, {useEffect} from 'react';\r\nimport styled from \"styled-components\";\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {getIsBlackSelector} from '../../redux-state/selectors/app-selectors';\r\n\r\nimport { Dialog } from \"./Dialog/Dialog\";\r\nimport {getIsDialogsFetching, getDialogsSelector, getDialogsError} from '../../redux-state/selectors/message-selectors';\r\nimport Preloader from '../assets/preloader/Preloader';\r\nimport DialogsList from \"./DialogList/DialogsList\";\r\nimport {actionsMessages, getDialogsThunkCreator} from '../../redux-state/messageReducer';\r\nimport {NetworkError} from '../common/NetworkError/NetworkError';\r\n\r\n\r\nconst DialogWrap = styled.div`\r\n    display: flex;\r\n`\r\n\r\n\r\nexport const Dialogs: React.FC = () => {\r\n    const dispatch = useDispatch()\r\n    const isBlack = useSelector(getIsBlackSelector)\r\n    const isDialogFetching = useSelector(getIsDialogsFetching)\r\n    const dialogs = useSelector(getDialogsSelector)\r\n    const error = useSelector(getDialogsError)\r\n\r\n\r\n    useEffect(() =>{\r\n        dispatch(getDialogsThunkCreator())\r\n\r\n        return () => {\r\n            dispatch(actionsMessages.getDialogsAC(null))\r\n        }\r\n    }, [dispatch])\r\n\r\n    if(error) return <NetworkError refresh={() => dispatch(getDialogsThunkCreator())}/>\r\n\r\n    if(dialogs === null || isDialogFetching) return <Preloader/>\r\n\r\n    return (<DialogWrap>\r\n                <DialogsList black={isBlack} dialogs={dialogs}/>\r\n                <Dialog/>\r\n            </DialogWrap>)\r\n}\r\n\r\nexport default Dialogs","import React from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport Navmod from './nav.module.css';\r\nimport {NavigationStyle} from '../../styles/theme';\r\nimport {IdcardOutlined, UsergroupAddOutlined, MessageOutlined, SettingOutlined, WechatOutlined} from '@ant-design/icons';\r\nimport {useSelector} from 'react-redux';\r\nimport {getIsLoginedSelector} from '../../redux-state/selectors/login-selectors';\r\n\r\nconst Nav: React.FC = () => {\r\n    const isLogined = useSelector(getIsLoginedSelector)\r\n\r\n    if(!isLogined) return null\r\n\r\n    return (<nav>\r\n        <NavigationStyle className={Navmod.navigation}>\r\n            <ul>\r\n                <NavLink to=\"/profile\" activeClassName={Navmod.activeLink}>\r\n                    <li><IdcardOutlined /></li>\r\n                </NavLink>\r\n\r\n                <NavLink to=\"/friends\" activeClassName={Navmod.activeLink}>\r\n                    <li><UsergroupAddOutlined /></li>\r\n                </NavLink>\r\n\r\n                <NavLink to=\"/dialogs\" activeClassName={Navmod.activeLink}>\r\n                    <li><MessageOutlined /></li>\r\n                </NavLink>\r\n\r\n                <NavLink to=\"/chat\" activeClassName={Navmod.activeLink}>\r\n                    <li><WechatOutlined /></li>\r\n                </NavLink>\r\n\r\n                <NavLink to=\"/setting\" activeClassName={Navmod.activeLink}>\r\n                    <li><SettingOutlined /></li>\r\n                </NavLink>\r\n            </ul>\r\n        </NavigationStyle>\r\n    </nav>);\r\n}\r\n\r\nexport default Nav;","import styled from 'styled-components';\r\n\r\nexport const VerticalAlign = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n`","import React from 'react';\r\nimport headermod from './header.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {SwitchButton} from '../Nav/adaptiveNav';\r\nimport Nav from '../Nav/nav';\r\nimport {Avatar} from '../assets/avatar/avatar';\r\nimport {VerticalAlign} from '../../styles/vertical.align';\r\nimport {HeaderStyle} from '../../styles/theme';\r\n\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {\r\n    getIsLoginedSelector,\r\n    getLoginSelector,\r\n    getMyProfileSelector\r\n} from '../../redux-state/selectors/login-selectors';\r\n\r\nimport {getNewMessagesCountSelector} from '../../redux-state/selectors/notification-selector';\r\nimport {logout} from '../../redux-state/loginReducer';\r\nimport {actionsApp} from '../../redux-state/appReducer';\r\nimport {AliwangwangOutlined, LogoutOutlined, BellOutlined, SwapOutlined} from '@ant-design/icons';\r\n\r\n\r\n//todo: fdsf\r\n\r\nconst Header: React.FC = () => {\r\n    const login = useSelector(getLoginSelector)\r\n    const isLogined = useSelector(getIsLoginedSelector)\r\n    const profile = useSelector(getMyProfileSelector)\r\n    const newMessageCount = useSelector(getNewMessagesCountSelector)\r\n\r\n    //Dispatch hooks\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    return (<header className={headermod.Header}>\r\n        <HeaderStyle>\r\n            <div className={headermod.headerWrap}>\r\n                <div className={headermod.leftside}>\r\n                    <NavLink to=\"/profile\"  className={headermod.logo}><h1><AliwangwangOutlined />Uface</h1></NavLink>\r\n                    <div style={{'marginTop': '5px'}}>\r\n                        <SwitchButton onClick={() => dispatch(actionsApp.ChangeThemeAC())}>\r\n                            <SwapOutlined />\r\n                        </SwitchButton>\r\n                    </div>\r\n\r\n                    <Nav/>\r\n                </div>\r\n\r\n                <div className={headermod.rightside}>\r\n\r\n                    <div className={headermod.note + ' ' + headermod.hide + ' ' + headermod.messages}>\r\n                        <BellOutlined />\r\n                        {newMessageCount > 0 && <span className={headermod.newMessageCount}>{newMessageCount}</span>}\r\n                    </div>\r\n\r\n                    <h3>{isLogined ?\r\n                        <VerticalAlign>{login}<Avatar link={profile ? profile.photos.small : null}\r\n                                                      size={30}/></VerticalAlign> :\r\n                        <NavLink exact={true} to=\"/login\">Please sign in</NavLink>}</h3>\r\n\r\n                    {isLogined && <div className={headermod.note + ' ' + headermod.logout} onClick={() => {\r\n                        dispatch(logout());\r\n                    }}>\r\n                        <LogoutOutlined />\r\n                    </div>}\r\n                </div>\r\n            </div>\r\n        </HeaderStyle>\r\n    </header>);\r\n}\r\n\r\nexport default Header;","import styled from 'styled-components'\r\n\r\ntype WrappersTabs = {\r\n    maxWidth?: number,\r\n}\r\n\r\nexport const UniversalWrap = styled.div<WrappersTabs>`\r\n    max-width: 600px;\r\n    margin: 0 auto;\r\n    max-width: ${props => props.maxWidth}px;\r\n`","import {AppStateType} from '../stateRedux';\r\n\r\nexport const getProfileSelector = (state: AppStateType) => (state.ProfilePage.profile)\r\nexport const getIsProfileFetching = (state: AppStateType) => (state.ProfilePage.isFetching)\r\nexport const getMyPostsSelector = (state: AppStateType) => (state.ProfilePage.PostsData)\r\nexport const getStatusSelector = (state: AppStateType) => (state.ProfilePage.status)\r\nexport const getProfileErrorSelector = (state: AppStateType) => (state.ProfilePage.setProfileErrors)\r\nexport const getIsFollowedSelector = (state: AppStateType) => (state.ProfilePage.isFollowed)\r\n","import React from 'react'\r\nimport {UniversalThemeComponent} from '../../../styles/theme';\r\nimport {ErrorMessage, Formik} from 'formik';\r\nimport Styles from '../setting.module.css'\r\nimport {ProfileType} from '../../../interfaces/profile-interfaces';\r\nimport  {Checkbox, Form, Input, SubmitButton, ResetButton } from 'formik-antd'\r\nimport * as Yup from 'yup';\r\nimport {message} from 'antd';\r\nimport { ProfileAPI } from '../../../api/profile-api';\r\nimport {ResultsCodes} from '../../../interfaces/common-interfaces';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\ntype PropsType = {\r\n    profile: ProfileType\r\n}\r\n\r\nconst DisplayingErrorMessagesSchema = Yup.object().shape({\r\n    aboutMe: Yup.string()\r\n        .min(2, 'Too Short!')\r\n        .max(50, 'Too Long!')\r\n        .required('Required'),\r\n    fullName: Yup.string()\r\n        .min(2, 'Too Short!')\r\n        .max(50, 'Too Long!')\r\n        .required('Required'),\r\n    lookingForAJobDescription: Yup.string()\r\n        .min(2, 'Too Short!')\r\n        .max(50, 'Too Long!'),\r\n});\r\n\r\nmessage.config({\r\n    top: 75,\r\n    duration: 4\r\n})\r\n\r\n\r\nexport const renderField = (name: string) =>{\r\n    return (<div className={Styles.formItem} key={name}>\r\n                <Form.Item name={name} label={name} style={{'marginBottom': '9px'}}>\r\n                    <Input type=\"text\" name={name} placeholder={name}/>\r\n                </Form.Item>\r\n             </div>)\r\n}\r\n\r\n\r\nexport const UpdateProfileForm: React.FC<PropsType> = ({profile}) => {\r\n    const {aboutMe, fullName, lookingForAJobDescription, lookingForAJob} = profile\r\n    const {t} = useTranslation()\r\n\r\n\r\n    return (<Formik\r\n                initialValues={{aboutMe, fullName, lookingForAJobDescription, lookingForAJob}}\r\n                enableReinitialize\r\n                validationSchema={DisplayingErrorMessagesSchema}\r\n                onSubmit={(values, { setSubmitting}) => {\r\n                    setSubmitting(true)\r\n                    ProfileAPI.putProfileData({...profile, ...values})\r\n                        .then(res => {\r\n                            if(res.data.resultCode === ResultsCodes.Success) {\r\n                                message.success('Success', 1)\r\n                            }else {\r\n                                message.error(res.data.messages.join(' '))\r\n                            }\r\n                    }).catch(e => message.error(e)).finally(() => setSubmitting(false))\r\n                }}\r\n            >\r\n                {({ isSubmitting ,...props}) => (\r\n                    <Form layout={'vertical'}\r\n                    >\r\n\r\n                        <UniversalThemeComponent className={Styles.item}>\r\n                            <h2>{t('settings.profile')}</h2>\r\n\r\n                            {Object.keys({aboutMe, fullName, lookingForAJobDescription}).map(renderField)}\r\n\r\n                            <div className={Styles.formItem}>\r\n                                <Checkbox name={'lookingForAJob'}>Looking for a job</Checkbox>\r\n                                <ErrorMessage name={'lookingForAJob'} component=\"div\" />\r\n                            </div>\r\n\r\n                            <div className={Styles.buttons}>\r\n                                <ResetButton size={'large'}>{t('settings.reset')}</ResetButton>\r\n                                <SubmitButton size={'large'} disabled={isSubmitting}>{t('settings.send')}</SubmitButton>\r\n                            </div>\r\n                        </UniversalThemeComponent>\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n        )\r\n}","import React from 'react';\r\nimport {Formik} from 'formik';\r\nimport {Form, ResetButton, SubmitButton} from 'formik-antd';\r\nimport {UniversalThemeComponent} from '../../../styles/theme';\r\nimport Styles from '../setting.module.css';\r\nimport {renderField} from './update-profile-form';\r\nimport {ProfileType} from '../../../interfaces/profile-interfaces';\r\nimport * as Yup from 'yup';\r\nimport {IKeys, ResultsCodes} from '../../../interfaces/common-interfaces';\r\nimport {ProfileAPI} from '../../../api/profile-api';\r\nimport {message} from 'antd';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\n\r\ntype PropsType = {\r\n    profile: ProfileType\r\n}\r\n\r\nexport const UpdateContactForm: React.FC<PropsType> = ({profile}) => {\r\n    const {contacts} = profile\r\n\r\n    const {t} = useTranslation()\r\n\r\n    const validationScheme: IKeys = {}\r\n    for (let key in contacts) {\r\n        validationScheme[key] = Yup.string().url('Must be url').nullable()\r\n    }\r\n\r\n\r\n    const DisplayingErrorMessagesSchema = Yup.object().shape(validationScheme)\r\n\r\n    return (<Formik\r\n            initialValues={contacts}\r\n            enableReinitialize\r\n            validationSchema={DisplayingErrorMessagesSchema}\r\n            onSubmit={(values, {setSubmitting}) => {\r\n                setSubmitting(true)\r\n                ProfileAPI.putProfileData({...profile, contacts: {...values}})\r\n                    .then(res => {\r\n                        if (res.data.resultCode === ResultsCodes.Success) {\r\n                            message.success('Success', 1)\r\n                        } else {\r\n                            message.error(res.data.messages.join(' '))\r\n                        }\r\n                    }).catch(e => message.error(e)).finally(() => setSubmitting(false))\r\n            }}\r\n        >\r\n            {({isSubmitting}) => (\r\n                <Form layout={'vertical'}\r\n                >\r\n                    <UniversalThemeComponent className={Styles.item}>\r\n                        <h2>{t('settings.contacts')}</h2>\r\n\r\n                        {Object.keys(contacts).map(renderField)}\r\n                        <div className={Styles.buttons}>\r\n                            <ResetButton size={'large'}>{t('settings.reset')}</ResetButton>\r\n                            <SubmitButton disabled={isSubmitting} size={'large'}>{t('settings.send')}</SubmitButton>\r\n                        </div>\r\n\r\n                    </UniversalThemeComponent>\r\n\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n}","import React, {useEffect} from 'react';\r\n\r\nimport Set from './setting.module.css';\r\nimport {UniversalWrap} from '../../styles/wrap.styles';\r\nimport {SettingStyled} from '../../styles/theme';\r\n\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {getProfileErrorSelector, getProfileSelector} from '../../redux-state/selectors/profile-selector';\r\nimport {getMyIdSelector} from '../../redux-state/selectors/login-selectors';\r\nimport {getProfileThunkCreator} from '../../redux-state/profileReducer';\r\nimport Preloader from '../assets/preloader/Preloader';\r\nimport {UpdateProfileForm} from './UpdateProfile/update-profile-form';\r\nimport {Tabs} from 'antd';\r\nimport {PhoneOutlined, ProfileOutlined} from '@ant-design/icons';\r\nimport {UpdateContactForm} from './UpdateProfile/update-contact-form';\r\nimport {NetworkError} from '../common/NetworkError/NetworkError';\r\nimport {useWindowWidthSize} from '../../hook/Resize';\r\n\r\n\r\nconst {TabPane} = Tabs\r\n\r\n\r\nconst Setting: React.FC = () => {\r\n    const profile = useSelector(getProfileSelector)\r\n    const id = useSelector(getMyIdSelector)\r\n    const error = useSelector(getProfileErrorSelector)\r\n    const windowsWidth = useWindowWidthSize()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    useEffect(() => {\r\n        document.title = 'Setting';\r\n        if (id !== null) {\r\n            dispatch(getProfileThunkCreator(id));\r\n        }\r\n\r\n    }, [dispatch, id])\r\n\r\n    if(error && id !== null) {\r\n        return <NetworkError refresh={() =>  dispatch(getProfileThunkCreator(id))}/>\r\n    }\r\n\r\n    console.log(windowsWidth)\r\n\r\n    if (profile === null) return <Preloader/>\r\n\r\n    return (<UniversalWrap maxWidth={700}>\r\n        <SettingStyled >\r\n            <Tabs defaultActiveKey='profile' tabPosition={windowsWidth > 720 ? 'left' : 'top'} className={Set.wrap}>\r\n                <TabPane tab={\r\n                    <div className={Set.tab}>\r\n                        <ProfileOutlined/>\r\n\r\n                    </div>\r\n                } key={'profile'}\r\n                >\r\n                    <UpdateProfileForm profile={profile}/>\r\n                </TabPane>\r\n                <TabPane tab={\r\n                    <div className={Set.tab}>\r\n                        <PhoneOutlined/>\r\n                    </div>\r\n\r\n                } key={'contacts'}>\r\n                    <UpdateContactForm profile={profile}/>\r\n                </TabPane>\r\n            </Tabs>\r\n        </SettingStyled>\r\n    </UniversalWrap>)\r\n}\r\n\r\nexport default Setting;\r\n\r\n\r\n\r\n\r\n\r\n","import React, {useState, useEffect} from 'react';\r\nimport styles from './status.module.css';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {updateStatusThunkCreator} from '../../../../redux-state/profileReducer';\r\nimport {getStatusSelector} from '../../../../redux-state/selectors/profile-selector';\r\n\r\n\r\nconst StatusHook: React.FC<{ amI: boolean }> = (props) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const [edit, setEdit] = useState(false);\r\n\r\n    const userStatus = useSelector(getStatusSelector)\r\n    const [status, setStatus] = useState(userStatus);\r\n\r\n    useEffect(() => {\r\n        setStatus(userStatus)\r\n    }, [userStatus])\r\n\r\n\r\n    let activateEditMode = () => {\r\n        if (props.amI) {\r\n            setEdit(true)\r\n        }\r\n    }\r\n\r\n    let deactivateEditMode = () => {\r\n        if (props.amI) {\r\n            setEdit(false)\r\n            if(status!== null) dispatch(updateStatusThunkCreator(status))\r\n        }\r\n    }\r\n\r\n\r\n    let onStatusChange = (e: any) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n\r\n\r\n    return <>{!edit ?\r\n        <span>\r\n                      <span onDoubleClick={activateEditMode}>{status || 'Status'}</span>\r\n                  </span>\r\n        :\r\n        <span>\r\n                      <input onChange={onStatusChange}\r\n                             autoFocus={true}\r\n                             className={styles.Input}\r\n                             onBlur={deactivateEditMode}\r\n                             type=\"text\"\r\n                             value={status as string}\r\n                             maxLength={300}/>\r\n\r\n                      <div className={styles.EditMode}>Edit mode</div>\r\n                  </span>}\r\n    </>\r\n}\r\n\r\nexport default StatusHook;","import React from 'react';\r\nimport galleryStyle from './gallery.module.css';\r\nimport {CloseCircleOutlined, CloudUploadOutlined } from '@ant-design/icons';\r\n\r\ntype ownProps = {\r\n    setShowGallery: (payload: boolean) => void\r\n    uploadPhoto: (payload: any) => void\r\n    amI: boolean\r\n    img: string\r\n}\r\nconst Gellery: React.FC<ownProps> = props => {\r\n    let clickOnWrap = (event: any) => {\r\n        if(event.target.id !== null) {\r\n            if (event.target.id !== '') props.setShowGallery(false)\r\n        }\r\n    }\r\n\r\n    return (<div className={galleryStyle.Wrap}>\r\n        <div className={galleryStyle.ContentWrapper} onClick={clickOnWrap} id={'wrap'}>\r\n            <div className={galleryStyle.Content}>\r\n                <div className={galleryStyle.Header}>\r\n                    <div onClick={() => props.setShowGallery(false)}><CloseCircleOutlined /></div>\r\n\r\n                    {props.amI && <div>\r\n                        <label htmlFor=\"avatar\">\r\n                            <CloudUploadOutlined />\r\n                            <input type=\"file\" id=\"avatar\" onInput={props.uploadPhoto} style={{display: 'none'}}/>\r\n                        </label>\r\n                    </div>}\r\n                </div>\r\n                <img src={props.img} alt=\"gallery\"/>\r\n            </div>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nexport default Gellery;\r\n","import React, {useState} from 'react'\r\nimport p from '../profile.module.css';\r\nimport UsersStlyes from '../../Users/Users.module.css'\r\nimport Status from './status/statusHook';\r\nimport profileAvatar from '../../../img/Profile/avatar.png';\r\nimport {ProfileItemStyled} from '../../../styles/theme';\r\nimport {ProfileType} from '../../../interfaces/profile-interfaces';\r\nimport {useDispatch} from 'react-redux';\r\nimport {uploadAvatarThunkCreator} from '../../../redux-state/profileReducer';\r\nimport Gellery from '../../common/gallery/gallery';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {\r\n    ExceptionOutlined,\r\n    FileSearchOutlined,\r\n    SmileOutlined,\r\n    FacebookOutlined,\r\n    DribbbleOutlined,\r\n    IeOutlined,\r\n    TwitterOutlined,\r\n    InstagramOutlined,\r\n    YoutubeOutlined,\r\n    GithubOutlined,\r\n    LinkedinOutlined,\r\n    CloudUploadOutlined, MessageOutlined\r\n} from '@ant-design/icons';\r\nimport { startChatingThunkCreator } from '../../../redux-state/messageReducer';\r\nimport { Redirect } from 'react-router-dom';\r\nimport {followThunkCreator, unfollowThunkCreator} from '../../../redux-state/usersReducer';\r\n\r\n\r\n\r\ntype ownProps = {\r\n    profile: ProfileType,\r\n    myId: string | number | null,\r\n    isRedirectToDialog: boolean,\r\n    isFollowed: boolean,\r\n    followProcces: number[]\r\n}\r\nconst ProfileInfo: React.FC<ownProps> = ({profile,\r\n                                             myId,\r\n                                             isRedirectToDialog,\r\n                                             isFollowed,\r\n                                             followProcces\r\n                                         }) => {\r\n    const dispatch = useDispatch()\r\n    const { t } = useTranslation();\r\n\r\n    let hasContact = false;\r\n    let amI: boolean = profile.userId === myId;\r\n\r\n\r\n    const {contacts} = profile\r\n\r\n    for (let key in contacts) {\r\n        //@ts-ignore\r\n        if (contacts[key] !== null && contacts[key] !== '') {\r\n            hasContact = true;\r\n        }\r\n    }\r\n\r\n    let [showGallery, setShowGallery] = useState(false)\r\n\r\n    let normalizeLink = (link: string) => {\r\n        if (link.match('https://') || link.match('http://')) {\r\n            return link;\r\n        } else {\r\n            return '//' + link;\r\n        }\r\n    }\r\n\r\n    let uploadPhoto = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if(e.target.files !== null){\r\n            dispatch(uploadAvatarThunkCreator((e.target.files[0])));\r\n        }\r\n    }\r\n\r\n    let Gallery = () => {\r\n        if (profile.photos.large || profile.photos.small) {\r\n            setShowGallery(true)\r\n        }\r\n    }\r\n\r\n    if (isRedirectToDialog) {\r\n        return <Redirect to={'/dialogs/' + profile.userId}/>\r\n    }\r\n\r\n    return (<div className={p.profileWrap}>\r\n            <div className={p.photowrap}></div>\r\n\r\n            <ProfileItemStyled className={p.information}>\r\n                {amI && <div className={p.avatarWrap}>\r\n                    <div className={p.changeAvatarContainer}>\r\n                        <img src={profile.photos.large || profileAvatar}\r\n                             className={p.avatar}\r\n                             alt=\"Avatar\" onClick={Gallery}/>\r\n\r\n                        <label htmlFor=\"avatar\" className={p.changeAvatar}>\r\n                            <div className={p.AvatarControl}>\r\n                                <CloudUploadOutlined />\r\n                                <input type=\"file\" id=\"avatar\" onInput={uploadPhoto} style={{display: 'none'}}/>\r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                </div>}\r\n\r\n                {!amI && <div className={p.avatarWrap}>\r\n\r\n                    <img src={profile.photos.large || profileAvatar}\r\n                         className={p.avatar} style={{border: '3px solid #fff'}}\r\n                         alt=\"Avatar\" onClick={Gallery}/>\r\n\r\n                </div>}\r\n\r\n                <div className={p.info}>\r\n                    <h2>{profile.fullName}</h2>\r\n\r\n                    <ul className={p.about}>\r\n                        <li>\r\n                            <span className={p.infoItem}><SmileOutlined /></span>\r\n                            <Status amI={amI}/>\r\n                        </li>\r\n\r\n                        {profile.aboutMe && <li>\r\n                            <span className={p.infoItem}><ExceptionOutlined /></span>\r\n                            {profile.aboutMe}\r\n                        </li>}\r\n\r\n                        {profile.lookingForAJob && <li>\r\n                            <span className={p.infoItem}><FileSearchOutlined /></span>\r\n                            <b>{t('profile.lookingJob')}</b>\r\n\r\n                            <p className={p.description}>{profile.lookingForAJobDescription}</p>\r\n                        </li>}\r\n\r\n                    </ul>\r\n                </div>\r\n\r\n                {!amI && <div className={p.Activity}>\r\n\r\n                    {isFollowed ?\r\n                        <button disabled={followProcces.some((item: number) => item === profile.userId)}\r\n                                className={UsersStlyes.follower + ' ' + p.ActivityButtons + ' ' + p.Unfollow}\r\n                                onClick={() => {\r\n\r\n                                    dispatch(unfollowThunkCreator(profile.userId, true))\r\n                                }}>Unfollow</button> :\r\n                        <button disabled={followProcces.some((item: number) => item === profile.userId)}\r\n                                className={UsersStlyes.follower + ' ' + p.ActivityButtons}\r\n                                onClick={() => {\r\n                                    dispatch(followThunkCreator(profile.userId, true))\r\n                                }}>follow</button>}\r\n\r\n                    <button onClick={() => dispatch(startChatingThunkCreator(profile.userId))} className={p.Mail}>\r\n                        <MessageOutlined />\r\n                    </button>\r\n\r\n\r\n                </div>}\r\n            </ProfileItemStyled>\r\n\r\n            {hasContact && <ProfileItemStyled className={p.information + ' ' + p.contacts}>\r\n                <ul>\r\n                    {contacts.facebook && <li>\r\n                        <a href={normalizeLink(contacts.facebook)} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            <FacebookOutlined />\r\n                        </a>\r\n                    </li>}\r\n\r\n                    {contacts.website && <li>\r\n                        <a href={normalizeLink(contacts.website)} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            <DribbbleOutlined />\r\n                        </a>\r\n                    </li>}\r\n\r\n                    {contacts.vk && <li><a href={normalizeLink(contacts.vk)} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                <IeOutlined />\r\n                        </a>\r\n                    </li>}\r\n\r\n                    {contacts.twitter && <li>\r\n                        <a href={normalizeLink(contacts.twitter)} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            <TwitterOutlined />\r\n                        </a>\r\n                    </li>}\r\n\r\n                    {contacts.instagram && <li>\r\n                        <a href={normalizeLink(contacts.instagram)} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            <InstagramOutlined />\r\n                        </a>\r\n                    </li>}\r\n\r\n                    {contacts.youtube && <li>\r\n                        <a href={normalizeLink(contacts.youtube)} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            <YoutubeOutlined />\r\n                        </a>\r\n                    </li>}\r\n\r\n                    {contacts.github && <li>\r\n                        <a href={normalizeLink(contacts.github)} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            <GithubOutlined />\r\n                        </a>\r\n                    </li>}\r\n\r\n                    {contacts.mainLink && <li>\r\n                        <a href={normalizeLink(contacts.mainLink)} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            <LinkedinOutlined />\r\n                        </a>\r\n                    </li>}\r\n                </ul>\r\n            </ProfileItemStyled>}\r\n\r\n            {showGallery &&\r\n            <Gellery img={profile.photos.large as string} setShowGallery={setShowGallery} amI={amI} uploadPhoto={uploadPhoto}/>}\r\n\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProfileInfo;","import React from 'react';\r\nimport post from './post.module.css';\r\nimport Avatar from './../../../../img/Profile/avatar.png';\r\nimport {PostsItemStyled} from '../../../../styles/theme';\r\nimport {photosT, PostDataType} from '../../../../interfaces/profile-interfaces';\r\nimport {RetweetOutlined, MessageOutlined, LikeOutlined} from '@ant-design/icons';\r\n\r\ntype ownProps = {\r\n    name: string,\r\n    photos: photosT\r\n}\r\n\r\nconst Post: React.FC<PostDataType & ownProps> = (props) => {\r\n\r\n    return (\r\n        <PostsItemStyled className={post.item}>\r\n            <div className={post.postHeder}>\r\n                <img src={props.photos.small || props.photos.large || Avatar} alt=\"avatar\"/>\r\n\r\n                <div>\r\n                    <h2>{props.name}</h2>\r\n                    <div className={post.date}>{props.dataSend}</div>\r\n                </div>\r\n\r\n                <div className={post.postSetting}>\r\n                    <i className=\"fas fa-ellipsis-h\"></i>\r\n                    {/*<i className=\"fas fa-sliders-h\"></i>*/}\r\n                </div>\r\n            </div>\r\n            <div className={post.content + ' Content'}>\r\n                {props.content}\r\n            </div>\r\n\r\n            <div className={post.activity}>\r\n                <div className={post.likes}><LikeOutlined /> {props.likes}</div>\r\n                <div className=\"shares\"><RetweetOutlined /> {props.rep}</div>\r\n                <div className=\"comments\"><MessageOutlined /> {props.comm}</div>\r\n            </div>\r\n        </PostsItemStyled>\r\n\r\n    );\r\n}\r\n\r\nexport default Post;","import React, {useState} from 'react';\r\nimport MyPost from './MyPosts.module.css';\r\nimport Post from './post/post';\r\n// @ts-ignore\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport {PostsItemStyled} from '../../../styles/theme';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {\r\n    getMyPostsSelector,\r\n} from '../../../redux-state/selectors/profile-selector';\r\nimport {actionsProfile} from '../../../redux-state/profileReducer';\r\nimport {ProfileType} from '../../../interfaces/profile-interfaces';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {SendOutlined} from '@ant-design/icons';\r\n\r\ntype ownProps = {\r\n    profile: ProfileType\r\n}\r\nconst MyPosts: React.FC<ownProps> = ({profile}) => {\r\n\r\n    const [value, changeVal] = useState('');\r\n    const [isDisabled, changeDisabled] = useState(true);\r\n    const [symbols, setSymbols] = useState(0);\r\n\r\n    const dispatch = useDispatch()\r\n    const PostsData = useSelector(getMyPostsSelector)\r\n    const { t } = useTranslation();\r\n\r\n    let addNewPost = () => {\r\n        if (value !== '') {\r\n            changeVal('');\r\n            changeDisabled(true);\r\n            dispatch(actionsProfile.addNewPostAC(value))\r\n            setSymbols(0)\r\n        }\r\n    }\r\n\r\n    let postHandler = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        changeVal(e.target.value);\r\n        setSymbols(e.target.value.length)\r\n\r\n        if (e.target.value !== '') {\r\n            changeDisabled(false)\r\n        } else {\r\n            changeDisabled(true)\r\n        }\r\n    }\r\n\r\n    let PostsElements = PostsData.map((currentValue, index) =>\r\n        (<Post key={index.toString()} {...currentValue} name={profile.fullName} photos={profile.photos}\r\n    />)).reverse()\r\n    return (\r\n        <div className={MyPost.myposts}>\r\n            <div className=\"postwrap\">\r\n                <PostsItemStyled className={MyPost.newpost}>\r\n                    <TextareaAutosize value={value} onChange={postHandler} placeholder={t('profile.create-post')}\r\n                                      autoComplete={'off'} wrap={'hard'}/>\r\n                    <div className={MyPost.createnewpost}>\r\n                        <span>{t('profile.symbols')}: {symbols}</span>\r\n                        <div>\r\n                            <button className={MyPost.button + ' ' + MyPost.send} disabled={isDisabled}\r\n                                    onClick={addNewPost}>\r\n                                <SendOutlined /></button>\r\n                        </div>\r\n                    </div>\r\n                </PostsItemStyled>\r\n\r\n                <div className=\"news\">\r\n                    {PostsElements}\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default MyPosts;","import {AppStateType} from '../stateRedux';\r\n\r\n\r\nexport const getUsersSelector = (state: AppStateType) => state.UsersReducer.users;\r\nexport const getPageSizeSelector = (state: AppStateType) => state.UsersReducer.pageSize;\r\nexport const getTotalUsersCountSelector = (state: AppStateType) => state.UsersReducer.totalUsersCount;\r\nexport const getCurrentPageSelector = (state: AppStateType) => state.UsersReducer.currentPage;\r\nexport const getIsFetchingSelector = (state: AppStateType) => state.UsersReducer.isFetching;\r\nexport const getPagePagitator = (state: AppStateType) => state.UsersReducer.currentPagePagitator;\r\nexport const getFollowProccesSelector = (state: AppStateType) => state.UsersReducer.followProcess;\r\nexport const getIsLoginedSelector = (state: AppStateType) => state.LoginReducer.isLogined;\r\nexport const getUsersErrorSelector = (state: AppStateType) => state.UsersReducer.error","import React, {useEffect} from 'react';\r\nimport p from './profile.module.css';\r\nimport ProfileInfo from './ProfileInfo/profileInfo';\r\nimport Preloader from '../assets/preloader/Preloader';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {\r\n    getIsFollowedSelector,\r\n    getIsProfileFetching,\r\n    getProfileErrorSelector,\r\n    getProfileSelector\r\n} from '../../redux-state/selectors/profile-selector';\r\nimport {getMyIdSelector} from '../../redux-state/selectors/login-selectors';\r\nimport MyPosts from './MyPosts/MyPosts';\r\nimport {useParams, useHistory} from 'react-router-dom'\r\nimport {getProfileThunkCreator, getStatusThunkCreator, actionsProfile} from '../../redux-state/profileReducer';\r\nimport {useRedirect} from '../../hook/Redirect';\r\nimport { NetworkError } from '../common/NetworkError/NetworkError';\r\nimport {getIsRedirectToDialog} from '../../redux-state/selectors/message-selectors';\r\nimport {actionsMessages} from '../../redux-state/messageReducer';\r\nimport {getFollowProccesSelector} from '../../redux-state/selectors/users-selectors';\r\n\r\n\r\nconst Profile = () => {\r\n\r\n    const isFetching = useSelector(getIsProfileFetching)\r\n    const profile = useSelector(getProfileSelector)\r\n    const error = useSelector(getProfileErrorSelector)\r\n    const myId = useSelector(getMyIdSelector)\r\n    const isRedirectToDialog = useSelector(getIsRedirectToDialog)\r\n    const isFollowed = useSelector(getIsFollowedSelector)\r\n    const followProcces = useSelector(getFollowProccesSelector)\r\n\r\n    const params = useParams<{userID: string}>()\r\n    const history = useHistory()\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    useRedirect()\r\n\r\n    const setProfile = () => {\r\n        let userID: string | number | null = params.userID;\r\n\r\n        if (!userID) {\r\n            userID = myId;\r\n\r\n            if (!userID) {\r\n                history.push('/login')\r\n                return\r\n            }\r\n        }\r\n\r\n        dispatch(getProfileThunkCreator(+userID));\r\n        dispatch(getStatusThunkCreator(+userID));\r\n    }\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(actionsProfile.setProfile(null));\r\n            dispatch(actionsMessages.setRedirectedToDialog(false))\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() =>{\r\n        document.title = 'Profile';\r\n        setProfile();\r\n    }, [params])\r\n\r\n    if(error) {\r\n        return <NetworkError refresh={setProfile}/>\r\n    }\r\n\r\n    if (isFetching || profile === null) {\r\n        return (<Preloader/>)\r\n    }\r\n    return (\r\n        <div className={p.profile}>\r\n            <ProfileInfo profile={profile}\r\n                         myId={myId}\r\n                         isRedirectToDialog={isRedirectToDialog}\r\n                         isFollowed={isFollowed}\r\n                         followProcces={followProcces}\r\n            />\r\n\r\n            {profile.userId === myId && <MyPosts profile={profile}/>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Profile;","import {useEffect} from 'react';\r\nimport {useSelector} from 'react-redux';\r\nimport {getIsLoginedSelector} from '../redux-state/selectors/login-selectors';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport const useRedirect = () => {\r\n    const isLogined = useSelector(getIsLoginedSelector)\r\n    const history = useHistory()\r\n\r\n\r\n    if(!isLogined) {\r\n        history.push('/login')\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        if(!isLogined) {\r\n            history.push('/login')\r\n        }\r\n    }, [isLogined])\r\n}","import React from 'react';\r\nimport UsersStlyes from './Users.module.css';\r\nimport AvatarImg from '../../img/Profile/avatar.png';\r\nimport AvatarBlack from '../../img/Profile/avatarBlack.png';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {UserItemStyled} from '../../styles/theme';\r\nimport {Avatar} from '../assets/avatar/avatar';\r\n\r\nimport {UserT} from '../../interfaces/users-interfaces';\r\nimport {useSelector} from 'react-redux';\r\nimport {getIsBlackSelector} from '../../redux-state/selectors/app-selectors';\r\n\r\n\r\ntype PropsType = {\r\n    index: number,\r\n    user: UserT,\r\n    followProcess: Array<number>,\r\n    unfollowThunkCreator: (userID: number) => void,\r\n    followThunkCreator: (userID: number) => void,\r\n    t: (key: string) => string\r\n}\r\n\r\nlet User: React.FC<PropsType> = props => {\r\n    const isBlack = useSelector(getIsBlackSelector)\r\n\r\n    return (<UserItemStyled className={UsersStlyes.item} key={props.index.toString()}>\r\n        <div className={UsersStlyes.header}>\r\n            <Avatar size={100} link={(props.user.photos.small !== null) ? props.user.photos.small : (isBlack ? AvatarBlack: AvatarImg)}/>\r\n        </div>\r\n\r\n        <div className={UsersStlyes.content}>\r\n            <div className={UsersStlyes.name}>\r\n                <NavLink to={'/profile/' + props.user.id}><h2>{props.user.name}</h2></NavLink>\r\n            </div>\r\n\r\n            <div className={UsersStlyes.status}>{props.user.status || 'no status'}</div>\r\n        </div>\r\n\r\n        <div className={UsersStlyes.buttons}>\r\n            {props.user.followed ?\r\n                <button disabled={props.followProcess.some(item => item === props.user.id)}\r\n                        className={'unfollow'}\r\n                        onClick={() => {\r\n                            props.unfollowThunkCreator(props.user.id)\r\n                        }}>{props.t('users.unfollow')}</button> :\r\n                <button disabled={props.followProcess.some(item => item === props.user.id)}\r\n                        onClick={() => {\r\n                            props.followThunkCreator(props.user.id)\r\n                        }}>{props.t('users.follow')}</button>\r\n            }\r\n        </div>\r\n    </UserItemStyled>)\r\n}\r\n\r\n\r\nexport default User;","export default \"data:image/png;base64,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\"","import React, {useEffect} from 'react';\r\nimport UsersStlyes from '../../Users/Users.module.css';\r\nimport {PagitatorItemStyled} from '../../../styles/theme';\r\nimport { LeftOutlined, RightOutlined } from '@ant-design/icons';\r\nimport {IFilters} from '../../../interfaces/common-interfaces';\r\n\r\n\r\ntype PagitatorTypes = {\r\n    totalUsersCount: number,\r\n    pagePagitator: number,\r\n    pageSize: number,\r\n    windowsWidth: number,\r\n    currentPage: number,\r\n    setCurrentPagePagitator: (count: number) => void,\r\n    onPageChange: (a: number) => void,\r\n    filters: IFilters\r\n}\r\n\r\nexport const Pagitator: React.FC<PagitatorTypes> = ({\r\n                                                        totalUsersCount,\r\n                                                        pagePagitator,\r\n                                                        pageSize,\r\n                                                        currentPage,\r\n                                                        setCurrentPagePagitator,\r\n                                                        onPageChange,\r\n                                                        windowsWidth,\r\n                                                        filters\r\n                                                    }) => {\r\n    let pageCount = Math.ceil(totalUsersCount / pageSize);\r\n    let pages: Array<number> = [];\r\n    let portion;\r\n\r\n    if (windowsWidth <= 720) {\r\n        portion = 6;\r\n    } else {\r\n        portion = 9;\r\n    }\r\n\r\n    let count = pagePagitator;\r\n\r\n    let left = count * portion + 1;\r\n    let right = left + portion - 1;\r\n\r\n\r\n    for (let i = 1; i <= pageCount; i++) {\r\n        pages.push(i);\r\n    }\r\n\r\n    let leftShift = () => {\r\n        setCurrentPagePagitator(--count)\r\n    }\r\n\r\n    let rightShift = () => {\r\n        setCurrentPagePagitator(++count)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setCurrentPagePagitator(0)\r\n    }, [filters])\r\n\r\n    pages = pages.filter(item => item >= left && item <= right)\r\n\r\n    return (<PagitatorItemStyled className={UsersStlyes.settingPanel}>\r\n        <button className={UsersStlyes.navs + ' navs'} disabled={left <= 1} onClick={leftShift}>\r\n            <LeftOutlined />\r\n        </button>\r\n\r\n        {pages.map((p, index) => {\r\n            return <button onClick={() => {\r\n                onPageChange(p)\r\n            }} className={(currentPage === p && UsersStlyes.active).toString()}\r\n                           key={index.toString()}>{p}</button>\r\n        })}\r\n\r\n        <button className={UsersStlyes.navs + ' navs'} onClick={rightShift} disabled={right >= pageCount}>\r\n            <RightOutlined />\r\n        </button>\r\n    </PagitatorItemStyled>)\r\n}","import React from 'react';\r\nimport { FrownOutlined } from '@ant-design/icons';\r\nimport styled from 'styled-components';\r\n\r\nconst Wrap = styled.div`\r\n    text-align: center;\r\n    padding-top: 50px;\r\n    color: #2B5278;\r\n    \r\n    & svg {\r\n        font-size: 7em;\r\n    }\r\n    \r\n    & p {\r\n        margin-top: 10px;\r\n    }\r\n`\r\n\r\nexport const NotFound = () => {\r\n    return (\r\n        <Wrap>\r\n            <FrownOutlined />\r\n            <p>Not found any user</p>\r\n        </Wrap>\r\n    );\r\n};\r\n\r\n\r\n","import React, {useEffect, useState} from 'react';\r\nimport UsersStlyes from './Users.module.css';\r\nimport User from './User';\r\nimport {Pagitator} from '../common/pagitator/Pagitator';\r\nimport {UniversalWrap} from '../../styles/wrap.styles'\r\n\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {\r\n    getPagePagitator,\r\n    getTotalUsersCountSelector,\r\n    getPageSizeSelector,\r\n    getUsersSelector, getCurrentPageSelector, getFollowProccesSelector, getIsFetchingSelector, getUsersErrorSelector\r\n} from '../../redux-state/selectors/users-selectors';\r\nimport {setUsersThunkCreator, unfollowThunkCreator, UsersActions, followThunkCreator} from '../../redux-state/usersReducer';\r\nimport Preloader from '../assets/preloader/Preloader';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {Button, Select} from 'antd';\r\nimport Search from 'antd/lib/input/Search';\r\nimport {IFilters} from '../../interfaces/common-interfaces';\r\nimport { NotFound } from '../common/notFount/NotFound';\r\nimport {UserOptionItemStyled} from '../../styles/theme';\r\nimport { useHistory} from 'react-router-dom';\r\n\r\nimport {NetworkError} from '../common/NetworkError/NetworkError';\r\nimport {useWindowWidthSize} from '../../hook/Resize';\r\n\r\nconst qs = require('qs')\r\n\r\n\r\n\r\nlet Users: React.FC = () => {\r\n\r\n    const totalUsersCount = useSelector(getTotalUsersCountSelector)\r\n    const pageSize = useSelector(getPageSizeSelector)\r\n    const pagePagitator = useSelector(getPagePagitator)\r\n    const users = useSelector(getUsersSelector)\r\n    const currentPage = useSelector(getCurrentPageSelector)\r\n    const followProcess = useSelector(getFollowProccesSelector)\r\n    const isFetching = useSelector(getIsFetchingSelector)\r\n    const error = useSelector(getUsersErrorSelector)\r\n    const {t} = useTranslation()\r\n    const windowsWidth = useWindowWidthSize()\r\n\r\n\r\n    const [filters, setFilters] = useState<IFilters>({})\r\n    const [searchStr, setSearchStr] = useState('')\r\n\r\n\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n\r\n    const onPageChange = (p: number) => {\r\n        if(windowsWidth <= 720){\r\n            dispatch(setUsersThunkCreator(p, 6, filters));\r\n        }else {\r\n            dispatch(setUsersThunkCreator(p, pageSize, filters));\r\n        }\r\n\r\n    }\r\n\r\n    const setCurrentPagePagitator = (p: number) => {\r\n        dispatch(UsersActions.setCurrentPagePagitator(p))\r\n    }\r\n\r\n    const unfollow = (id: number) => {\r\n        dispatch(unfollowThunkCreator(id))\r\n    }\r\n\r\n    const follow = (id: number) => {\r\n        dispatch(followThunkCreator(id))\r\n    }\r\n\r\n    const getUsers = () => {\r\n        let temp = qs.parse(history.location.search, { ignoreQueryPrefix: true })\r\n        if(temp.term) setSearchStr(temp.term)\r\n        setFilters(temp)\r\n        if(windowsWidth <= 720) {\r\n            dispatch(setUsersThunkCreator(currentPage, 6, temp));\r\n        }else {\r\n            dispatch(setUsersThunkCreator(currentPage, pageSize, temp));\r\n        }\r\n\r\n    }\r\n\r\n    const find = (value: string) => {\r\n        if(value === \"\"){\r\n            setFilters(prevState => {\r\n                let temp = {...prevState}\r\n                delete temp.term\r\n                return temp\r\n            })\r\n        }else  {\r\n            setFilters(prevState => ({...prevState, term: value}))\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const uri = qs.stringify(filters)\r\n        history.push('/friends?'+uri)\r\n        if(windowsWidth <= 720) {\r\n            dispatch(setUsersThunkCreator(1, 6, filters));\r\n        }else {\r\n            dispatch(setUsersThunkCreator(1, pageSize, filters));\r\n        }\r\n\r\n    }, [filters, pageSize])\r\n\r\n\r\n    if(error) {\r\n       return <NetworkError refresh={getUsers}/>\r\n    }\r\n\r\n    const setAllFilters = () => {\r\n        setFilters(prevState => {\r\n            let temp = {...prevState}\r\n            delete temp.friend\r\n            return temp\r\n        })\r\n    }\r\n\r\n    const setFollowedFollowedFilters = () => {\r\n        setFilters(prevState => ({...prevState, friend: true}))\r\n    }\r\n\r\n    const setUnfollowedFilters = () => {\r\n        setFilters(prevState => ({...prevState, friend: false}))\r\n    }\r\n\r\n\r\n    return (<UniversalWrap maxWidth={600}>\r\n                <Pagitator currentPage={currentPage}\r\n                           onPageChange={onPageChange}\r\n                           pagePagitator={pagePagitator}\r\n                           pageSize={pageSize}\r\n                           setCurrentPagePagitator={setCurrentPagePagitator}\r\n                           totalUsersCount={totalUsersCount}\r\n                           windowsWidth={windowsWidth}\r\n                           filters={filters}\r\n                />\r\n\r\n                <UserOptionItemStyled className={UsersStlyes.option}>\r\n                    {windowsWidth >= 720 && <><Button type={(filters.friend === undefined) ? 'primary': 'default'}\r\n                            onClick={setAllFilters}\r\n                            size={\"large\"}>All\r\n                    </Button>\r\n                    <Button size={\"large\"}\r\n                            onClick={setFollowedFollowedFilters}\r\n                            type={(filters.friend) ? 'primary': 'default'}>Followers\r\n                    </Button>\r\n                    <Button size={\"large\"}\r\n                            onClick={setUnfollowedFilters}\r\n                            type={(filters.friend === false) ? 'primary': 'default'}>Not followed\r\n                    </Button></>}\r\n\r\n                    {windowsWidth < 720 && <Select size={'large'}\r\n                            className={UsersStlyes.optionSelect}\r\n                            defaultValue={'all'}\r\n                            onChange={(e:string) => {\r\n                        if(e === 'all') setAllFilters()\r\n                        if(e === 'followed') setFollowedFollowedFilters()\r\n                        if(e === 'not followed') setUnfollowedFilters()\r\n                    }}>\r\n                        <option value=\"all\" key={\"all\"}>All users</option>\r\n                        <option value=\"followed\" key={\"followed\"}>Followed</option>\r\n                        <option value=\"not followed\" key={\"notfollowed\"}>Not followed </option>\r\n                    </Select>}\r\n\r\n                    <Search placeholder=\"input search text\"\r\n                            allowClear\r\n                            enterButton\r\n                            value={searchStr}\r\n                            onChange={e => setSearchStr(e.target.value)}\r\n                            size={\"large\"} onSearch={find}\r\n                    />\r\n\r\n\r\n                </UserOptionItemStyled>\r\n\r\n\r\n                {isFetching ? <Preloader/> : <div className={UsersStlyes.itemWrap}>\r\n                    {users.map((user, index) => <User user={user}\r\n                                                                    followProcess={followProcess}\r\n                                                                    key={index}\r\n                                                                    t={t}\r\n                                                                    index={index}\r\n                                                                    followThunkCreator={follow}\r\n                                                                    unfollowThunkCreator={unfollow}/>)}\r\n                </div>}\r\n\r\n                {users.length === 0 && <NotFound/>}\r\n           </UniversalWrap>)\r\n}\r\n\r\n\r\nexport default Users;","import ua from './langs/ua.json'\r\nimport eng from './langs/eng.json'\r\n\r\nexport const resources = {\r\n    ua: ua,\r\n    eng: eng\r\n}","import {AppStateType} from '../stateRedux';\r\n\r\nexport const getChatMessagesSelector = (state: AppStateType) => (state.chat.messages)\r\nexport const getChatStatusSelector = (state: AppStateType) => (state.chat.status)","import React, {useEffect, useRef, useState} from 'react';\r\nimport {Avatar, Button, Input} from 'antd';\r\nimport { ChatMessageType } from '../../api/chat-api';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {getChatMessagesSelector, getChatStatusSelector} from '../../redux-state/selectors/chat-selector';\r\nimport {\r\n    actionsChat,\r\n    sendMessageThunk,\r\n    startMessagesListening,\r\n    stopMessagesListening\r\n} from '../../redux-state/chat-reducer';\r\nimport styled from 'styled-components';\r\nimport {UniversalThemeComponent} from '../../styles/theme';\r\nimport { UniversalWrap } from '../../styles/wrap.styles';\r\nimport { NavLink } from 'react-router-dom';\r\nimport {SendOutlined} from '@ant-design/icons';\r\n\r\n\r\nconst ChatPageWrapper = styled(UniversalThemeComponent)`\r\n    \r\n`\r\n\r\nexport const ChatPage = () => {\r\n    return (<UniversalWrap maxWidth={500}>\r\n                <ChatPageWrapper>\r\n                    <Chat/>\r\n                </ChatPageWrapper>\r\n            </UniversalWrap>);\r\n};\r\n\r\nconst Chat = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() =>{\r\n        dispatch(startMessagesListening())\r\n\r\n        return () => {\r\n            dispatch(actionsChat.messagesReceived([]))\r\n            dispatch(stopMessagesListening())\r\n        }\r\n    }, [])\r\n\r\n    return <div>\r\n                <Messages/>\r\n                <AddMessageForm />\r\n            </div>\r\n}\r\n\r\nconst MessagesWrapStyled = styled.div`\r\n  max-height: calc(100vh - 110px);\r\n  overflow-y: scroll;\r\n \r\n  &::-webkit-scrollbar {\r\n    width: 2px;}\r\n\r\n  &:hover::-webkit-scrollbar-thumb {\r\n    background: #1890ff;}\r\n    \r\n  @media(max-width: 720px) {\r\n    max-height: calc(100vh - 98px);\r\n  }\r\n\r\n`\r\nconst Messages: React.FC = () => {\r\n    const [isAutoScroll, setIsAutoScroll] = useState(true)\r\n    const scrollToLastMessageRef = useRef<HTMLDivElement>(null)\r\n    const messages = useSelector(getChatMessagesSelector)\r\n\r\n    useEffect(() => {\r\n        if(isAutoScroll){\r\n            scrollToLastMessageRef.current?.scrollIntoView({behavior: 'smooth'})\r\n        }\r\n\r\n    }, [messages, isAutoScroll])\r\n\r\n    return <MessagesWrapStyled onScroll={e => {\r\n        const element = e.currentTarget;\r\n        if (Math.abs( (element.scrollHeight - element.scrollTop) - element.clientHeight ) < 300)\r\n        {\r\n            !isAutoScroll && setIsAutoScroll(true)\r\n        } else {\r\n            isAutoScroll && setIsAutoScroll(false)\r\n        }\r\n    }}>{messages.map((m, i) => <Message key={m.id} {...m}/>)}\r\n                <div ref={scrollToLastMessageRef}></div>\r\n            </MessagesWrapStyled>\r\n}\r\n\r\n\r\nconst MessagesItemStyled = styled.div`\r\n  padding: 8px;\r\n  border-bottom: 1px solid ${props => (props.theme.mode === 'dark') ? '#3C3F41' : 'lightgray'};\r\n  display: flex;\r\n  & > div {\r\n    margin-right: 10px;\r\n  }\r\n  \r\n  & p {\r\n    padding: 5px 0px;\r\n  }\r\n  \r\n  & b {\r\n    font-size: 1.2em;\r\n  }\r\n`\r\nconst Message: React.FC<ChatMessageType> = React.memo(props => {\r\n    return <MessagesItemStyled>\r\n                <div><Avatar src={props.photo} size={40}/> </div>\r\n                <div>\r\n                    <NavLink to={'profile/'+props.userId}><b>{props.userName}</b></NavLink>\r\n                    <p>\r\n                        {props.message}\r\n                    </p>\r\n                </div>\r\n           </MessagesItemStyled>\r\n})\r\n\r\nconst AddMessageFormStyled = styled.div`\r\n    display: flex;\r\n    padding: 5px;\r\n    \r\n    & input {\r\n        margin-right: 10px;\r\n        border: none;\r\n        color: ${props => (props.theme.mode === 'dark') ? '#fff' : '#000'};\r\n        background: ${props => (props.theme.mode === 'dark') ? '#3C3F41' : 'lightgray'};\r\n    }\r\n    \r\n    & svg {\r\n        color: #fff;\r\n    }\r\n`\r\n\r\nconst AddMessageForm:React.FC  = () => {\r\n    const [message, setMessageText] = useState('')\r\n    const dispatch = useDispatch()\r\n    const status = useSelector(getChatStatusSelector)\r\n\r\n    const sendMessageHandler = () => {\r\n        if(message !== '') dispatch(sendMessageThunk(message))\r\n\r\n        setMessageText('')\r\n    }\r\n\r\n    return <AddMessageFormStyled>\r\n            <Input value={message}\r\n                   placeholder={'Enter your message'}\r\n                   onChange={e => setMessageText(e.target.value)}\r\n                   size={'large'}\r\n            ></Input>\r\n            <div>\r\n                <Button type={'primary'}\r\n                        disabled={status === 'pending'}\r\n                        size={'large'}\r\n                        onClick={sendMessageHandler}\r\n                ><SendOutlined /></Button>\r\n            </div>\r\n        </AddMessageFormStyled>\r\n}\r\n\r\n\r\n","import React, {useEffect} from 'react';\r\nimport {Route, Switch, useHistory} from 'react-router-dom';\r\n\r\nimport Login from './components/Login/Login';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {initializeApp} from './redux-state/appReducer';\r\nimport Preloader from './components/assets/preloader/Preloader';\r\n\r\nimport {getNewMessageCountThunkCreator} from './redux-state/notificationReducer';\r\nimport {createGlobalStyle, ThemeProvider} from 'styled-components';\r\nimport {AdaptiveMenu} from './components/Nav/adaptiveNav';\r\nimport Dialogs from \"./components/Dialogs\";\r\n\r\nimport Header from './components/Header/header';\r\n\r\nimport Setting from './components/Setting/setting';\r\nimport {getInitializedSelector, getIsBlackSelector} from './redux-state/selectors/app-selectors';\r\nimport Profile from './components/Profile/profile';\r\nimport Users from './components/Users/Users';\r\n\r\nimport i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport {resources} from './localization';\r\nimport {ChatPage} from './components/Chat/Chat';\r\nimport {getIsLoginedSelector} from './redux-state/selectors/login-selectors';\r\n\r\ni18n\r\n    .use(initReactI18next) // passes i18n down to react-i18next\r\n    .init({\r\n        resources: resources,\r\n        lng: \"eng\",\r\n        fallbackLng: \"eng\",\r\n\r\n        interpolation: {\r\n            escapeValue: false\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\ntype themeType = {\r\n    theme: {\r\n        mode: string\r\n    }\r\n}\r\n\r\nconst GlobalStyle = createGlobalStyle<themeType>`\r\n  body {\r\n    background: ${props => (props.theme.mode === 'dark' ? '#3C3F41' : '#E7EBF0')};\r\n  }\r\n`\r\n\r\nconst App = () => {\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const initialized = useSelector(getInitializedSelector)\r\n    const isBlackTheme = useSelector(getIsBlackSelector)\r\n    const isLogined = useSelector(getIsLoginedSelector)\r\n\r\n    useEffect(() => {\r\n        dispatch(initializeApp())\r\n        dispatch(getNewMessageCountThunkCreator())\r\n    }, [dispatch])\r\n\r\n\r\n    if (!initialized) {\r\n        return <Preloader/>\r\n    }\r\n\r\n    if(!isLogined) {\r\n        history.push('/login')\r\n    }\r\n\r\n\r\n    return (\r\n        <ThemeProvider theme={{mode: isBlackTheme ? 'dark' : 'light'}}>\r\n            <div className=\"render\">\r\n                <GlobalStyle/>\r\n                <Header/>\r\n                <AdaptiveMenu/>\r\n\r\n                <React.Suspense fallback={<Preloader/>}>\r\n                    <Switch>\r\n                        <Route path=\"/login\" exact render={() => <Login/>}/>\r\n                        {!isLogined && <Route path=\"*\" exact render={() => <Login/>}/>}\r\n\r\n                        <div className=\"main-wrap\">\r\n                            {isLogined && <main>\r\n                                <Route path=\"/dialogs/:userID?\"\r\n                                       render={() => <Dialogs/>}/>\r\n                                <Route path=\"/setting\" render={() => <Setting/>}/>\r\n                                <Route path=\"/chat\" render={() => <ChatPage/>}/>\r\n                                <Route path={['/profile/:userID?', '/']} exact render={() => <Profile/>}/>\r\n                                <Route path=\"/friends\" render={() => <Users/>}/>\r\n                                {/*<Route path={'*'} exact render={() => <NotFound/>}/>*/}\r\n                            </main>}\r\n                        </div>\r\n                    </Switch>\r\n                </React.Suspense>\r\n            </div>\r\n        </ThemeProvider>);\r\n}\r\nexport default App","import React from 'react';\r\nimport './index.css';\r\nimport './App.less'\r\nimport store from './redux-state/stateRedux';\r\nimport ReactDOM from 'react-dom';\r\n\r\n\r\n\r\nimport {HashRouter} from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(<HashRouter>\r\n                    <Provider store={store}>\r\n                        <App/>\r\n                    </Provider>\r\n                </HashRouter>, document.getElementById('root'));\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"nav_navigation__okixQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"setting_wrap__2RLco\",\"item\":\"setting_item__vgTv7\",\"formItem\":\"setting_formItem__39wDi\",\"buttons\":\"setting_buttons__3MVHj\",\"tab\":\"setting_tab__170X5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"header_Header__3Uuvi\",\"headerWrap\":\"header_headerWrap__3SXSf\",\"logo\":\"header_logo__2-YEm\",\"leftside\":\"header_leftside__3Gzn8\",\"rightside\":\"header_rightside__jIdh2\",\"input\":\"header_input__3Lmm_\",\"note\":\"header_note__1Sfux\",\"messages\":\"header_messages__HXPwF\",\"newMessageCount\":\"header_newMessageCount__DtCQL\",\"profile_avatar\":\"header_profile_avatar__pJ99k\",\"logout\":\"header_logout__2ESFP\",\"Search\":\"header_Search__2cxH8\",\"Results\":\"header_Results__1d4jf\",\"Item\":\"header_Item__2gc9e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"DialogsList_dialogs__1Nqux\",\"searchDialog\":\"DialogsList_searchDialog__21E4V\",\"contactList\":\"DialogsList_contactList__onkpa\",\"avatar\":\"DialogsList_avatar__j5sJS\",\"lastMessage\":\"DialogsList_lastMessage__24o3x\",\"DialogItem\":\"DialogsList_DialogItem__2liPF\",\"newMessagesCount\":\"DialogsList_newMessagesCount__1MXuv\",\"active\":\"DialogsList_active__T85sN\",\"dates\":\"DialogsList_dates__2nUO3\",\"dialogList\":\"DialogsList_dialogList__15I7r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Login\":\"Login_Login__3RwXo\",\"Photo\":\"Login_Photo__3VMgt\",\"LoginForm\":\"Login_LoginForm__218aj\",\"Form\":\"Login_Form__keoEW\",\"Input\":\"Login_Input__2oHp0\",\"RememberMe\":\"Login_RememberMe__1BPhQ\",\"Error\":\"Login_Error__19o-N\",\"Captcha\":\"Login_Captcha__3eFdd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"MyPosts_button__2-4Ib\",\"item\":\"MyPosts_item__sEgfY\",\"newpost\":\"MyPosts_newpost__3nEyx\",\"send\":\"MyPosts_send__36-wM\",\"createnewpost\":\"MyPosts_createnewpost__2TTAZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogWithUser\":\"DialogWithUser_dialogWithUser__3Mv4L\",\"dialogHeader\":\"DialogWithUser_dialogHeader__3elbp\",\"createNewMessage\":\"DialogWithUser_createNewMessage__2yScJ\",\"Dialogavatar\":\"DialogWithUser_Dialogavatar__2cOgG\",\"status\":\"DialogWithUser_status__23U5w\",\"backToDialogList\":\"DialogWithUser_backToDialogList__3vQ36\",\"noDialog\":\"DialogWithUser_noDialog__22kAV\"};"],"sourceRoot":""}